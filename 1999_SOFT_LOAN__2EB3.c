// 1999_SOFT_LOAN__2EB3.c
// Generated by decompiling 1999_SOFT_LOAN_.exe
// using Reko decompiler version 0.11.4.0.

#include "1999_SOFT_LOAN_.h"

// 2EB3:0002: define fn2EB3_0002
// Called from:
//      fn2EB3_0064
define fn2EB3_0002
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 2;
	ss->*sp = si;
	es_bx = ss->*((word16) bp + 6);
	&si.u2->t0000.u0 = (es->*bx).t0000.u2;
	SCZO = cond(si - ~0x00);
	if (Test(NE,Z))
	{
		sp -= 2;
		ss->*sp = si;
		fn208F_00AE();
		sp = (word16) sp + 2;
		SCZO = cond(sp);
	}
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond((es->*bx).t000A.u2 - 0x00);
	if (Test(NE,Z))
	{
		&v12.u2->t0000.u0 = (es->*bx).t000A.u2;
		sp -= 2;
		ss->*sp = v12;
		fn31FF_1C0A();
		sp = (word16) sp + 2;
		SCZO = cond(sp);
	}
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond((es->*bx).t0010.u2 - 0x00);
	if (Test(NE,Z))
	{
		&v13.u2->t0000.u0 = (es->*bx).t0010.u2;
		sp -= 2;
		ss->*sp = v13;
		&v14.u2->t0000.u0 = (es->*bx).t000E.u2;
		sp -= 2;
		ss->*sp = v14;
		&v15.u2->t0000.u0 = (es->*bx).t000C.u2;
		sp -= 2;
		ss->*sp = v15;
		fn21DC_074E();
		sp = (word16) sp + 6;
		SCZO = cond(sp);
	}
	ax.u0 = 0xD0;
	sp -= 2;
	ss->*sp = ax;
	v17 = ss->*((word16) bp + 8);
	sp -= 2;
	ss->*sp = v17;
	v18 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v18;
	fn21DC_0702();
	sp = (word16) sp + 6;
	SCZO = cond(sp);
	si = ss->*sp;
	sp = (word16) sp + 2;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2EB3:0064: define fn2EB3_0064
// Called from:
//      fn2644_45CA
define fn2EB3_0064
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x0E;
	sp -= 2;
	ss->*sp = si;
	es_bx = ds->t130A;
	ax = es->*bx;
	dx = es->*((word16) bx + 2);
	ss->*((word16) bp - 4) = ax;
	ss->*((word16) bp - 2) = dx;
	ax |= dx;
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(NE,Z))
	{
		es_bx = ss->*((word16) bp - 4);
		SCZO = cond(es->*((word16) bx + 100) - 0x00);
		if (Test(NE,Z))
		{
			ax.u0 = 0x01;
			sp -= 2;
			ss->*sp = ax;
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = bx;
			fn2644_1F12();
			sp = (word16) sp + 6;
			SCZO = cond(sp);
			es_bx = ss->*((word16) bp - 4);
			ax = es->*((word16) bx + 100);
			ss->*((word16) bp - 6) = ax;
			while (true)
			{
				SCZO = cond(ss->*((word16) bp - 6) - 0x00);
				if (Test(EQ,Z))
					break;
				si = ss->*((word16) bp - 6);
				si <<= 0x01;
				si <<= 0x01;
				es_bx = ss->*((word16) bp - 4);
				ax = es->*((word16) si.u0 + ((word16) bx + 0x0066));
				dx = es->*((word16) si.u0 + ((word16) bx + 0x0068));
				ss->*((word16) bp - 0x0E) = ax;
				ss->*((word16) bp - 0x0C) = dx;
				es_bx = ss->*((word16) bp - 0x0E);
				SCZO = cond(es->*((word16) bx + 2) - 0x00);
				if (Test(EQ,Z))
				{
					SCZO = cond(es->*((word16) bx + 4) - 0x00);
					if (Test(NE,Z))
					{
						ax -= ax;
						SCZO = cond(ax);
						sp -= 2;
						ss->*sp = ax;
						sp -= 2;
						ss->*sp = ax;
						v18 = es->*bx;
						sp -= 2;
						ss->*sp = v18;
						fn2E37_05C0();
						sp = (word16) sp + 6;
						SCZO = cond(sp);
						ss->*((word16) bp - 0x0A) = ax;
						ss->*((word16) bp - 8) = dx;
						es_bx = ss->*((word16) bp - 0x0A);
						(es->*((word16) bx + 2)).u0 = 0x01;
						es_bx = ss->*((word16) bp - 0x0E);
						ax = es->*((word16) bx + 24);
						dx = es->*((word16) bx + 26);
						es_bx = ss->*((word16) bp - 0x0A);
						es->*((word16) bx + 8) = ax;
						es->*((word16) bx + 0x0A) = dx;
						es_bx = ss->*((word16) bp - 0x0E);
						ax = es->*((word16) bx + 20);
						dx = es->*((word16) bx + 22);
						es_bx = ss->*((word16) bp - 0x0A);
						es->*((word16) bx + 4) = ax;
						es->*((word16) bx + 6) = dx;
					}
				}
				ax -= ax;
				SCZO = cond(ax);
				sp -= 2;
				ss->*sp = ax;
				es_bx = ss->*((word16) bp - 0x0E);
				v19 = es->*bx;
				sp -= 2;
				ss->*sp = v19;
				fn2E37_06F4();
				sp = (word16) sp + 4;
				SCZO = cond(sp);
				ds->w1484 = 0x00;
				v20 = ss->*((word16) bp - 0x0C);
				sp -= 2;
				ss->*sp = v20;
				v21 = ss->*((word16) bp - 0x0E);
				sp -= 2;
				ss->*sp = v21;
				fn2EB3_0002();
				sp = (word16) sp + 4;
				SCZO = cond(sp);
				v22 = ss->*((word16) bp - 6) - 0x01;
				ss->*((word16) bp - 6) = v22;
				SZO = cond(v22);
			}
			es_bx = ss->*((word16) bp - 4);
			(es->*((word16) bx + 100)).u0 = 0x00;
			es->*((word16) bx + 98) = 0x00;
		}
	}
	si = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2EB3:060C: define fn2EB3_060C
// Called from:
//      fn2EB3_07B2
//      fn2EB3_2340
define fn2EB3_060C
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x10;
	sp -= 2;
	ss->*sp = si;
	es_bx = ss->*((word16) bp + 0x0A);
	si.u3 = (es->*bx).a0000[0].u3;
	SZP = cond(si & 0x0A);
	O = false;
	C = false;
	if (Test(EQ,Z))
	{
		es_bx = ss->*((word16) bp + 0x0A);
		SZP = cond((es->*bx).a0000[0].u0 & 0x20);
		O = false;
		C = false;
		if (Test(NE,Z))
		{
			(ss->*((word16) bp - 0x0A)).u0 = 0x09;
			(ss->*((word16) bp - 0x0E)).u0 = 0x08;
			ax.u0 = 0x09;
			sp -= 2;
			ss->*sp = ax;
			ax = bp - 4;
			sp -= 2;
			ss->*sp = ss;
			sp -= 2;
			ss->*sp = ax;
			fn21DC_0696();
			sp = (word16) sp + 6;
			ax |= ax;
			SZ = cond(ax);
			O = false;
			C = false;
			if (Test(NE,Z))
			{
				ax -= ax;
				SCZO = cond(ax);
				sp -= 2;
				ss->*sp = ax;
				es_bx = ss->*((word16) bp + 0x0A);
				v18.u3 = (es->*bx).t000A.u3;
				sp -= 2;
				ss->*sp = v18;
				v19.u3 = (es->*bx).t0008.u3;
				sp -= 2;
				ss->*sp = v19;
				v20 = ss->*((word16) bp - 2);
				sp -= 2;
				ss->*sp = v20;
				v21 = ss->*((word16) bp - 4);
				sp -= 2;
				ss->*sp = v21;
				fn38D6_06FA();
				sp = (word16) sp + 0x0A;
				SCZO = cond(sp);
				goto l2EB3_0786;
			}
		}
	}
	else
	{
		es_bx = ss->*((word16) bp + 6);
		ax.u3 = (es->*bx).t0026.u3;
		ss->*((word16) bp - 0x0E) = ax;
		ax.u3 = (es->*bx).t0028.u3;
		ss->*((word16) bp - 0x0C) = ax;
		ax = ss->*((word16) bp - 0x0E);
		ax = (char *) ax.u3 + 1;
		SZO = cond(ax);
		ss->*((word16) bp - 0x0A) = ax;
		sp -= 2;
		ss->*sp = ax;
		ax = bp - 4;
		sp -= 2;
		ss->*sp = ss;
		sp -= 2;
		ss->*sp = ax;
		fn21DC_0696();
		sp = (word16) sp + 6;
		ax |= ax;
		SZ = cond(ax);
		O = false;
		C = false;
		if (Test(NE,Z))
		{
			SCZO = cond(si - 0x08);
			if (Test(EQ,Z))
			{
				es_bx = ss->*((word16) bp + 0x0A);
				v23.u3 = (es->*bx).t000E.u3;
				sp -= 2;
				ss->*sp = v23;
				v24.u3 = (es->*bx).t000C.u3;
				sp -= 2;
				ss->*sp = v24;
				v25.u3 = (es->*bx).t000A.u3;
				sp -= 2;
				ss->*sp = v25;
				v26.u3 = (es->*bx).t0008.u3;
				sp -= 2;
				ss->*sp = v26;
				fn400D_00DE();
				sp = (word16) sp + 8;
				SCZO = cond(sp);
				ss->*((word16) bp - 8) = ax;
				v27 = ss->*((word16) bp - 2);
				sp -= 2;
				ss->*sp = v27;
				v28 = ss->*((word16) bp - 4);
				sp -= 2;
				ss->*sp = v28;
				v29 = ss->*((word16) bp - 0x0C);
				sp -= 2;
				ss->*sp = v29;
				v30 = ss->*((word16) bp - 0x0E);
				sp -= 2;
				ss->*sp = v30;
				es_bx = ss->*((word16) bp + 0x0A);
				v31.u3 = (es->*bx).t000E.u3;
				sp -= 2;
				ss->*sp = v31;
				v32.u3 = (es->*bx).t000C.u3;
				sp -= 2;
				ss->*sp = v32;
				v33.u3 = (es->*bx).t000A.u3;
				sp -= 2;
				ss->*sp = v33;
				v34.u3 = (es->*bx).t0008.u3;
				sp -= 2;
				ss->*sp = v34;
				fn3CEE_0DA8();
				sp = (word16) sp + 16;
				SCZO = cond(sp);
			}
			else
			{
				es_bx = ss->*((word16) bp + 0x0A);
				SCZO = cond((es->*bx).t000A.u3 - 0x00);
				if (Test(LT,SO))
					ax.u0 = 0x01;
				else
				{
					ax -= ax;
					SCZO = cond(ax);
				}
				ss->*((word16) bp - 8) = ax;
				v36 = ss->*((word16) bp - 0x0C);
				sp -= 2;
				ss->*sp = v36;
				v37 = ss->*((word16) bp - 0x0E);
				sp -= 2;
				ss->*sp = v37;
				v38.u3 = (es->*bx).t000A.u3;
				sp -= 2;
				ss->*sp = v38;
				v39.u3 = (es->*bx).t0008.u3;
				sp -= 2;
				ss->*sp = v39;
				v40 = ss->*((word16) bp - 2);
				sp -= 2;
				ss->*sp = v40;
				v41 = ss->*((word16) bp - 4);
				sp -= 2;
				ss->*sp = v41;
				fn3CEE_0EFC();
				sp = (word16) sp + 0x0C;
				SCZO = cond(sp);
			}
			SCZO = cond(ss->*((word16) bp - 8) - 0x00);
			if (Test(NE,Z))
			{
				ss->*((word16) bp - 6) = &Eq_87244::t0000;
				while (true)
				{
					ax = ss->*((word16) bp - 0x0E);
					SCZO = cond(ss->*((word16) bp - 6) - ax);
					if (Test(UGE,C))
						break;
					bx = (struct Eq_87245 Eq_87244::*) (ss->*((word16) bp - 6));
					es_si = ss->*((word16) bp - 4);
					al = Mem0[es:bx + si:byte];
					ss->*((word16) bp - 16) = al;
					SCZO = cond(al - 0x20);
					if (Test(NE,Z))
					{
						SCZO = cond(al - 0x2D);
						if (Test(EQ,Z))
							goto l2EB3_070A;
						bx = (struct Eq_87245 Eq_87244::*) (ss->*((word16) bp - 6));
						es_si = ss->*((word16) bp - 4);
						al.u0 = 0x5C;
						al -= Mem0[es:bx + si:byte];
						SCZO = cond(al);
						Mem0[es:bx + si:byte] = al;
					}
					else
					{
l2EB3_070A:
						si = ss->*((word16) bp - 4);
						Mem0[es:bx + si:byte] = 44;
					}
					v44 = (struct Eq_87245 Eq_87244::*) ((word32) (ss->*((word16) bp - 6)) + 1);
					ss->*((word16) bp - 6) = v44;
					SZO = cond(v44);
				}
			}
			else
			{
				ss->*((word16) bp - 6) = &Eq_87244::t0000;
				while (true)
				{
					ax = ss->*((word16) bp - 0x0E);
					SCZO = cond(ss->*((word16) bp - 6) - ax);
					if (Test(UGE,C))
						break;
					bx = (struct Eq_87245 Eq_87244::*) (ss->*((word16) bp - 6));
					es_si = ss->*((word16) bp - 4);
					SCZO = cond(Mem0[es:bx + si:byte] - 0x20);
					if (Test(NE,Z))
						break;
					Mem0[es:bx + si:byte] = 0x30;
					v45 = (struct Eq_87245 Eq_87244::*) ((word32) (ss->*((word16) bp - 6)) + 1);
					ss->*((word16) bp - 6) = v45;
					SZO = cond(v45);
				}
			}
l2EB3_0786:
			es_bx = ss->*((word16) bp + 0x0A);
			(es->*bx).a0000[0].u3 = (struct Eq_237395 *) 0x0100;
			ax = ss->*((word16) bp - 0x0E);
			(es->*bx).t0002.u3 = (struct Eq_237395 *) ax;
			ax = ss->*((word16) bp - 4);
			dx = ss->*((word16) bp - 2);
			(es->*bx).t0008.u3 = (struct Eq_237395 *) ax;
			(es->*bx).t000A.u3 = (struct Eq_237395 *) dx;
			ax = ss->*((word16) bp - 0x0A);
			(es->*bx).t000C.u3 = (struct Eq_237395 *) ax;
			ax.u0 = 0x01;
			si = ss->*sp;
			sp = bp;
			bp = ss->*sp;
			sp = (word16) sp + 2;
			return;
		}
	}
	ax -= ax;
	SCZO = cond(ax);
	si = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2EB3:07B2: define fn2EB3_07B2
// Called from:
//      fn2644_24C0
define fn2EB3_07B2
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x0C;
	sp -= 2;
	ss->*sp = si;
	ax = ss->*((word16) bp + 6);
	ax |= ss->*((word16) bp + 8);
	SZ = cond(ax);
	O = false;
	C.u0 = false;
	if (Test(EQ,Z))
	{
l2EB3_07FC:
		ax -= ax;
		SCZO = cond(ax);
		si = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
		return;
	}
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond(es->*((word16) bx + 98) - 0x00);
	if (Test(EQ,Z))
		goto l2EB3_07FC;
	si = es->*((word16) bx + 98);
	si <<= 0x01;
	si <<= 0x01;
	ax = es->*((word16) si + ((word16) bx + 0x0066));
	dx = es->*((word16) si + ((word16) bx + 0x0068));
	ss->*((word16) bp - 0x0C) = ax;
	ss->*((word16) bp - 0x0A) = dx;
	SZP = cond(ss->*((word16) bp + 0x0A) & 0x0100);
	O = false;
	C.u0 = false;
	if (Test(EQ,Z))
	{
		ax = (word16) bp + 0x0A;
		sp -= 2;
		ss->*sp = ss;
		sp -= 2;
		ss->*sp = ax;
		sp -= 2;
		ss->*sp = dx;
		v18 = ss->*((word16) bp - 0x0C);
		sp -= 2;
		ss->*sp = v18;
		fn2EB3_060C();
		sp = (word16) sp + 8;
		ax |= ax;
		SZ = cond(ax);
		O = false;
		C.u0 = false;
		if (Test(EQ,Z))
			goto l2EB3_07FC;
		ss->*((word16) bp - 6) = 0x01;
	}
	else
		ss->*((word16) bp - 6) = 0x00;
	ax.u0 = 0x02;
	sp -= 2;
	ss->*sp = ax;
	v19 = ss->*((word16) bp + 8);
	sp -= 2;
	ss->*sp = v19;
	v20 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v20;
	fn2644_1F12();
	sp = (word16) sp + 6;
	ss->*((word16) bp - 8) = ax;
	SCZO = cond(ss->*((word16) bp + 26) - 0x01);
	ax = ax - ax - C;
	SCZO = cond(ax);
	ax.u0 = (bool) ax.u0 + 1;
	SZO = cond(ax);
	sp -= 2;
	ss->*sp = ax;
	v22 = ss->*((word16) bp + 0x0C);
	sp -= 2;
	ss->*sp = v22;
	v23 = ss->*((word16) bp + 20);
	sp -= 2;
	ss->*sp = v23;
	v24 = ss->*((word16) bp + 18);
	sp -= 2;
	ss->*sp = v24;
	v25 = ss->*((word16) bp - 0x0A);
	sp -= 2;
	ss->*sp = v25;
	v26 = ss->*((word16) bp - 0x0C);
	sp -= 2;
	ss->*sp = v26;
	fn2EB3_1FCC();
	sp = (word16) sp + 0x0C;
	SCZO = cond(sp);
	ss->*((word16) bp - 4) = ax;
	ss->*((word16) bp - 2) = dx;
	sp -= 2;
	ss->*sp = dx;
	sp -= 2;
	ss->*sp = ax;
	v27 = ss->*((word16) bp + 8);
	sp -= 2;
	ss->*sp = v27;
	v28 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v28;
	fn2644_22BE();
	sp = (word16) sp + 8;
	es_bx = ss->*((word16) bp + 6);
	ax = es->*((word16) bx + 66);
	es->*((word16) bx + 76) = ax;
	SCZO = cond(es->*((word16) bx + 0x00BA) - 0x00);
	if (Test(NE,Z))
	{
		sp -= 2;
		ss->*sp = es;
		sp -= 2;
		ss->*sp = bx;
		fn2644_24C0();
		sp = (word16) sp + 4;
		SCZO = cond(sp);
	}
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond(es->*((word16) bx + 66) - 0x00);
	if (Test(EQ,Z))
	{
l2EB3_092B:
		es_bx = ss->*((word16) bp + 6);
		SCZO = cond(es->*((word16) bx + 66) - 0x00);
		if (Test(EQ,Z))
		{
			es_bx = ss->*((word16) bp - 0x0C);
			es->*((word16) bx + 46) = 0x00;
		}
		SCZO = cond(ss->*((word16) bp - 8) - 0x00);
		if (Test(NE,Z))
		{
			ax.u0 = 0x04;
			sp -= 2;
			ss->*sp = ax;
			v38 = ss->*((word16) bp + 8);
			sp -= 2;
			ss->*sp = v38;
			v39 = ss->*((word16) bp + 6);
			sp -= 2;
			ss->*sp = v39;
			fn2644_1F12();
			sp = (word16) sp + 6;
			SCZO = cond(sp);
		}
		es_bx = ss->*((word16) bp + 6);
		ax = es->*((word16) bx + 44);
		ax |= es->*((word16) bx + 46);
		SZ = cond(ax);
		O = false;
		C.u0 = false;
		if (Test(EQ,Z))
			ax.u0 = 0x01;
		else
		{
			ax -= ax;
			SCZO = cond(ax);
		}
		es->*((word16) bx + 74) = ax;
		SCZO = cond(ss->*((word16) bp - 6) - 0x00);
		if (Test(NE,Z))
		{
			SCZO = cond(ss->*((word16) bp + 0x0A) - 0x0100);
			if (Test(EQ,Z))
			{
				SCZO = cond(ss->*((word16) bp + 22) - 0x00);
				if (Test(NE,Z))
				{
					v40 = ss->*((word16) bp + 22);
					sp -= 2;
					ss->*sp = v40;
					v41 = ss->*((word16) bp + 20);
					sp -= 2;
					ss->*sp = v41;
					v42 = ss->*((word16) bp + 18);
					sp -= 2;
					ss->*sp = v42;
					fn21DC_0702();
					sp = (word16) sp + 6;
					SCZO = cond(sp);
				}
			}
		}
		ax.u0 = 0x01;
		si = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
		return;
	}
	SCZO = cond(ds->w13E8 - 0x00);
	if (Test(EQ,Z))
	{
		SCZO = cond(es->*((word16) bx + 0x00B0) - 0x00);
		if (Test(EQ,Z))
		{
			SCZO = cond(ss->*((word16) bp + 26) - 0x00);
			if (Test(EQ,Z))
				goto l2EB3_092B;
		}
	}
	ax.u0 = 0x01;
	dx_ax = (int32) ax;
	sp -= 2;
	ss->*sp = dx;
	sp -= 2;
	ss->*sp = ax;
	sp -= 2;
	ss->*sp = es;
	sp -= 2;
	ss->*sp = bx;
	fn2644_2384();
	sp = (word16) sp + 8;
	ax |= ax;
	SZ = cond(ax);
	O = false;
	C.u0 = false;
	if (Test(NE,Z))
	{
		es_bx = ss->*((word16) bp + 6);
		SCZO = cond(es->*((word16) bx + 66) - 0x00);
		if (Test(NE,Z))
		{
l2EB3_08C0:
			v31 = ss->*((word16) bp - 0x0A);
			sp -= 2;
			ss->*sp = v31;
			v32 = ss->*((word16) bp - 0x0C);
			sp -= 2;
			ss->*sp = v32;
			fn2EB3_240A();
			sp = (word16) sp + 4;
			SCZO = cond(sp);
			v33 = ss->*((word16) bp + 0x0C);
			sp -= 2;
			ss->*sp = v33;
			v34 = ss->*((word16) bp + 20);
			sp -= 2;
			ss->*sp = v34;
			v35 = ss->*((word16) bp + 18);
			sp -= 2;
			ss->*sp = v35;
			es_bx = ss->*((word16) bp - 0x0C);
			v36 = es->*((word16) bx + 0x0E);
			sp -= 2;
			ss->*sp = v36;
			v37 = es->*((word16) bx + 0x0C);
			sp -= 2;
			ss->*sp = v37;
			fn38AD_00F2();
			sp = (word16) sp + 0x0A;
			ax |= ax;
			SZ = cond(ax);
			O = false;
			C.u0 = false;
			if (Test(NE,Z))
			{
				es_bx = ss->*((word16) bp + 6);
				(es->*((word16) bx + 76)).u0 = 0x00;
				SCZO = cond(ss->*((word16) bp + 26) - 0x00);
				if (Test(EQ,Z))
				{
					ax -= ax;
					SCZO = cond(ax);
					sp -= 2;
					ss->*sp = ax;
					sp -= 2;
					ss->*sp = ax;
					sp -= 2;
					ss->*sp = es;
					sp -= 2;
					ss->*sp = bx;
					fn2644_22BE();
					sp = (word16) sp + 8;
					es_bx = ss->*((word16) bp + 6);
					SCZO = cond(es->*((word16) bx + 0x00BA) - 0x00);
					if (Test(NE,Z))
					{
						sp -= 2;
						ss->*sp = es;
						sp -= 2;
						ss->*sp = bx;
						fn2644_24C0();
						sp = (word16) sp + 4;
						SCZO = cond(sp);
					}
				}
			}
			else
			{
				es_bx = ss->*((word16) bp + 6);
				(es->*((word16) bx + 76)).u0 = 0x01;
			}
			goto l2EB3_092B;
		}
	}
	SCZO = cond(ss->*((word16) bp + 26) - 0x00);
	if (Test(EQ,Z))
		goto l2EB3_092B;
	goto l2EB3_08C0;
}

// 2EB3:0A8C: define fn2EB3_0A8C
// Called from:
//      fn2EB3_0B54
define fn2EB3_0A8C
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x0E;
	sp -= 2;
	ss->*sp = si;
	es_bx = ss->*((word16) bp + 6);
	si.u0 = (es->*bx).t0000.u0;
	ax -= ax;
	SCZO = cond(ax);
	sp -= 2;
	ss->*sp = ax;
	sp -= 2;
	ss->*sp = ax;
	sp -= 2;
	ss->*sp = ax;
	sp -= 2;
	ss->*sp = si;
	fn208F_0115();
	sp = (word16) sp + 8;
	SCZO = cond(sp);
	ax.u0 = 0x0C;
	sp -= 2;
	ss->*sp = ax;
	ax = bp - 0x0E;
	sp -= 2;
	ss->*sp = ss;
	sp -= 2;
	ss->*sp = ax;
	sp -= 2;
	ss->*sp = si;
	fn208F_00C9();
	sp = (word16) sp + 8;
	es_bx = ss->*((word16) bp + 6);
	ax = ss->*((word16) bp - 0x0C);
	SCZO = cond((es->*bx).t0012.u0 - ax);
	if (Test(NE,Z))
		ax.u0 = 0x01;
	else
	{
		ax -= ax;
		SCZO = cond(ax);
	}
	ss->*((word16) bp - 2) = ax;
	ax = ss->*((word16) bp - 0x0C);
	(es->*bx).t0012.u0 = (struct Eq_237403 *) ax;
	ax = ss->*((word16) bp - 0x0A);
	dx = (word16) (ss->*((word16) bp - 8));
	(es->*bx).t0014.u0 = (struct Eq_237403 *) ax;
	(es->*bx).w0016 = dx;
	ax = ss->*((word16) bp - 6);
	dx = (word16) (ss->*((word16) bp - 4));
	(es->*bx).t0018.u0 = (struct Eq_237403 *) ax;
	(es->*bx).w001A = dx;
	ax = ss->*((word16) bp - 2);
	si = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2EB3:0AFA: define fn2EB3_0AFA
// Called from:
//      fn2EB3_0BB4
define fn2EB3_0AFA
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x0C;
	sp -= 2;
	ss->*sp = si;
	ss->*((word16) bp - 0x0C) = 0x06;
	es_bx = ss->*((word16) bp + 6);
	ax.u0 = (es->*bx).t0012.u0;
	ss->*((word16) bp - 0x0A) = ax;
	ax.u0 = (es->*bx).t0014.u0;
	dx = (es->*bx).w0016;
	ss->*((word16) bp - 8) = ax;
	ss->*((word16) bp - 6) = dx;
	ax.u0 = (es->*bx).t0018.u0;
	dx = (es->*bx).w001A;
	ss->*((word16) bp - 4) = ax;
	ss->*((word16) bp - 2) = dx;
	si.u0 = (es->*bx).t0000.u0;
	ax -= ax;
	SCZO = cond(ax);
	sp -= 2;
	ss->*sp = ax;
	sp -= 2;
	ss->*sp = ax;
	sp -= 2;
	ss->*sp = ax;
	sp -= 2;
	ss->*sp = si;
	fn208F_0115();
	sp = (word16) sp + 8;
	SCZO = cond(sp);
	ax.u0 = 0x0C;
	sp -= 2;
	ss->*sp = ax;
	ax = bp - 0x0C;
	sp -= 2;
	ss->*sp = ss;
	sp -= 2;
	ss->*sp = ax;
	sp -= 2;
	ss->*sp = si;
	fn208F_00EF();
	sp = (word16) sp + 8;
	SCZO = cond(sp);
	si = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2EB3:0B54: define fn2EB3_0B54
// Called from:
//      fn2644_1F12
//      fn2EB3_24C6
define fn2EB3_0B54
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 2;
	ss->*sp = si;
	es_bx = ss->*((word16) bp + 6);
	v10.u0 = (es->*bx).t0000.u0;
	sp -= 2;
	ss->*sp = v10;
	fn207F_0006();
	sp = (word16) sp + 2;
	SCZO = cond(sp);
	v12 = ss->*((word16) bp + 8);
	sp -= 2;
	ss->*sp = v12;
	v13 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v13;
	fn2EB3_0A8C();
	sp = (word16) sp + 4;
	ax |= ax;
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(NE,Z))
	{
		es_bx = ss->*((word16) bp + 6);
		si.u0 = (es->*bx).t0000.u0;
		ax -= ax;
		SCZO = cond(ax);
		sp -= 2;
		ss->*sp = ax;
		sp -= 2;
		ss->*sp = si;
		fn2E37_06F4();
		sp = (word16) sp + 4;
		ds->w1484 = 0x00;
		ax.u0 = 0x02;
		sp -= 2;
		ss->*sp = ax;
		ax -= ax;
		SCZO = cond(ax);
		sp -= 2;
		ss->*sp = ax;
		sp -= 2;
		ss->*sp = ax;
		sp -= 2;
		ss->*sp = si;
		fn208F_0115();
		sp = (word16) sp + 8;
		SCZO = cond(sp);
		es_bx = ss->*((word16) bp + 6);
		(es->*bx).t001C.u0 = (cui16) ax;
		(es->*bx).w001E = dx;
		(es->*bx).w002E = 0x00;
	}
	si = ss->*sp;
	sp = (word16) sp + 2;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2EB3:0BB4: define fn2EB3_0BB4
// Called from:
//      fn2EB3_24C6
define fn2EB3_0BB4
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	ax.u0 = 0x01;
	sp -= 2;
	ss->*sp = ax;
	es_bx = ss->*((word16) bp + 6);
	v10 = es->*bx;
	sp -= 2;
	ss->*sp = v10;
	fn2E37_06F4();
	sp = (word16) sp + 4;
	SCZO = cond(sp);
	ds->w1484 = 0x00;
	es_bx = ss->*((word16) bp + 6);
	v13 = (word16) (es->*((word16) bx + 18)) + 1;
	es->*((word16) bx + 18) = v13;
	SZO = cond(v13);
	sp -= 2;
	ss->*sp = es;
	sp -= 2;
	ss->*sp = bx;
	fn2EB3_0AFA();
	sp = (word16) sp + 4;
	SCZO = cond(sp);
	es_bx = ss->*((word16) bp + 6);
	v15 = es->*bx;
	sp -= 2;
	ss->*sp = v15;
	fn207F_0048();
	sp = (word16) sp + 2;
	SCZO = cond(sp);
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2EB3:0BF0: define fn2EB3_0BF0
// Called from:
//      fn2EB3_0BF0
//      fn2EB3_1526
//      fn2EB3_1FCC
//      fn2EB3_20FE
//      fn2EB3_24C6
define fn2EB3_0BF0
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x14;
	SCZO = cond(sp);
	sp -= 2;
	ss->*sp = si;
	v8 = ss->*((word16) bp + 20);
	sp -= 2;
	ss->*sp = v8;
	v9 = ss->*((word16) bp + 18);
	sp -= 2;
	ss->*sp = v9;
	es_bx = ss->*((word16) bp + 6);
	v13 = es->*bx;
	sp -= 2;
	ss->*sp = v13;
	fn2E37_04CE();
	sp = (word16) sp + 6;
	ss->*((word16) bp - 0x0C) = ax;
	ss->*((word16) bp - 0x0A) = dx;
	SCZO = cond(ds->w1484 - 0x00);
	if (Test(EQ,Z))
	{
		es_bx = ss->*((word16) bp - 0x0C);
		ax = es->*bx;
		ss->*((word16) bp - 6) = ax;
		ax = ss->*((word16) bp + 16);
		v21 = ax;
		SCZO = cond(ax - 0x04);
		if (Test(ULE,CZ))
		{
			ax += ax;
			SCZO = cond(ax);
			v20 = bx;
			bx = ax;
			ax = v20;
			switch (v21)
			{
			case 0x00:
			case 0x01:
				(ss->*((word16) bp - 8)).u0 = 0x00;
				ax = ss->*((word16) bp - 6);
l2EB3_0CC5:
				ss->*((word16) bp - 2) = ax;
				while (true)
				{
					ax = ss->*((word16) bp - 2);
					SCZO = cond(ss->*((word16) bp - 8) - ax);
					if (Test(UGE,C))
						break;
					ax = ss->*((word16) bp - 8);
					ax += Mem0[ss:bp + -2:word16];
					ax >>= 0x01;
					ss->*((word16) bp - 4) = ax;
					v51 = ss->*((word16) bp + 0x0E);
					sp -= 2;
					ss->*sp = v51;
					v52 = ss->*((word16) bp + 0x0C);
					sp -= 2;
					ss->*sp = v52;
					v53 = ss->*((word16) bp + 0x0A);
					sp -= 2;
					ss->*sp = v53;
					si = ax;
					si <<= 0x01;
					es_bx = ss->*((word16) bp - 0x0C);
					ax = es->*((word16) si + ((word16) bx + 2));
					ax += bx;
					dx = es;
					ax = (word16) ax + 8;
					SCZO = cond(ax);
					sp -= 2;
					ss->*sp = dx;
					sp -= 2;
					ss->*sp = ax;
					fn38AD_00F2();
					sp = (word16) sp + 0x0A;
					ax |= ax;
					SZ = cond(ax);
					O = false;
					C = false;
					if (Test(GE,SO))
					{
						ax = ss->*((word16) bp - 4);
						goto l2EB3_0CC5;
					}
					ax = ss->*((word16) bp - 4);
					ax = (word16) ax + 1;
					SZO = cond(ax);
					ss->*((word16) bp - 8) = ax;
				}
				ax = ss->*((word16) bp - 8);
				ss->*((word16) bp - 4) = ax;
				si = ax;
				si <<= 0x01;
				es_bx = ss->*((word16) bp - 0x0C);
				ax = es->*((word16) si + ((word16) bx + 2));
				ax += bx;
				dx = es;
				ss->*((word16) bp - 16) = ax;
				ss->*((word16) bp - 0x0E) = dx;
				SCZO = cond(ss->*((word16) bp + 16) - 0x00);
				if (Test(EQ,Z))
				{
					v55 = ss->*((word16) bp + 0x0E);
					sp -= 2;
					ss->*sp = v55;
					v56 = ss->*((word16) bp + 0x0C);
					sp -= 2;
					ss->*sp = v56;
					v57 = ss->*((word16) bp + 0x0A);
					sp -= 2;
					ss->*sp = v57;
					ax = (word16) ax + 8;
					SCZO = cond(ax);
					sp -= 2;
					ss->*sp = dx;
					sp -= 2;
					ss->*sp = ax;
					fn38AD_00F2();
					sp = (word16) sp + 0x0A;
					ax |= ax;
					SZ = cond(ax);
					O = false;
					C = false;
					if (Test(EQ,Z))
						(ss->*((word16) bp + 16)).u0 = 0x01;
				}
				break;
			case 0x02:
				v36 = ss->*((word16) bp + 16);
				sp -= 2;
				ss->*sp = v36;
				v37 = ss->*((word16) bp + 0x0E);
				sp -= 2;
				ss->*sp = v37;
				v38 = ss->*((word16) bp + 0x0C);
				sp -= 2;
				ss->*sp = v38;
				v39 = ss->*((word16) bp + 0x0A);
				sp -= 2;
				ss->*sp = v39;
				sp -= 2;
				ss->*sp = es;
				v40 = ss->*((word16) bp - 0x0C);
				sp -= 2;
				ss->*sp = v40;
				fn2017_0489();
				sp = (word16) sp + 0x0C;
				ss->*((word16) bp - 4) = ax;
				si = ax;
				si <<= 0x01;
				SCZO = cond(si);
				es_bx = ss->*((word16) bp - 0x0C);
				ax = es->*((word16) si + ((word16) bx + 2));
				goto l2EB3_0C6C;
			case 0x03:
				ax = ss->*((word16) bp - 6);
				ss->*((word16) bp - 4) = ax;
				si = ax;
				si <<= 0x01;
				es_bx = ss->*((word16) bp - 0x0C);
				ax = es->*((word16) si + ((word16) bx + 2));
				ax += bx;
				dx = es;
				ss->*((word16) bp - 16) = ax;
				ss->*((word16) bp - 0x0E) = dx;
				es_bx = ss->*((word16) bp - 16);
				ax = es->*bx;
				ax |= es->*((word16) bx + 2);
				SZ = cond(ax);
				O = false;
				C = false;
				if (Test(EQ,Z))
				{
					SCZO = cond(ss->*((word16) bp - 4) - 0x00);
					if (Test(NE,Z))
					{
						v41 = ss->*((word16) bp - 4) - 0x01;
						ss->*((word16) bp - 4) = v41;
						si = ss->*((word16) bp - 4);
						si <<= 0x01;
						es_bx = ss->*((word16) bp - 0x0C);
						ax = es->*((word16) si + ((word16) bx + 2));
						ax += bx;
						SCZO = cond(ax);
						ss->*((word16) bp - 16) = ax;
					}
				}
				break;
			case 0x04:
				(ss->*((word16) bp - 4)).u0 = 0x00;
				bx = ss->*((word16) bp - 0x0C);
				ax = es->*((word16) bx + 2);
l2EB3_0C6C:
				ax += bx;
				SCZO = cond(ax);
				dx = es;
				ss->*((word16) bp - 16) = ax;
				ss->*((word16) bp - 0x0E) = dx;
				break;
			}
		}
		es_bx = ss->*((word16) bp + 6);
		v22 = (word32) (es->*((word16) bx + 46)) + 1;
		es->*((word16) bx + 46) = v22;
		si = es->*((word16) bx + 46);
		cl = 0x03;
		si <<= cl;
		ax = ss->*((word16) bp - 4);
		es->*((word16) si + ((word16) bx + 52)) = ax;
		si = es->*((word16) bx + 46);
		si <<= cl;
		ax = ss->*((word16) bp + 18);
		dx = ss->*((word16) bp + 20);
		es->*((word16) si + ((word16) bx + 48)) = ax;
		es->*((word16) si + ((word16) bx + 50)) = dx;
		si = es->*((word16) bx + 46);
		si <<= cl;
		ax = ss->*((word16) bp - 6);
		es->*((word16) si + ((word16) bx + 54)) = ax;
		es_bx = ss->*((word16) bp - 16);
		ax = es->*bx;
		ax |= es->*((word16) bx + 2);
		SZ = cond(ax);
		O = false;
		C = false;
		if (Test(NE,Z))
		{
			v28 = es->*((word16) bx + 2);
			sp -= 2;
			ss->*sp = v28;
			v29 = es->*bx;
			sp -= 2;
			ss->*sp = v29;
			v30 = ss->*((word16) bp + 16);
			sp -= 2;
			ss->*sp = v30;
			v31 = ss->*((word16) bp + 0x0E);
			sp -= 2;
			ss->*sp = v31;
			v32 = ss->*((word16) bp + 0x0C);
			sp -= 2;
			ss->*sp = v32;
			v33 = ss->*((word16) bp + 0x0A);
			sp -= 2;
			ss->*sp = v33;
			v34 = ss->*((word16) bp + 8);
			sp -= 2;
			ss->*sp = v34;
			v35 = ss->*((word16) bp + 6);
			sp -= 2;
			ss->*sp = v35;
			fn2EB3_0BF0();
			sp = (word16) sp + 16;
			SCZO = cond(sp);
			si = ss->*sp;
			sp = bp;
			bp = ss->*sp;
			sp = (word16) sp + 2;
			return;
		}
		ax = ss->*((word16) bp - 6);
		SCZO = cond(ss->*((word16) bp - 4) - ax);
		if (Test(ULT,C))
		{
			ax = ss->*((word16) bp + 16);
			v43 = ax;
			SCZO = cond(ax - 0x04);
			if (Test(ULE,CZ))
			{
				ax += ax;
				SCZO = cond(ax);
				v42 = bx;
				bx = ax;
				ax = v42;
				switch (v43)
				{
				case 0x00:
					v44 = ss->*((word16) bp + 0x0E);
					sp -= 2;
					ss->*sp = v44;
					v45 = ss->*((word16) bp + 0x0C);
					sp -= 2;
					ss->*sp = v45;
					v46 = ss->*((word16) bp + 0x0A);
					sp -= 2;
					ss->*sp = v46;
					ax = ss->*((word16) bp - 16);
					dx = ss->*((word16) bp - 0x0E);
					ax = (word16) ax + 8;
					SCZO = cond(ax);
					sp -= 2;
					ss->*sp = dx;
					sp -= 2;
					ss->*sp = ax;
					fn38AD_00F2();
					sp = (word16) sp + 0x0A;
					ax |= ax;
					SZ = cond(ax);
					O = false;
					C = false;
					if (Test(EQ,Z))
						goto l2EB3_0E1B;
					break;
				case 0x01:
				case 0x03:
				case 0x04:
					goto l2EB3_0E1B;
				case 0x02:
					break;
				}
			}
		}
		else
		{
			SCZO = cond(ss->*((word16) bp + 16) - 0x01);
			if (Test(EQ,Z))
			{
				while (true)
				{
					es_bx = ss->*((word16) bp + 6);
					SCZO = cond(es->*((word16) bx + 46) - 0x00);
					if (Test(EQ,Z))
						break;
					es_bx = ss->*((word16) bp + 6);
					ax = es->*((word16) bx + 46);
					cl = 0x03;
					ax <<= cl;
					ax += bx;
					dx = es;
					ss->*((word16) bp - 20) = ax;
					ss->*((word16) bp - 18) = dx;
					es_bx = ss->*((word16) bp - 20);
					ax = es->*((word16) bx + 54);
					SCZO = cond(es->*((word16) bx + 52) - ax);
					if (Test(NE,Z))
						break;
					es_bx = ss->*((word16) bp + 6);
					v50 = es->*((word16) bx + 46) - 0x01;
					es->*((word16) bx + 46) = v50;
					SZO = cond(v50);
				}
				es_bx = ss->*((word16) bp + 6);
				SCZO = cond(es->*((word16) bx + 46) - 0x00);
				if (Test(NE,Z))
				{
					si = es->*((word16) bx + 46);
					cl = 0x03;
					si <<= cl;
					SCZO = cond(si);
					v47 = es->*((word16) si + ((word16) bx + 50));
					sp -= 2;
					ss->*sp = v47;
					v48 = es->*((word16) si + ((word16) bx + 48));
					sp -= 2;
					ss->*sp = v48;
					v49 = es->*bx;
					sp -= 2;
					ss->*sp = v49;
					fn2E37_04CE();
					sp = (word16) sp + 6;
					ss->*((word16) bp - 0x0C) = ax;
					ss->*((word16) bp - 0x0A) = dx;
					SCZO = cond(ds->w1484 - 0x00);
					if (Test(EQ,Z))
					{
						es_bx = ss->*((word16) bp + 6);
						si = es->*((word16) bx + 46);
						cl = 0x03;
						si <<= cl;
						si = es->*((word16) si + ((word16) bx + 52));
						si <<= 0x01;
						es_bx = ss->*((word16) bp - 0x0C);
						ax = es->*((word16) si + ((word16) bx + 2));
						ax += bx;
						SCZO = cond(ax);
						ss->*((word16) bp - 16) = ax;
						ss->*((word16) bp - 0x0E) = dx;
l2EB3_0E1B:
						es_bx = ss->*((word16) bp - 16);
						ax = es->*((word16) bx + 4);
						dx = es->*((word16) bx + 6);
						si = ss->*sp;
						sp = bp;
						bp = ss->*sp;
						sp = (word16) sp + 2;
						return;
					}
					goto l2EB3_0C18;
				}
			}
		}
l2EB3_0C21:
		ax -= ax;
		SCZO = cond(ax);
		dx_ax = (int32) ax;
		si = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
	}
	else
	{
l2EB3_0C18:
		es_bx = ss->*((word16) bp + 6);
		(es->*((word16) bx + 46)).u0 = 0x00;
		goto l2EB3_0C21;
	}
}

// 2EB3:0ED4: define fn2EB3_0ED4
// Called from:
//      fn2EB3_1206
define fn2EB3_0ED4
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 292;
	sp -= 2;
	ss->*sp = di;
	sp -= 2;
	ss->*sp = si;
	es_bx = ss->*((word16) bp + 0x0A);
	ax = es->*bx;
	ss->*((word16) bp - 0x0114) = ax;
	es_bx = ss->*((word16) bp + 6);
	si = es->*((word16) bx + 46);
	cl = 0x03;
	si <<= cl;
	ax = es->*((word16) si + ((word16) bx + 52));
	ss->*((word16) bp - 4) = ax;
	ax = ss->*((word16) bp - 0x0114);
	SCZO = cond(es->*((word16) bx + 42) - ax);
	if (Test(UGT,CZ))
	{
		si = ax;
		si <<= 0x01;
		SCZO = cond(si);
		es_bx = ss->*((word16) bp + 0x0A);
		ax = es->*((word16) si + ((word16) bx + 4));
		ss->*((word16) bp - 0x011C) = ax;
		ax = ss->*((word16) bp - 0x0114);
		ax = (word16) ax + 1;
		SZO = cond(ax);
		ss->*((word16) bp - 0x0112) = ax;
		while (true)
		{
			ax = ss->*((word16) bp - 4);
			SCZO = cond(ss->*((word16) bp - 0x0112) - ax);
			if (Test(ULE,CZ))
				break;
			ax = ss->*((word16) bp - 0x0112);
			ax <<= 0x01;
			ax += Mem0[ss:bp + 0x0A:word16];
			SCZO = cond(ax);
			dx = ss->*((word16) bp + 0x0C);
			ss->*((word16) bp - 288) = ax;
			ss->*((word16) bp - 0x011E) = dx;
			es_bx = ss->*((word16) bp - 288);
			ax = es->*bx;
			es->*((word16) bx + 2) = ax;
			v26 = ss->*((word16) bp - 0x0112) - 0x01;
			ss->*((word16) bp - 0x0112) = v26;
			SZO = cond(v26);
		}
		ax <<= 0x01;
		ax += Mem0[ss:bp + 0x0A:word16];
		dx = ss->*((word16) bp + 0x0C);
		ss->*((word16) bp - 288) = ax;
		ss->*((word16) bp - 0x011E) = dx;
		es_bx = ss->*((word16) bp - 288);
		ax = ss->*((word16) bp - 0x011C);
		es->*((word16) bx + 2) = ax;
		bx = es->*((word16) bx + 4);
		es_si = ss->*((word16) bp + 0x0A);
		ax = Mem0[es:bx + si:word16];
		dx = es->*((word16) si + ((word16) bx + 2));
		bx = ss->*((word16) bp - 0x011C);
		Mem0[es:bx + si:word16] = ax;
		es->*((word16) si + ((word16) bx + 2)) = dx;
		es_bx = ss->*((word16) bp - 288);
		bx = es->*((word16) bx + 4);
		es = ss->*((word16) bp + 0x0C);
		ax = Mem0[ds:5282:word16];
		dx = Mem0[ds:0x14A4:word16];
		Mem0[es:bx + si:word16] = ax;
		es->*((word16) si + ((word16) bx + 2)) = dx;
		es_bx = ss->*((word16) bp - 288);
		si = es->*((word16) bx + 2);
		es_bx = ss->*((word16) bp + 0x0A);
		ax = Mem0[ds:0x14A6:word16];
		dx = Mem0[ds:5288:word16];
		es->*((word16) si + ((word16) bx + 4)) = ax;
		es->*((word16) si + ((word16) bx + 6)) = dx;
		es_bx = ss->*((word16) bp + 6);
		v20 = es->*((word16) bx + 38);
		sp -= 2;
		ss->*sp = v20;
		ax.u0 = 0x14AA;
		sp -= 2;
		ss->*sp = ds;
		sp -= 2;
		ss->*sp = ax;
		es_bx = ss->*((word16) bp - 288);
		ax = es->*((word16) bx + 2);
		ax += Mem0[ss:bp + 0x0A:word16];
		dx = ss->*((word16) bp + 0x0C);
		ax = (word32) ax.u0 + 8;
		SCZO = cond(ax);
		sp -= 2;
		ss->*sp = dx;
		sp -= 2;
		ss->*sp = ax;
		fn2017_02EC();
		sp = (word16) sp + 0x0A;
		es_bx = ss->*((word16) bp + 0x0A);
		v21 = (word32) (es->*bx) + 1;
		es->*bx = v21;
		ax -= ax;
		SCZO = cond(ax);
		si = ss->*sp;
		sp = (word16) sp + 2;
		di = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
	}
	else
	{
		es_bx = ss->*((word16) bp + 6);
		ax = es->*((word16) bx + 44);
		ss->*((word16) bp - 272) = ax;
		SCZO = cond(ss->*((word16) bp - 4) - ax);
		if (Test(NE,Z))
		{
			ax = ss->*((word16) bp - 272);
			SCZO = cond(ss->*((word16) bp - 4) - ax);
			if (Test(ULT,C))
			{
				ss->*((word16) bp - 6) = ~0x00;
				ss->*((word16) bp - 2) = 0x01;
				(ss->*((word16) bp - 0x0116)).u0 = ~0x00;
			}
			else
			{
				ss->*((word16) bp - 6) = 0x00;
				ss->*((word16) bp - 2) = 0x00;
				(ss->*((word16) bp - 0x0116)).u0 = 0x01;
			}
			si = ss->*((word16) bp - 272);
			si += Mem0[ss:bp + -6:word16];
			ax = ss->*((word16) bp + 0x0A);
			dx = ss->*((word16) bp + 0x0C);
			cx = si;
			cx <<= 0x01;
			ax += cx;
			ax = (word16) ax + 2;
			ss->*((word16) bp - 288) = ax;
			ss->*((word16) bp - 0x011E) = dx;
			es_bx = ss->*((word16) bp - 288);
			di = es->*bx;
			es_bx = ss->*((word16) bp + 0x0A);
			ax = es->*((word16) di + ((word16) bx + 4));
			dx = es->*((word16) di + ((word16) bx + 6));
			ss->*((word16) bp - 266) = ax;
			ss->*((word16) bp - 264) = dx;
			es_bx = ss->*((word16) bp + 6);
			v24 = es->*((word16) bx + 38);
			sp -= 2;
			ss->*sp = v24;
			es_bx = ss->*((word16) bp - 288);
			ax = es->*bx;
			ax += Mem0[ss:bp + 0x0A:word16];
			dx = ss->*((word16) bp + 0x0C);
			ax = (word16) ax + 8;
			SCZO = cond(ax);
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = ax;
			ax = bp - 262;
			sp -= 2;
			ss->*sp = ss;
			sp -= 2;
			ss->*sp = ax;
			fn2017_02EC();
			sp = (word16) sp + 0x0A;
			bx = si;
			bx <<= 0x01;
			es_di = ss->*((word16) bp + 0x0A);
			ax = es->*((word16) di + ((word16) bx + 4));
			ax += di;
			SCZO = cond(ax);
			dx = es;
			ss->*((word16) bp - 292) = ax;
			ss->*((word16) bp - 0x0122) = dx;
			es_bx = ss->*((word16) bp - 292);
			ax = es->*bx;
			dx = es->*((word16) bx + 2);
			ss->*((word16) bp - 270) = ax;
			ss->*((word16) bp - 268) = dx;
			es_bx = ss->*((word16) bp - 288);
			bx = es->*bx;
			es = ss->*((word16) bp + 0x0C);
			ax = Mem0[es:bx + di:word16];
			dx = es->*((word16) di + ((word16) bx + 2));
			es_bx = ss->*((word16) bp - 292);
			es->*bx = ax;
			es->*((word16) bx + 2) = dx;
			es_bx = ss->*((word16) bp - 288);
			ax = es->*bx;
			ss->*((word16) bp - 0x011C) = ax;
			ss->*((word16) bp - 0x0112) = si;
			while (true)
			{
				ax = ss->*((word16) bp - 0x0112);
				ax += Mem0[ss:bp + -2:word16];
				SCZO = cond(ax - ss->*((word16) bp - 4));
				if (Test(EQ,Z))
					break;
				si = ss->*((word16) bp - 0x0112);
				si += Mem0[ss:bp + -0x0116:word16];
				si <<= 0x01;
				es_bx = ss->*((word16) bp + 0x0A);
				ax = es->*((word16) si + ((word16) bx + 2));
				si = ss->*((word16) bp - 0x0112);
				si <<= 0x01;
				es->*((word16) si + ((word16) bx + 2)) = ax;
				ax = ss->*((word16) bp - 0x0116);
				v29 = Mem0[ss:bp + -0x0112:word16] + ax;
				ss->*((word16) bp - 0x0112) = v29;
				SCZO = cond(v29);
			}
			si = ss->*((word16) bp - 4);
			si -= ss->*((word16) bp - 2);
			si -= ss->*((word16) bp - 0x0116);
			si <<= 0x01;
			es_bx = ss->*((word16) bp + 0x0A);
			ax = ss->*((word16) bp - 0x011C);
			es->*((word16) si + ((word16) bx + 2)) = ax;
			ax = ss->*((word16) bp - 4);
			ax += Mem0[ss:bp + -2:word16];
			ax <<= 0x01;
			ax += bx;
			dx = es;
			ss->*((word16) bp - 292) = ax;
			ss->*((word16) bp - 0x0122) = dx;
			es_bx = ss->*((word16) bp - 292);
			bx = es->*((word16) bx + 2);
			es_si = ss->*((word16) bp + 0x0A);
			ax = Mem0[es:bx + si:word16];
			dx = es->*((word16) si + ((word16) bx + 2));
			ss->*((word16) bp - 282) = ax;
			ss->*((word16) bp - 0x0118) = dx;
			es_bx = ss->*((word16) bp - 292);
			bx = es->*((word16) bx + 2);
			es = ss->*((word16) bp + 0x0C);
			ax = Mem0[ds:5282:word16];
			dx = Mem0[ds:0x14A4:word16];
			Mem0[es:bx + si:word16] = ax;
			es->*((word16) si + ((word16) bx + 2)) = dx;
			es_bx = ss->*((word16) bp - 292);
			bx = es->*bx;
			es = ss->*((word16) bp + 0x0C);
			ax = ss->*((word16) bp - 282);
			dx = ss->*((word16) bp - 0x0118);
			Mem0[es:bx + si:word16] = ax;
			es->*((word16) si + ((word16) bx + 2)) = dx;
			es_bx = ss->*((word16) bp - 292);
			si = es->*bx;
			es_bx = ss->*((word16) bp + 0x0A);
			ax = Mem0[ds:0x14A6:word16];
			dx = Mem0[ds:5288:word16];
			es->*((word16) si + ((word16) bx + 4)) = ax;
			es->*((word16) si + ((word16) bx + 6)) = dx;
			es_bx = ss->*((word16) bp + 6);
			v27 = es->*((word16) bx + 38);
			sp -= 2;
			ss->*sp = v27;
			ax.u0 = 0x14AA;
			sp -= 2;
			ss->*sp = ds;
			sp -= 2;
			ss->*sp = ax;
			es_bx = ss->*((word16) bp - 292);
			ax = es->*bx;
			ax += Mem0[ss:bp + 0x0A:word16];
			dx = ss->*((word16) bp + 0x0C);
			ax = (word32) ax.u0 + 8;
			SCZO = cond(ax);
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = ax;
			fn2017_02EC();
			sp = (word16) sp + 0x0A;
			SCZO = cond(sp);
			ax = ss->*((word16) bp - 266);
			dx = ss->*((word16) bp - 264);
			Mem0[ds:0x14A6:word16] = ax;
			Mem0[ds:5288:word16] = dx;
			es_bx = ss->*((word16) bp + 6);
			v28 = es->*((word16) bx + 38);
			sp -= 2;
			ss->*sp = v28;
			ax = bp - 262;
			sp -= 2;
			ss->*sp = ss;
			sp -= 2;
			ss->*sp = ax;
			ax.u0 = 0x14AA;
			sp -= 2;
			ss->*sp = ds;
			sp -= 2;
			ss->*sp = ax;
			fn2017_02EC();
			sp = (word16) sp + 0x0A;
			SCZO = cond(sp);
			ax = ss->*((word16) bp - 270);
			dx = ss->*((word16) bp - 268);
			Mem0[ds:5282:word16] = ax;
			Mem0[ds:0x14A4:word16] = dx;
		}
		ax.u0 = 0x01;
		si = ss->*sp;
		sp = (word16) sp + 2;
		di = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
	}
}

// 2EB3:1206: define fn2EB3_1206
// Called from:
//      fn2EB3_1206
//      fn2EB3_17FE
//      fn2EB3_24C6
define fn2EB3_1206
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x1C;
	sp -= 2;
	ss->*sp = si;
	es_bx = ss->*((word16) bp + 6);
	(es->*((word16) bx + 4)).u0 = 0x01;
	ax = es->*((word16) bx + 44);
	ss->*((word16) bp - 6) = ax;
	ax = es->*((word16) bx + 0x0022);
	ss->*((word16) bp - 0x0A) = ax;
	SCZO = cond(es->*((word16) bx + 46) - 0x00);
	if (Test(NE,Z))
	{
		es_bx = ss->*((word16) bp + 6);
		si = es->*((word16) bx + 46);
		cl = 0x03;
		si <<= cl;
		SCZO = cond(si);
		v20 = es->*((word16) si + ((word16) bx + 50));
		sp -= 2;
		ss->*sp = v20;
		v21 = es->*((word16) si + ((word16) bx + 48));
		sp -= 2;
		ss->*sp = v21;
		v22 = es->*bx;
		sp -= 2;
		ss->*sp = v22;
		fn2E37_05C0();
		sp = (word16) sp + 6;
		ss->*((word16) bp - 20) = ax;
		ss->*((word16) bp - 18) = dx;
		SCZO = cond(Mem0[ds:5252:word16] - 0x00);
		if (Test(NE,Z))
		{
			es_bx = ss->*((word16) bp + 6);
			(es->*((word16) bx + 46)).u0 = 0x00;
			Mem0[ds:5252:word16] = 0x00;
			ax.u0 = 0x11;
			sp -= 2;
			ss->*sp = ax;
			fn20B2_0176();
			sp = (word16) sp + 2;
			SCZO = cond(sp);
		}
		else
		{
			v23 = ss->*((word16) bp - 18);
			sp -= 2;
			ss->*sp = v23;
			v24 = ss->*((word16) bp - 20);
			sp -= 2;
			ss->*sp = v24;
			v25 = ss->*((word16) bp + 8);
			sp -= 2;
			ss->*sp = v25;
			v26 = ss->*((word16) bp + 6);
			sp -= 2;
			ss->*sp = v26;
			fn2EB3_0ED4();
			sp = (word16) sp + 8;
			ax |= ax;
			SZ = cond(ax);
			O = false;
			C.u0 = false;
			if (Test(EQ,Z))
			{
				ax.u0 = 0x01;
				si = ss->*sp;
				sp = bp;
				bp = ss->*sp;
				sp = (word16) sp + 2;
				return;
			}
			es_bx = ss->*((word16) bp - 20);
			ax = ss->*((word16) bp - 6);
			es->*bx = ax;
			v36 = Mem0[ds:0x149C:word16];
			sp -= 2;
			ss->*sp = v36;
			sp -= 2;
			ss->*sp = es;
			sp -= 2;
			ss->*sp = bx;
			ax.u0 = 0x15AA;
			sp -= 2;
			ss->*sp = ds;
			sp -= 2;
			ss->*sp = ax;
			fn2017_0258();
			sp = (word16) sp + 0x0A;
			es_bx = ss->*((word16) bp + 6);
			ax = es->*((word16) bx + 24);
			ax |= es->*((word16) bx + 26);
			SZ = cond(ax);
			O = false;
			C.u0 = false;
			if (Test(NE,Z))
			{
				ax = es->*((word16) bx + 24);
				dx = es->*((word16) bx + 26);
				ss->*((word16) bp - 4) = ax;
				ss->*((word16) bp - 2) = dx;
				sp -= 2;
				ss->*sp = dx;
				sp -= 2;
				ss->*sp = ax;
				v37 = es->*bx;
				sp -= 2;
				ss->*sp = v37;
				fn2E37_05C0();
				sp = (word16) sp + 6;
				ss->*((word16) bp - 0x0E) = ax;
				ss->*((word16) bp - 0x0C) = dx;
				SCZO = cond(Mem0[ds:5252:word16] - 0x00);
				if (Test(EQ,Z))
				{
					es_bx = ss->*((word16) bp - 0x0E);
					bx = es->*((word16) bx + 2);
					si = ax;
					ax = Mem0[es:bx + si:word16];
					dx = es->*((word16) si + ((word16) bx + 2));
					es_bx = ss->*((word16) bp + 6);
					es->*((word16) bx + 24) = ax;
					es->*((word16) bx + 26) = dx;
				}
			}
			else
			{
				ax = es->*((word16) bx + 28);
				dx = es->*((word16) bx + 30);
				ss->*((word16) bp - 4) = ax;
				ss->*((word16) bp - 2) = dx;
				ax = Mem0[ds:0x149C:word16];
				dx -= dx;
				v38 = Mem0[es:bx + 28:word16] + ax;
				es->*((word16) bx + 28) = v38;
				SCZO = cond(v38);
				v39 = Mem0[es:bx + 30:word16] + dx + C;
				es->*((word16) bx + 30) = v39;
				SCZO = cond(v39);
				v40 = ss->*((word16) bp - 2);
				sp -= 2;
				ss->*sp = v40;
				v41 = ss->*((word16) bp - 4);
				sp -= 2;
				ss->*sp = v41;
				v42 = es->*bx;
				sp -= 2;
				ss->*sp = v42;
				fn2E37_0740();
				sp = (word16) sp + 6;
				SCZO = cond(sp);
				ss->*((word16) bp - 0x0E) = ax;
				ss->*((word16) bp - 0x0C) = dx;
			}
			v43 = Mem0[ds:0x149C:word16];
			sp -= 2;
			ss->*sp = v43;
			ax.u0 = 0x15AA;
			sp -= 2;
			ss->*sp = ds;
			sp -= 2;
			ss->*sp = ax;
			v44 = ss->*((word16) bp - 0x0C);
			sp -= 2;
			ss->*sp = v44;
			v45 = ss->*((word16) bp - 0x0E);
			sp -= 2;
			ss->*sp = v45;
			fn2017_0258();
			sp = (word16) sp + 0x0A;
			SCZO = cond(sp);
			(ss->*((word16) bp - 8)).u0 = 0x00;
			while (true)
			{
				ax = ss->*((word16) bp - 6);
				SCZO = cond(ss->*((word16) bp - 8) - ax);
				if (Test(UGT,CZ))
					break;
				ax = ss->*((word16) bp - 8);
				ax <<= 0x01;
				ax += Mem0[ss:bp + -0x0E:word16];
				dx = ss->*((word16) bp - 0x0C);
				ax = (word32) ax.u0 + 2;
				ss->*((word16) bp - 24) = ax;
				ss->*((word16) bp - 22) = dx;
				es_bx = ss->*((word16) bp - 24);
				ax = es->*bx;
				ss->*((word16) bp - 16) = ax;
				ax = ss->*((word16) bp - 8);
				ax += Mem0[ss:bp + -6:word16];
				ax <<= 0x01;
				ax += Mem0[ss:bp + -0x0E:word16];
				ax = (word16) ax + 2;
				SCZO = cond(ax);
				ss->*((word16) bp - 28) = ax;
				ss->*((word16) bp - 26) = dx;
				es_bx = ss->*((word16) bp - 28);
				ax = es->*bx;
				es_bx = ss->*((word16) bp - 24);
				es->*bx = ax;
				es_bx = ss->*((word16) bp - 28);
				ax = ss->*((word16) bp - 16);
				es->*bx = ax;
				v48 = (word32) (ss->*((word16) bp - 8)) + 1;
				ss->*((word16) bp - 8) = v48;
				SZO = cond(v48);
			}
			es_bx = ss->*((word16) bp - 0x0E);
			bx = es->*((word16) bx + 2);
			si = ss->*((word16) bp - 0x0E);
			ax = Mem0[ds:5282:word16];
			dx = Mem0[ds:0x14A4:word16];
			Mem0[es:bx + si:word16] = ax;
			es->*((word16) si + ((word16) bx + 2)) = dx;
			ax = ss->*((word16) bp - 4);
			dx = ss->*((word16) bp - 2);
			Mem0[ds:5282:word16] = ax;
			Mem0[ds:0x14A4:word16] = dx;
			es_bx = ss->*((word16) bp + 6);
			v47 = es->*((word16) bx + 46) - 0x01;
			es->*((word16) bx + 46) = v47;
			SZO = cond(v47);
			sp -= 2;
			ss->*sp = es;
			sp -= 2;
			ss->*sp = bx;
			fn2EB3_1206();
			sp = (word16) sp + 4;
			SCZO = cond(sp);
		}
	}
	else
	{
		ax = es->*((word16) bx + 24);
		ax |= es->*((word16) bx + 26);
		SZ = cond(ax);
		O = false;
		C.u0 = false;
		if (Test(NE,Z))
		{
			ax = es->*((word16) bx + 24);
			dx = es->*((word16) bx + 26);
			ss->*((word16) bp - 4) = ax;
			ss->*((word16) bp - 2) = dx;
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = ax;
			v17 = es->*bx;
			sp -= 2;
			ss->*sp = v17;
			fn2E37_05C0();
			sp = (word16) sp + 6;
			ss->*((word16) bp - 0x0E) = ax;
			ss->*((word16) bp - 0x0C) = dx;
			SCZO = cond(Mem0[ds:5252:word16] - 0x00);
			if (Test(EQ,Z))
			{
				es_bx = ss->*((word16) bp - 0x0E);
				bx = es->*((word16) bx + 2);
				si = ax;
				ax = Mem0[es:bx + si:word16];
				dx = es->*((word16) si + ((word16) bx + 2));
				es_bx = ss->*((word16) bp + 6);
				es->*((word16) bx + 24) = ax;
				es->*((word16) bx + 26) = dx;
			}
		}
		else
		{
			ax = es->*((word16) bx + 28);
			dx = es->*((word16) bx + 30);
			ss->*((word16) bp - 4) = ax;
			ss->*((word16) bp - 2) = dx;
			ax = Mem0[ds:0x149C:word16];
			dx -= dx;
			v28 = Mem0[es:bx + 28:word16] + ax;
			es->*((word16) bx + 28) = v28;
			SCZO = cond(v28);
			v29 = Mem0[es:bx + 30:word16] + dx + C;
			es->*((word16) bx + 30) = v29;
			SCZO = cond(v29);
			v30 = ss->*((word16) bp - 2);
			sp -= 2;
			ss->*sp = v30;
			v31 = ss->*((word16) bp - 4);
			sp -= 2;
			ss->*sp = v31;
			v32 = es->*bx;
			sp -= 2;
			ss->*sp = v32;
			fn2E37_0740();
			sp = (word16) sp + 6;
			SCZO = cond(sp);
			ss->*((word16) bp - 0x0E) = ax;
			ss->*((word16) bp - 0x0C) = dx;
		}
		es_bx = ss->*((word16) bp + 6);
		ax = es->*((word16) bx + 42);
		ax <<= 0x01;
		ax = (word16) ax + 4;
		SCZO = cond(ax);
		ss->*((word16) bp - 16) = ax;
		(ss->*((word16) bp - 8)).u0 = 0x00;
		while (true)
		{
			es_bx = ss->*((word16) bp + 6);
			ax = ss->*((word16) bp - 8);
			SCZO = cond(es->*((word16) bx + 42) - ax);
			if (Test(ULT,C))
				break;
			si = ss->*((word16) bp - 8);
			si <<= 0x01;
			es_bx = ss->*((word16) bp - 0x0E);
			ax = ss->*((word16) bp - 16);
			es->*((word16) si + ((word16) bx + 2)) = ax;
			ax = ss->*((word16) bp - 0x0A);
			v33 = Mem0[ss:bp + -16:word16] + ax;
			ss->*((word16) bp - 16) = v33;
			SCZO = cond(v33);
			v34 = (word32) (ss->*((word16) bp - 8)) + 1;
			ss->*((word16) bp - 8) = v34;
			SZO = cond(v34);
		}
		ax = es->*((word16) bx + 20);
		dx = es->*((word16) bx + 22);
		es_bx = ss->*((word16) bp - 0x0E);
		bx = es->*((word16) bx + 2);
		si = ss->*((word16) bp - 0x0E);
		Mem0[es:bx + si:word16] = ax;
		es->*((word16) si + ((word16) bx + 2)) = dx;
		bx = si;
		si = es->*((word16) bx + 2);
		ax = Mem0[ds:0x14A6:word16];
		dx = Mem0[ds:5288:word16];
		es->*((word16) si + ((word16) bx + 4)) = ax;
		es->*((word16) si + ((word16) bx + 6)) = dx;
		es_bx = ss->*((word16) bp + 6);
		v27 = es->*((word16) bx + 38);
		sp -= 2;
		ss->*sp = v27;
		ax.u0 = 0x14AA;
		sp -= 2;
		ss->*sp = ds;
		sp -= 2;
		ss->*sp = ax;
		es_bx = ss->*((word16) bp - 0x0E);
		ax = es->*((word16) bx + 2);
		ax += bx;
		dx = es;
		ax = (word32) ax.u0 + 8;
		SCZO = cond(ax);
		sp -= 2;
		ss->*sp = dx;
		sp -= 2;
		ss->*sp = ax;
		fn2017_02EC();
		sp = (word16) sp + 0x0A;
		SCZO = cond(sp);
		es_bx = ss->*((word16) bp - 0x0E);
		bx = es->*((word16) bx + 4);
		si = ss->*((word16) bp - 0x0E);
		ax = Mem0[ds:5282:word16];
		dx = Mem0[ds:0x14A4:word16];
		Mem0[es:bx + si:word16] = ax;
		es->*((word16) si + ((word16) bx + 2)) = dx;
		bx = si;
		(es->*bx).u0 = 0x01;
		es_bx = ss->*((word16) bp + 6);
		ax = ss->*((word16) bp - 4);
		dx = ss->*((word16) bp - 2);
		es->*((word16) bx + 20) = ax;
		es->*((word16) bx + 22) = dx;
	}
	ax -= ax;
	SCZO = cond(ax);
	si = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2EB3:1526: define fn2EB3_1526
// Called from:
//      fn2EB3_1526
//      fn2EB3_2008
//      fn2EB3_2062
define fn2EB3_1526
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x0C;
	sp -= 2;
	ss->*sp = si;
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond((es->*bx).t002E.u0 - 0x00);
	if (Test(EQ,Z))
	{
		ax -= ax;
		SCZO = cond(ax);
		dx_ax = (int32) ax;
		si = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
		return;
	}
	es_bx = ss->*((word16) bp + 6);
	ax.u0 = (es->*bx).t002E.u0;
	cl = 0x03;
	ax <<= cl;
	ax += bx;
	SCZO = cond(ax);
	dx = es;
	ss->*((word16) bp - 0x0C) = ax;
	ss->*((word16) bp - 0x0A) = dx;
	es_bx = ss->*((word16) bp - 0x0C);
	v16.u0 = (es->*bx).t0032.u0;
	sp -= 2;
	ss->*sp = v16;
	v17.u0 = (es->*bx).t0030.u0;
	sp -= 2;
	ss->*sp = v17;
	es_bx = ss->*((word16) bp + 6);
	v18.u0 = (es->*bx).t0000.u0;
	sp -= 2;
	ss->*sp = v18;
	fn2E37_04CE();
	sp = (word16) sp + 6;
	ss->*((word16) bp - 4) = ax;
	ss->*((word16) bp - 2) = dx;
	es_bx = ss->*((word16) bp - 0x0C);
	si.u0 = (es->*bx).a0034[0].u0;
	si <<= 0x01;
	es_bx = ss->*((word16) bp - 4);
	ax = Mem0[es:bx + 2 + si:word16];
	ax += bx;
	ss->*((word16) bp - 8) = ax;
	ss->*((word16) bp - 6) = dx;
	SCZO = cond(ss->*((word16) bp + 0x0A) - 0x00);
	if (Test(NE,Z))
	{
		SCZO = cond(ss->*((word16) bp + 0x0C) - ~0x00);
		if (Test(EQ,Z))
		{
			es_bx = ss->*((word16) bp - 0x0C);
			v19 = (es->*bx).a0034[0].u0 - 0x01;
			(es->*bx).a0034[0].u0 = (int16) v19;
			es_bx = ss->*((word16) bp + 6);
			si.u0 = (es->*bx).t002E.u0;
			cl = 0x03;
			si <<= cl;
			si = Mem0[es:bx + 52 + si:word16];
			si <<= 0x01;
			es_bx = ss->*((word16) bp - 4);
			ax = Mem0[es:bx + 2 + si:word16];
			ax += bx;
			SCZO = cond(ax);
			ss->*((word16) bp - 8) = ax;
		}
		goto l2EB3_15BC;
	}
	SCZO = cond(ss->*((word16) bp + 0x0C) - 0x01);
	if (Test(NE,Z))
	{
		es_bx = ss->*((word16) bp - 8);
		ax.u0 = (es->*bx).t0000.u0;
		ax |= (es->*bx).a0002[0].u0;
		SZ = cond(ax);
		O = false;
		C = false;
		if (Test(NE,Z))
		{
			v29.u0 = (es->*bx).a0002[0].u0;
			sp -= 2;
			ss->*sp = v29;
			v30.u0 = (es->*bx).t0000.u0;
			sp -= 2;
			ss->*sp = v30;
			ax.u0 = 0x03;
l2EB3_1617:
			sp -= 2;
			ss->*sp = ax;
			ax -= ax;
			SCZO = cond(ax);
			sp -= 2;
			ss->*sp = ax;
			sp -= 2;
			ss->*sp = ax;
			sp -= 2;
			ss->*sp = ax;
			v27 = ss->*((word16) bp + 8);
			sp -= 2;
			ss->*sp = v27;
			v28 = ss->*((word16) bp + 6);
			sp -= 2;
			ss->*sp = v28;
			fn2EB3_0BF0();
			sp = (word16) sp + 16;
			SCZO = cond(sp);
			si = ss->*sp;
			sp = bp;
			bp = ss->*sp;
			sp = (word16) sp + 2;
			return;
		}
		es_bx = ss->*((word16) bp + 6);
		si.u0 = (es->*bx).t002E.u0;
		cl = 0x03;
		si <<= cl;
		SCZO = cond(Mem0[es:bx + 52 + si:word16] - 0x00);
		if (Test(EQ,Z))
		{
			while (true)
			{
				SCZO = cond((es->*bx).t002E.u0 - 0x00);
				if (Test(EQ,Z))
					break;
				si.u0 = (es->*bx).t002E.u0;
				cl = 0x03;
				si <<= cl;
				SCZO = cond(Mem0[es:bx + 52 + si:word16] - 0x00);
				if (Test(NE,Z))
					break;
				v34 = (es->*bx).t002E.u0 - 0x01;
				(es->*bx).t002E.u0 = (int16) v34;
				SZO = cond(v34);
			}
			ax.u0 = ~0x00;
			goto l2EB3_168E;
		}
		si.u0 = (es->*bx).t002E.u0;
		cl = 0x03;
		si <<= cl;
		v35 = Mem0[es:bx + 52 + si:word16] - 0x01;
		Mem0[es:bx + 52 + si:word16] = v35;
		si.u0 = (es->*bx).t002E.u0;
		si <<= cl;
		si = Mem0[es:bx + 52 + si:word16];
		si <<= 0x01;
		es_bx = ss->*((word16) bp - 4);
		ax = Mem0[es:bx + 2 + si:word16];
		ax += bx;
		SCZO = cond(ax);
		dx = es;
		ss->*((word16) bp - 8) = ax;
		ss->*((word16) bp - 6) = dx;
	}
	else
	{
		es_bx = ss->*((word16) bp + 6);
		si.u0 = (es->*bx).t002E.u0;
		cl = 0x03;
		si <<= cl;
		v21 = Mem0[es:bx + 52 + si:word16] + 0x01;
		Mem0[es:bx + 52 + si:word16] = v21;
		si.u0 = (es->*bx).t002E.u0;
		si <<= cl;
		si = Mem0[es:bx + 52 + si:word16];
		si <<= 0x01;
		es_bx = ss->*((word16) bp - 4);
		ax = Mem0[es:bx + 2 + si:word16];
		ax += bx;
		dx = es;
		ss->*((word16) bp - 8) = ax;
		ss->*((word16) bp - 6) = dx;
		es_bx = ss->*((word16) bp - 8);
		ax.u0 = (es->*bx).t0000.u0;
		ax |= (es->*bx).a0002[0].u0;
		SZ = cond(ax);
		O = false;
		C = false;
		if (Test(NE,Z))
		{
			v25.u0 = (es->*bx).a0002[0].u0;
			sp -= 2;
			ss->*sp = v25;
			v26.u0 = (es->*bx).t0000.u0;
			sp -= 2;
			ss->*sp = v26;
			ax.u0 = 0x04;
			goto l2EB3_1617;
		}
		es_bx = ss->*((word16) bp + 6);
		ax.u0 = (es->*bx).t002E.u0;
		cl = 0x03;
		ax <<= cl;
		ax += bx;
		dx = es;
		ss->*((word16) bp - 0x0C) = ax;
		ss->*((word16) bp - 0x0A) = dx;
		es_bx = ss->*((word16) bp - 0x0C);
		ax.u0 = (es->*bx).t0036.u0;
		SCZO = cond((es->*bx).a0034[0].u0 - ax);
		if (Test(EQ,Z))
		{
			while (true)
			{
				es_bx = ss->*((word16) bp + 6);
				SCZO = cond((es->*bx).t002E.u0 - 0x00);
				if (Test(EQ,Z))
					break;
				es_bx = ss->*((word16) bp + 6);
				ax.u0 = (es->*bx).t002E.u0;
				cl = 0x03;
				ax <<= cl;
				ax += bx;
				dx = es;
				ss->*((word16) bp - 0x0C) = ax;
				ss->*((word16) bp - 0x0A) = dx;
				es_bx = ss->*((word16) bp - 0x0C);
				ax.u0 = (es->*bx).t0036.u0;
				SCZO = cond((es->*bx).a0034[0].u0 - ax);
				if (Test(NE,Z))
					break;
				es_bx = ss->*((word16) bp + 6);
				v33 = (es->*bx).t002E.u0 - 0x01;
				(es->*bx).t002E.u0 = (int16) v33;
				SZO = cond(v33);
			}
			ax.u0 = 0x01;
l2EB3_168E:
			sp -= 2;
			ss->*sp = ax;
			ax.u0 = 0x01;
			sp -= 2;
			ss->*sp = ax;
			v31 = ss->*((word16) bp + 8);
			sp -= 2;
			ss->*sp = v31;
			v32 = ss->*((word16) bp + 6);
			sp -= 2;
			ss->*sp = v32;
			fn2EB3_1526();
			sp = (word16) sp + 8;
			SCZO = cond(sp);
			si = ss->*sp;
			sp = bp;
			bp = ss->*sp;
			sp = (word16) sp + 2;
			return;
		}
	}
l2EB3_15BC:
	es_bx = ss->*((word16) bp - 8);
	ax.u0 = (es->*bx).t0004.u0;
	dx = (es->*bx).ptr0006;
	si = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2EB3:1720: define fn2EB3_1720
// Called from:
//      fn2EB3_17FE
define fn2EB3_1720
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x0E;
	sp -= 2;
	ss->*sp = di;
	sp -= 2;
	ss->*sp = si;
	ax = ss->*((word16) bp + 0x0E);
	ax <<= 0x01;
	ax += Mem0[ss:bp + 0x0A:word16];
	dx = ss->*((word16) bp + 0x0C);
	ax = (word16) ax + 2;
	ss->*((word16) bp - 0x0E) = ax;
	ss->*((word16) bp - 0x0C) = dx;
	es_bx = ss->*((word16) bp - 0x0E);
	di = es->*bx;
	es_bx = ss->*((word16) bp + 0x0A);
	ax = es->*((word16) di + ((word16) bx + 4));
	dx = es->*((word16) di + ((word16) bx + 6));
	Mem0[ds:0x14A6:word16] = ax;
	Mem0[ds:5288:word16] = dx;
	es_bx = ss->*((word16) bp + 6);
	v15 = es->*((word16) bx + 38);
	sp -= 2;
	ss->*sp = v15;
	es_bx = ss->*((word16) bp - 0x0E);
	ax = es->*bx;
	ax += Mem0[ss:bp + 0x0A:word16];
	dx = ss->*((word16) bp + 0x0C);
	ax = (word16) ax + 8;
	SCZO = cond(ax);
	sp -= 2;
	ss->*sp = dx;
	sp -= 2;
	ss->*sp = ax;
	ax.u0 = 0x14AA;
	sp -= 2;
	ss->*sp = ds;
	sp -= 2;
	ss->*sp = ax;
	fn2017_02EC();
	sp = (word16) sp + 0x0A;
	SCZO = cond(sp);
	es_bx = ss->*((word16) bp + 0x0A);
	ax = es->*bx;
	ss->*((word16) bp - 8) = ax;
	es_bx = ss->*((word16) bp - 0x0E);
	si = es->*bx;
	es_bx = ss->*((word16) bp + 0x0A);
	ax = Mem0[es:bx + si:word16];
	dx = es->*((word16) si + ((word16) bx + 2));
	ss->*((word16) bp - 4) = ax;
	ss->*((word16) bp - 2) = dx;
	ss->*((word16) bp - 0x0A) = si;
	ax = ss->*((word16) bp + 0x0E);
	ss->*((word16) bp - 6) = ax;
	while (true)
	{
		ax = ss->*((word16) bp - 8);
		SCZO = cond(ss->*((word16) bp - 6) - ax);
		if (Test(UGE,C))
			break;
		ax = ss->*((word16) bp - 6);
		ax <<= 0x01;
		ax += Mem0[ss:bp + 0x0A:word16];
		SCZO = cond(ax);
		dx = ss->*((word16) bp + 0x0C);
		ss->*((word16) bp - 0x0E) = ax;
		ss->*((word16) bp - 0x0C) = dx;
		es_bx = ss->*((word16) bp - 0x0E);
		ax = es->*((word16) bx + 4);
		es->*((word16) bx + 2) = ax;
		v19 = (word32) (ss->*((word16) bp - 6)) + 1;
		ss->*((word16) bp - 6) = v19;
		SZO = cond(v19);
	}
	si = ax;
	si <<= 0x01;
	es_bx = ss->*((word16) bp + 0x0A);
	ax = ss->*((word16) bp - 0x0A);
	es->*((word16) si + ((word16) bx + 2)) = ax;
	si = ss->*((word16) bp + 0x0E);
	si <<= 0x01;
	SCZO = cond(si);
	bx = es->*((word16) si + ((word16) bx + 2));
	si = ss->*((word16) bp + 0x0A);
	ax = ss->*((word16) bp - 4);
	dx = ss->*((word16) bp - 2);
	Mem0[es:bx + si:word16] = ax;
	es->*((word16) si + ((word16) bx + 2)) = dx;
	bx = si;
	v17 = es->*bx - 0x01;
	es->*bx = v17;
	SZO = cond(v17);
	si = ss->*sp;
	sp = (word16) sp + 2;
	di = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2EB3:17FE: define fn2EB3_17FE
// Called from:
//      fn2EB3_17FE
//      fn2EB3_20FE
define fn2EB3_17FE
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x26;
	sp -= 2;
	ss->*sp = di;
	sp -= 2;
	ss->*sp = si;
	es_bx = ss->*((word16) bp + 6);
	ax = es->*((word16) bx + 46);
	cl = 0x03;
	ax <<= cl;
	ax += bx;
	dx = es;
	ss->*((word16) bp - 0x0022) = ax;
	ss->*((word16) bp - 32) = dx;
	es_bx = ss->*((word16) bp - 0x0022);
	ax = es->*((word16) bx + 48);
	dx = es->*((word16) bx + 50);
	ss->*((word16) bp - 0x0C) = ax;
	ss->*((word16) bp - 0x0A) = dx;
	ax = es->*((word16) bx + 54);
	ss->*((word16) bp - 20) = ax;
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond(es->*((word16) bx + 44) - ax);
	if (Test(ULE,CZ))
	{
l2EB3_1FC6:
		si = ss->*sp;
		sp = (word16) sp + 2;
		di = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
		return;
	}
	SCZO = cond(es->*((word16) bx + 46) - 0x01);
	if (Test(EQ,Z))
	{
		ax |= ax;
		SZ = cond(ax);
		O = false;
		C = false;
		if (Test(EQ,Z))
		{
			sp -= 2;
			ss->*sp = dx;
			v20 = ss->*((word16) bp - 0x0C);
			sp -= 2;
			ss->*sp = v20;
			v21 = es->*bx;
			sp -= 2;
			ss->*sp = v21;
			fn2E37_05C0();
			sp = (word16) sp + 6;
			SCZO = cond(sp);
			ss->*((word16) bp - 6) = ax;
			ss->*((word16) bp - 4) = dx;
			es_bx = ss->*((word16) bp - 6);
			bx = es->*((word16) bx + 2);
			si = ax;
			ax = Mem0[es:bx + si:word16];
			dx = es->*((word16) si + ((word16) bx + 2));
			es_bx = ss->*((word16) bp + 6);
			es->*((word16) bx + 20) = ax;
			es->*((word16) bx + 22) = dx;
			ax = es->*((word16) bx + 24);
			dx = es->*((word16) bx + 26);
			es_bx = ss->*((word16) bp - 6);
			bx = es->*((word16) bx + 2);
			Mem0[es:bx + si:word16] = ax;
			es->*((word16) si + ((word16) bx + 2)) = dx;
			es_bx = ss->*((word16) bp + 6);
			ax = ss->*((word16) bp - 0x0C);
			dx = ss->*((word16) bp - 0x0A);
			es->*((word16) bx + 24) = ax;
			es->*((word16) bx + 26) = dx;
			si = ss->*sp;
			sp = (word16) sp + 2;
			di = ss->*sp;
			sp = bp;
			bp = ss->*sp;
			sp = (word16) sp + 2;
			return;
		}
		goto l2EB3_1FC6;
	}
	v22 = es->*((word16) bx + 46) - 0x01;
	es->*((word16) bx + 46) = v22;
	ax = es->*((word16) bx + 46);
	cl = 0x03;
	ax <<= cl;
	ax += bx;
	SCZO = cond(ax);
	dx = es;
	ss->*((word16) bp - 0x0022) = ax;
	ss->*((word16) bp - 32) = dx;
	es_bx = ss->*((word16) bp - 0x0022);
	ax = es->*((word16) bx + 52);
	ss->*((word16) bp - 2) = ax;
	v24 = es->*((word16) bx + 50);
	sp -= 2;
	ss->*sp = v24;
	v25 = es->*((word16) bx + 48);
	sp -= 2;
	ss->*sp = v25;
	es_bx = ss->*((word16) bp + 6);
	v26 = es->*bx;
	sp -= 2;
	ss->*sp = v26;
	fn2E37_04CE();
	sp = (word16) sp + 6;
	ss->*((word16) bp - 6) = ax;
	ss->*((word16) bp - 4) = dx;
	es_bx = ss->*((word16) bp - 0x0022);
	ax = ss->*((word16) bp - 2);
	SCZO = cond(es->*((word16) bx + 54) - ax);
	if (Test(EQ,Z))
	{
		si = ax;
		si <<= 0x01;
		es_bx = ss->*((word16) bp - 6);
		bx = es->*((word16) si + ((word16) bx + 2));
		si = ss->*((word16) bp - 6);
		ax = Mem0[es:bx + si:word16];
		dx = es->*((word16) si + ((word16) bx + 2));
		ss->*((word16) bp - 24) = ax;
		ss->*((word16) bp - 22) = dx;
		ss->*((word16) bp - 30) = ax;
		ss->*((word16) bp - 28) = dx;
		es_bx = ss->*((word16) bp - 0x0022);
		v27 = es->*((word16) bx + 52) - 0x01;
		es->*((word16) bx + 52) = v27;
		ax = es->*((word16) bx + 52);
		ss->*((word16) bp - 2) = ax;
		si = ax;
		si <<= 0x01;
		SCZO = cond(si);
		es_bx = ss->*((word16) bp - 6);
		bx = es->*((word16) si + ((word16) bx + 2));
		si = ss->*((word16) bp - 6);
		ax = Mem0[es:bx + si:word16];
		dx = es->*((word16) si + ((word16) bx + 2));
		ss->*((word16) bp - 0x0C) = ax;
		ss->*((word16) bp - 0x0A) = dx;
	}
	else
	{
		ax = ss->*((word16) bp - 2);
		ax <<= 0x01;
		ax += Mem0[ss:bp + -6:word16];
		SCZO = cond(ax);
		dx = ss->*((word16) bp - 4);
		ss->*((word16) bp - 0x0022) = ax;
		ss->*((word16) bp - 32) = dx;
		es_bx = ss->*((word16) bp - 0x0022);
		bx = es->*((word16) bx + 2);
		es_si = ss->*((word16) bp - 6);
		ax = Mem0[es:bx + si:word16];
		dx = es->*((word16) si + ((word16) bx + 2));
		ss->*((word16) bp - 0x0C) = ax;
		ss->*((word16) bp - 0x0A) = dx;
		ss->*((word16) bp - 30) = ax;
		ss->*((word16) bp - 28) = dx;
		es_bx = ss->*((word16) bp - 0x0022);
		bx = es->*((word16) bx + 4);
		es = ss->*((word16) bp - 4);
		ax = Mem0[es:bx + si:word16];
		dx = es->*((word16) si + ((word16) bx + 2));
		ss->*((word16) bp - 24) = ax;
		ss->*((word16) bp - 22) = dx;
	}
	v29 = ss->*((word16) bp - 2);
	sp -= 2;
	ss->*sp = v29;
	sp -= 2;
	ss->*sp = es;
	v30 = ss->*((word16) bp - 6);
	sp -= 2;
	ss->*sp = v30;
	v31 = ss->*((word16) bp + 8);
	sp -= 2;
	ss->*sp = v31;
	v32 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v32;
	fn2EB3_1720();
	sp = (word16) sp + 0x0A;
	es_bx = ss->*((word16) bp + 6);
	di = es->*((word16) bx + 46);
	cl = 0x03;
	di <<= cl;
	v33 = es->*((word16) di + ((word16) bx + 54)) - 0x01;
	es->*((word16) di + ((word16) bx + 54)) = v33;
	si = es->*bx;
	di = es->*((word16) bx + 46);
	di <<= cl;
	SCZO = cond(di);
	v34 = es->*((word16) di + ((word16) bx + 50));
	sp -= 2;
	ss->*sp = v34;
	v35 = es->*((word16) di + ((word16) bx + 48));
	sp -= 2;
	ss->*sp = v35;
	sp -= 2;
	ss->*sp = si;
	fn2E37_06C4();
	sp = (word16) sp + 6;
	SCZO = cond(sp);
	v36 = ss->*((word16) bp - 0x0A);
	sp -= 2;
	ss->*sp = v36;
	v37 = ss->*((word16) bp - 0x0C);
	sp -= 2;
	ss->*sp = v37;
	sp -= 2;
	ss->*sp = si;
	fn2E37_04CE();
	sp = (word16) sp + 6;
	SCZO = cond(sp);
	ss->*((word16) bp - 6) = ax;
	ss->*((word16) bp - 4) = dx;
	v38 = ss->*((word16) bp - 22);
	sp -= 2;
	ss->*sp = v38;
	v39 = ss->*((word16) bp - 24);
	sp -= 2;
	ss->*sp = v39;
	sp -= 2;
	ss->*sp = si;
	fn2E37_04CE();
	sp = (word16) sp + 6;
	SCZO = cond(sp);
	ss->*((word16) bp - 18) = ax;
	ss->*((word16) bp - 16) = dx;
	v40 = ss->*((word16) bp - 0x0A);
	sp -= 2;
	ss->*sp = v40;
	v41 = ss->*((word16) bp - 0x0C);
	sp -= 2;
	ss->*sp = v41;
	sp -= 2;
	ss->*sp = si;
	fn2E37_04CE();
	sp = (word16) sp + 6;
	SCZO = cond(sp);
	ss->*((word16) bp - 6) = ax;
	ss->*((word16) bp - 4) = dx;
	v42 = ss->*((word16) bp - 22);
	sp -= 2;
	ss->*sp = v42;
	v43 = ss->*((word16) bp - 24);
	sp -= 2;
	ss->*sp = v43;
	sp -= 2;
	ss->*sp = si;
	fn2E37_04CE();
	sp = (word16) sp + 6;
	ss->*((word16) bp - 18) = ax;
	ss->*((word16) bp - 16) = dx;
	ax = ss->*((word16) bp - 0x0C);
	dx = ss->*((word16) bp - 0x0A);
	SCZO = cond(ss->*((word16) bp - 30) - ax);
	if (Test(EQ,Z))
	{
		SCZO = cond(ss->*((word16) bp - 28) - dx);
		if (Test(EQ,Z))
		{
			es_bx = ss->*((word16) bp - 6);
			ax = es->*bx;
			ss->*((word16) bp - 2) = ax;
			ax <<= 0x01;
			ax += bx;
			dx = es;
			ss->*((word16) bp - 0x0022) = ax;
			ss->*((word16) bp - 32) = dx;
			es_bx = ss->*((word16) bp - 0x0022);
			di = es->*((word16) bx + 2);
			es_bx = ss->*((word16) bp - 6);
			ax = Mem0[ds:0x14A6:word16];
			dx = Mem0[ds:5288:word16];
			es->*((word16) di + ((word16) bx + 4)) = ax;
			es->*((word16) di + ((word16) bx + 6)) = dx;
			es_bx = ss->*((word16) bp + 6);
			v45 = es->*((word16) bx + 38);
			sp -= 2;
			ss->*sp = v45;
			ax.u0 = 0x14AA;
			sp -= 2;
			ss->*sp = ds;
			sp -= 2;
			ss->*sp = ax;
			es_bx = ss->*((word16) bp - 0x0022);
			ax = es->*((word16) bx + 2);
			ax += Mem0[ss:bp + -6:word16];
			dx = ss->*((word16) bp - 4);
			ax = (word32) ax.u0 + 8;
			SCZO = cond(ax);
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = ax;
			fn2017_02EC();
			sp = (word16) sp + 0x0A;
			SCZO = cond(sp);
			es_bx = ss->*((word16) bp - 18);
			bx = es->*((word16) bx + 2);
			di = ss->*((word16) bp - 18);
			ax = Mem0[es:bx + di:word16];
			dx = es->*((word16) di + ((word16) bx + 2));
			es_bx = ss->*((word16) bp - 0x0022);
			bx = es->*((word16) bx + 4);
			es_di = ss->*((word16) bp - 6);
			Mem0[es:bx + di:word16] = ax;
			es->*((word16) di + ((word16) bx + 2)) = dx;
			es_bx = ss->*((word16) bp - 18);
			bx = es->*((word16) bx + 2);
			di = ss->*((word16) bp - 18);
			Mem0[es:bx + di:word16] = ~0x00;
			(es->*((word16) di + ((word16) bx + 2))).u0 = ~0x00;
			es_bx = ss->*((word16) bp - 6);
			goto l2EB3_1B54;
		}
	}
	es_bx = ss->*((word16) bp - 18);
	ax = es->*bx;
	ss->*((word16) bp - 20) = ax;
	si = ax;
	si <<= 0x01;
	SCZO = cond(si);
	ax = es->*((word16) si + ((word16) bx + 4));
	ss->*((word16) bp - 26) = ax;
	ax = ss->*((word16) bp - 20);
	ax = (word16) ax + 1;
	SZO = cond(ax);
	ss->*((word16) bp - 0x0E) = ax;
	while (true)
	{
		SCZO = cond(ss->*((word16) bp - 0x0E) - 0x00);
		if (Test(EQ,Z))
			break;
		ax = ss->*((word16) bp - 0x0E);
		ax <<= 0x01;
		ax += Mem0[ss:bp + -18:word16];
		SCZO = cond(ax);
		dx = ss->*((word16) bp - 16);
		ss->*((word16) bp - 0x0022) = ax;
		ss->*((word16) bp - 32) = dx;
		es_bx = ss->*((word16) bp - 0x0022);
		ax = es->*bx;
		es->*((word16) bx + 2) = ax;
		v49 = ss->*((word16) bp - 0x0E) - 0x01;
		ss->*((word16) bp - 0x0E) = v49;
		SZO = cond(v49);
	}
	es_bx = ss->*((word16) bp - 18);
	ax = ss->*((word16) bp - 26);
	es->*((word16) bx + 2) = ax;
	si = ax;
	ax = Mem0[ds:0x14A6:word16];
	dx = Mem0[ds:5288:word16];
	es->*((word16) si + ((word16) bx + 4)) = ax;
	es->*((word16) si + ((word16) bx + 6)) = dx;
	es_bx = ss->*((word16) bp + 6);
	v47 = es->*((word16) bx + 38);
	sp -= 2;
	ss->*sp = v47;
	ax.u0 = 0x14AA;
	sp -= 2;
	ss->*sp = ds;
	sp -= 2;
	ss->*sp = ax;
	es_bx = ss->*((word16) bp - 18);
	ax = es->*((word16) bx + 2);
	ax += bx;
	dx = es;
	ax = (word32) ax.u0 + 8;
	SCZO = cond(ax);
	sp -= 2;
	ss->*sp = dx;
	sp -= 2;
	ss->*sp = ax;
	fn2017_02EC();
	sp = (word16) sp + 0x0A;
	SCZO = cond(sp);
	es_bx = ss->*((word16) bp - 18);
	bx = es->*((word16) bx + 2);
	si = ss->*((word16) bp - 18);
	Mem0[es:bx + si:word16] = ~0x00;
	(es->*((word16) si + ((word16) bx + 2))).u0 = ~0x00;
	bx = si;
l2EB3_1B54:
	v48 = (word32) (es->*bx) + 1;
	es->*bx = v48;
	es_bx = ss->*((word16) bp - 6);
	ax = es->*bx;
	ss->*((word16) bp - 2) = ax;
	es_bx = ss->*((word16) bp - 18);
	ax = es->*bx;
	ax += Mem0[ss:bp + -2:word16];
	ss->*((word16) bp - 20) = ax;
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond(es->*((word16) bx + 42) - ax);
	if (Test(NE,Z))
	{
		ax = ss->*((word16) bp - 20);
		ax >>= 0x01;
		ss->*((word16) bp - 8) = ax;
		SCZO = cond(ss->*((word16) bp - 2) - ax);
		if (Test(UGT,CZ))
		{
			es_bx = ss->*((word16) bp - 18);
			ax = es->*bx;
			ss->*((word16) bp - 20) = ax;
			v50 = (word32) (ss->*((word16) bp - 8)) + 1;
			ss->*((word16) bp - 8) = v50;
			SZO = cond(v50);
			while (true)
			{
				ax = ss->*((word16) bp - 8);
				SCZO = cond(ss->*((word16) bp - 2) - ax);
				if (Test(ULE,CZ))
					break;
				si = ss->*((word16) bp - 20);
				si <<= 0x01;
				SCZO = cond(si);
				es_bx = ss->*((word16) bp - 18);
				ax = es->*((word16) si + ((word16) bx + 4));
				ss->*((word16) bp - 26) = ax;
				ax = ss->*((word16) bp - 20);
				ax = (word32) ax.u0 + 1;
				SZO = cond(ax);
				ss->*((word16) bp - 0x0E) = ax;
				while (true)
				{
					SCZO = cond(ss->*((word16) bp - 0x0E) - 0x00);
					if (Test(EQ,Z))
						break;
					ax = ss->*((word16) bp - 0x0E);
					ax <<= 0x01;
					ax += Mem0[ss:bp + -18:word16];
					SCZO = cond(ax);
					dx = ss->*((word16) bp - 16);
					ss->*((word16) bp - 38) = ax;
					ss->*((word16) bp - 36) = dx;
					es_bx = ss->*((word16) bp - 38);
					ax = es->*bx;
					es->*((word16) bx + 2) = ax;
					v76 = ss->*((word16) bp - 0x0E) - 0x01;
					ss->*((word16) bp - 0x0E) = v76;
					SZO = cond(v76);
				}
				es_bx = ss->*((word16) bp - 18);
				ax = ss->*((word16) bp - 26);
				es->*((word16) bx + 2) = ax;
				si = ss->*((word16) bp - 2);
				si <<= 0x01;
				es_bx = ss->*((word16) bp - 6);
				bx = es->*((word16) si + ((word16) bx + 2));
				si = ss->*((word16) bp - 6);
				ax = Mem0[es:bx + si:word16];
				dx = es->*((word16) si + ((word16) bx + 2));
				es_bx = ss->*((word16) bp - 18);
				bx = es->*((word16) bx + 4);
				si = ss->*((word16) bp - 18);
				Mem0[es:bx + si:word16] = ax;
				es->*((word16) si + ((word16) bx + 2)) = dx;
				v71 = ss->*((word16) bp - 2) - 0x01;
				ss->*((word16) bp - 2) = v71;
				si = ss->*((word16) bp - 2);
				si <<= 0x01;
				es_bx = ss->*((word16) bp - 6);
				ax = es->*((word16) si + ((word16) bx + 2));
				ax += bx;
				dx = es;
				ss->*((word16) bp - 38) = ax;
				ss->*((word16) bp - 36) = dx;
				es_bx = ss->*((word16) bp - 38);
				ax = es->*((word16) bx + 4);
				dx = es->*((word16) bx + 6);
				es_bx = ss->*((word16) bp - 18);
				si = es->*((word16) bx + 2);
				es->*((word16) si + ((word16) bx + 4)) = ax;
				es->*((word16) si + ((word16) bx + 6)) = dx;
				es_bx = ss->*((word16) bp + 6);
				v72 = es->*((word16) bx + 38);
				sp -= 2;
				ss->*sp = v72;
				ax = ss->*((word16) bp - 38);
				dx = ss->*((word16) bp - 36);
				ax = (word16) ax + 8;
				sp -= 2;
				ss->*sp = dx;
				sp -= 2;
				ss->*sp = ax;
				es_bx = ss->*((word16) bp - 18);
				ax = es->*((word16) bx + 2);
				ax += bx;
				dx = es;
				ax = (word16) ax + 8;
				SCZO = cond(ax);
				sp -= 2;
				ss->*sp = dx;
				sp -= 2;
				ss->*sp = ax;
				fn2017_02EC();
				sp = (word16) sp + 0x0A;
				SCZO = cond(sp);
				v73 = (word32) (ss->*((word16) bp - 20)) + 1;
				ss->*((word16) bp - 20) = v73;
				SZO = cond(v73);
			}
			si = ss->*((word16) bp - 2);
			si <<= 0x01;
			es_bx = ss->*((word16) bp - 6);
			bx = es->*((word16) si + ((word16) bx + 2));
			si = ss->*((word16) bp - 6);
			ax = Mem0[es:bx + si:word16];
			dx = es->*((word16) si + ((word16) bx + 2));
			es_bx = ss->*((word16) bp - 18);
			bx = es->*((word16) bx + 2);
			si = ss->*((word16) bp - 18);
			Mem0[es:bx + si:word16] = ax;
			es->*((word16) si + ((word16) bx + 2)) = dx;
			bx = si;
			ax = ss->*((word16) bp - 20);
			es->*bx = ax;
			v63 = ss->*((word16) bp - 2) - 0x01;
			ss->*((word16) bp - 2) = v63;
			si = ss->*((word16) bp - 2);
			si <<= 0x01;
			es_bx = ss->*((word16) bp - 6);
			ax = es->*((word16) si + ((word16) bx + 2));
			ax += bx;
			dx = es;
			ss->*((word16) bp - 38) = ax;
			ss->*((word16) bp - 36) = dx;
			es_bx = ss->*((word16) bp - 38);
			ax = es->*((word16) bx + 4);
			dx = es->*((word16) bx + 6);
			Mem0[ds:0x14A6:word16] = ax;
			Mem0[ds:5288:word16] = dx;
			es_bx = ss->*((word16) bp + 6);
			v64 = es->*((word16) bx + 38);
			sp -= 2;
			ss->*sp = v64;
			ax = ss->*((word16) bp - 38);
			dx = ss->*((word16) bp - 36);
			ax = (word16) ax + 8;
			SCZO = cond(ax);
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = ax;
			ax.u0 = 0x14AA;
			sp -= 2;
			ss->*sp = ds;
			sp -= 2;
			ss->*sp = ax;
			fn2017_02EC();
			sp = (word16) sp + 0x0A;
			SCZO = cond(sp);
			es_bx = ss->*((word16) bp - 6);
			ax = ss->*((word16) bp - 2);
		}
		else
		{
			(ss->*((word16) bp - 20)).u0 = 0x00;
			while (true)
			{
				ax = ss->*((word16) bp - 8);
				SCZO = cond(ss->*((word16) bp - 2) - ax);
				if (Test(UGE,C))
					break;
				si = ss->*((word16) bp - 20);
				si <<= 0x01;
				es_bx = ss->*((word16) bp - 18);
				ax = es->*((word16) si + ((word16) bx + 2));
				ax += bx;
				dx = es;
				ss->*((word16) bp - 38) = ax;
				ss->*((word16) bp - 36) = dx;
				ax = ss->*((word16) bp - 2);
				ax <<= 0x01;
				ax += Mem0[ss:bp + -6:word16];
				dx = ss->*((word16) bp - 4);
				ax = (word32) ax.u0 + 2;
				ss->*((word16) bp - 0x0022) = ax;
				ss->*((word16) bp - 32) = dx;
				es_bx = ss->*((word16) bp - 38);
				ax = es->*((word16) bx + 4);
				dx = es->*((word16) bx + 6);
				es_bx = ss->*((word16) bp - 0x0022);
				si = es->*bx;
				es_bx = ss->*((word16) bp - 6);
				es->*((word16) si + ((word16) bx + 4)) = ax;
				es->*((word16) si + ((word16) bx + 6)) = dx;
				es_bx = ss->*((word16) bp + 6);
				v60 = es->*((word16) bx + 38);
				sp -= 2;
				ss->*sp = v60;
				ax = ss->*((word16) bp - 38);
				dx = ss->*((word16) bp - 36);
				ax = (word16) ax + 8;
				sp -= 2;
				ss->*sp = dx;
				sp -= 2;
				ss->*sp = ax;
				es_bx = ss->*((word16) bp - 0x0022);
				ax = es->*bx;
				ax += Mem0[ss:bp + -6:word16];
				dx = ss->*((word16) bp - 4);
				ax = (word16) ax + 8;
				SCZO = cond(ax);
				sp -= 2;
				ss->*sp = dx;
				sp -= 2;
				ss->*sp = ax;
				fn2017_02EC();
				sp = (word16) sp + 0x0A;
				v61 = (word32) (ss->*((word16) bp - 20)) + 1;
				ss->*((word16) bp - 20) = v61;
				v62 = (word32) (ss->*((word16) bp - 2)) + 1;
				ss->*((word16) bp - 2) = v62;
				si = ss->*((word16) bp - 20);
				si <<= 0x01;
				es_bx = ss->*((word16) bp - 18);
				bx = es->*((word16) si + ((word16) bx + 2));
				si = ss->*((word16) bp - 18);
				ax = Mem0[es:bx + si:word16];
				dx = es->*((word16) si + ((word16) bx + 2));
				si = ss->*((word16) bp - 2);
				si <<= 0x01;
				SCZO = cond(si);
				es_bx = ss->*((word16) bp - 6);
				bx = es->*((word16) si + ((word16) bx + 2));
				si = ss->*((word16) bp - 6);
				Mem0[es:bx + si:word16] = ax;
				es->*((word16) si + ((word16) bx + 2)) = dx;
			}
			es_bx = ss->*((word16) bp - 6);
			ax = ss->*((word16) bp - 2);
			es->*bx = ax;
			si = ss->*((word16) bp - 20);
			si <<= 0x01;
			es_bx = ss->*((word16) bp - 18);
			ax = es->*((word16) si + ((word16) bx + 2));
			ax += bx;
			dx = es;
			ss->*((word16) bp - 38) = ax;
			ss->*((word16) bp - 36) = dx;
			es_bx = ss->*((word16) bp - 38);
			ax = es->*((word16) bx + 4);
			dx = es->*((word16) bx + 6);
			Mem0[ds:0x14A6:word16] = ax;
			Mem0[ds:5288:word16] = dx;
			es_bx = ss->*((word16) bp + 6);
			v74 = es->*((word16) bx + 38);
			sp -= 2;
			ss->*sp = v74;
			ax = ss->*((word16) bp - 38);
			dx = ss->*((word16) bp - 36);
			ax = (word16) ax + 8;
			SCZO = cond(ax);
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = ax;
			ax.u0 = 0x14AA;
			sp -= 2;
			ss->*sp = ds;
			sp -= 2;
			ss->*sp = ax;
			fn2017_02EC();
			sp = (word16) sp + 0x0A;
			SCZO = cond(sp);
			v75 = (word32) (ss->*((word16) bp - 20)) + 1;
			ss->*((word16) bp - 20) = v75;
			SZO = cond(v75);
			es_bx = ss->*((word16) bp - 18);
			ax = es->*bx;
			ss->*((word16) bp - 8) = ax;
			(ss->*((word16) bp - 2)).u0 = 0x00;
			while (true)
			{
				ax = ss->*((word16) bp - 8);
				SCZO = cond(ss->*((word16) bp - 20) - ax);
				if (Test(UGT,CZ))
					break;
				ax = ss->*((word16) bp - 2);
				ax <<= 0x01;
				ax += Mem0[ss:bp + -18:word16];
				dx = ss->*((word16) bp - 16);
				ax = (word16) ax + 2;
				ss->*((word16) bp - 38) = ax;
				ss->*((word16) bp - 36) = dx;
				es_bx = ss->*((word16) bp - 38);
				ax = es->*bx;
				ss->*((word16) bp - 26) = ax;
				ax = ss->*((word16) bp - 20);
				ax <<= 0x01;
				ax += Mem0[ss:bp + -18:word16];
				ax = (word16) ax + 2;
				SCZO = cond(ax);
				ss->*((word16) bp - 0x0022) = ax;
				ss->*((word16) bp - 32) = dx;
				es_bx = ss->*((word16) bp - 0x0022);
				ax = es->*bx;
				es_bx = ss->*((word16) bp - 38);
				es->*bx = ax;
				es_bx = ss->*((word16) bp - 0x0022);
				ax = ss->*((word16) bp - 26);
				es->*bx = ax;
				v77 = (word32) (ss->*((word16) bp - 2)) + 1;
				ss->*((word16) bp - 2) = v77;
				v78 = (word32) (ss->*((word16) bp - 20)) + 1;
				ss->*((word16) bp - 20) = v78;
				SZO = cond(v78);
			}
			es_bx = ss->*((word16) bp - 18);
			ax = ss->*((word16) bp - 2);
			--ax;
			SZO = cond(ax);
		}
		es->*bx = ax;
		ax = ss->*((word16) bp - 24);
		dx = ss->*((word16) bp - 22);
		Mem0[ds:5282:word16] = ax;
		Mem0[ds:0x14A4:word16] = dx;
		es_bx = ss->*((word16) bp + 6);
		si = es->*bx;
		v65 = ss->*((word16) bp - 0x0A);
		sp -= 2;
		ss->*sp = v65;
		v66 = ss->*((word16) bp - 0x0C);
		sp -= 2;
		ss->*sp = v66;
		sp -= 2;
		ss->*sp = si;
		fn2E37_06C4();
		sp = (word16) sp + 6;
		SCZO = cond(sp);
		v67 = ss->*((word16) bp - 22);
		sp -= 2;
		ss->*sp = v67;
		v68 = ss->*((word16) bp - 24);
		sp -= 2;
		ss->*sp = v68;
		sp -= 2;
		ss->*sp = si;
		fn2E37_06C4();
		sp = (word16) sp + 6;
		SCZO = cond(sp);
		v69 = ss->*((word16) bp + 8);
		sp -= 2;
		ss->*sp = v69;
		v70 = ss->*((word16) bp + 6);
		sp -= 2;
		ss->*sp = v70;
		fn2EB3_1206();
	}
	else
	{
		(ss->*((word16) bp - 20)).u0 = 0x00;
		while (true)
		{
			es_bx = ss->*((word16) bp + 6);
			ax = ss->*((word16) bp - 2);
			SCZO = cond(es->*((word16) bx + 42) - ax);
			if (Test(ULE,CZ))
				break;
			si = ss->*((word16) bp - 20);
			si <<= 0x01;
			es_bx = ss->*((word16) bp - 18);
			ax = es->*((word16) si + ((word16) bx + 2));
			ax += bx;
			dx = es;
			ss->*((word16) bp - 0x0022) = ax;
			ss->*((word16) bp - 32) = dx;
			ax = ss->*((word16) bp - 2);
			ax <<= 0x01;
			ax += Mem0[ss:bp + -6:word16];
			dx = ss->*((word16) bp - 4);
			ax = (word16) ax + 2;
			ss->*((word16) bp - 38) = ax;
			ss->*((word16) bp - 36) = dx;
			es_bx = ss->*((word16) bp - 0x0022);
			ax = es->*((word16) bx + 4);
			dx = es->*((word16) bx + 6);
			es_bx = ss->*((word16) bp - 38);
			si = es->*bx;
			es_bx = ss->*((word16) bp - 6);
			es->*((word16) si + ((word16) bx + 4)) = ax;
			es->*((word16) si + ((word16) bx + 6)) = dx;
			es_bx = ss->*((word16) bp + 6);
			v57 = es->*((word16) bx + 38);
			sp -= 2;
			ss->*sp = v57;
			ax = ss->*((word16) bp - 0x0022);
			dx = ss->*((word16) bp - 32);
			ax = (word16) ax + 8;
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = ax;
			es_bx = ss->*((word16) bp - 38);
			ax = es->*bx;
			ax += Mem0[ss:bp + -6:word16];
			dx = ss->*((word16) bp - 4);
			ax = (word16) ax + 8;
			SCZO = cond(ax);
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = ax;
			fn2017_02EC();
			sp = (word16) sp + 0x0A;
			v58 = (word32) (ss->*((word16) bp - 20)) + 1;
			ss->*((word16) bp - 20) = v58;
			v59 = (word32) (ss->*((word16) bp - 2)) + 1;
			ss->*((word16) bp - 2) = v59;
			si = ss->*((word16) bp - 20);
			si <<= 0x01;
			es_bx = ss->*((word16) bp - 18);
			bx = es->*((word16) si + ((word16) bx + 2));
			si = ss->*((word16) bp - 18);
			ax = Mem0[es:bx + si:word16];
			dx = es->*((word16) si + ((word16) bx + 2));
			si = ss->*((word16) bp - 2);
			si <<= 0x01;
			SCZO = cond(si);
			es_bx = ss->*((word16) bp - 6);
			bx = es->*((word16) si + ((word16) bx + 2));
			si = ss->*((word16) bp - 6);
			Mem0[es:bx + si:word16] = ax;
			es->*((word16) si + ((word16) bx + 2)) = dx;
		}
		ax = es->*((word16) bx + 42);
		es_bx = ss->*((word16) bp - 6);
		es->*bx = ax;
		es_bx = ss->*((word16) bp + 6);
		ax = es->*((word16) bx + 24);
		dx = es->*((word16) bx + 26);
		es_bx = ss->*((word16) bp - 18);
		bx = es->*((word16) bx + 2);
		di = ss->*((word16) bp - 18);
		Mem0[es:bx + di:word16] = ax;
		es->*((word16) di + ((word16) bx + 2)) = dx;
		es_bx = ss->*((word16) bp + 6);
		ax = ss->*((word16) bp - 24);
		dx = ss->*((word16) bp - 22);
		es->*((word16) bx + 24) = ax;
		es->*((word16) bx + 26) = dx;
		si = es->*bx;
		v51 = ss->*((word16) bp - 0x0A);
		sp -= 2;
		ss->*sp = v51;
		v52 = ss->*((word16) bp - 0x0C);
		sp -= 2;
		ss->*sp = v52;
		sp -= 2;
		ss->*sp = si;
		fn2E37_06C4();
		sp = (word16) sp + 6;
		SCZO = cond(sp);
		v53 = ss->*((word16) bp - 22);
		sp -= 2;
		ss->*sp = v53;
		v54 = ss->*((word16) bp - 24);
		sp -= 2;
		ss->*sp = v54;
		sp -= 2;
		ss->*sp = si;
		fn2E37_06C4();
		sp = (word16) sp + 6;
		SCZO = cond(sp);
		v55 = ss->*((word16) bp + 8);
		sp -= 2;
		ss->*sp = v55;
		v56 = ss->*((word16) bp + 6);
		sp -= 2;
		ss->*sp = v56;
		fn2EB3_17FE();
	}
	sp = (word16) sp + 4;
	SCZO = cond(sp);
	goto l2EB3_1FC6;
}

// 2EB3:1FCC: define fn2EB3_1FCC
// Called from:
//      fn2644_27D4
//      fn2644_2C1A
//      fn2644_2CF0
//      fn2EB3_07B2
//      fn2EB3_2008
define fn2EB3_1FCC
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	es_bx = ss->*((word16) bp + 6);
	es->*((word16) bx + 46) = 0x00;
	ax = ss->*((word16) bp + 0x0E);
	SCZO = cond(es->*((word16) bx + 38) - ax);
	if (Test(ULT,C))
	{
		ax = es->*((word16) bx + 38);
		ss->*((word16) bp + 0x0E) = ax;
	}
	v12 = es->*((word16) bx + 22);
	sp -= 2;
	ss->*sp = v12;
	v13 = es->*((word16) bx + 20);
	sp -= 2;
	ss->*sp = v13;
	v14 = ss->*((word16) bp + 16);
	sp -= 2;
	ss->*sp = v14;
	v15 = ss->*((word16) bp + 0x0E);
	sp -= 2;
	ss->*sp = v15;
	v16 = ss->*((word16) bp + 0x0C);
	sp -= 2;
	ss->*sp = v16;
	v17 = ss->*((word16) bp + 0x0A);
	sp -= 2;
	ss->*sp = v17;
	sp -= 2;
	ss->*sp = es;
	sp -= 2;
	ss->*sp = bx;
	fn2EB3_0BF0();
	sp = (word16) sp + 16;
	SCZO = cond(sp);
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2EB3:2008: define fn2EB3_2008
// Called from:
//      fn2EB3_2450
//      fn2EB3_24C6
define fn2EB3_2008
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x04;
	ax -= ax;
	SCZO = cond(ax);
	sp -= 2;
	ss->*sp = ax;
	v8 = ss->*((word16) bp + 0x0E);
	sp -= 2;
	ss->*sp = v8;
	v9 = ss->*((word16) bp + 0x0C);
	sp -= 2;
	ss->*sp = v9;
	v10 = ss->*((word16) bp + 0x0A);
	sp -= 2;
	ss->*sp = v10;
	v11 = ss->*((word16) bp + 8);
	sp -= 2;
	ss->*sp = v11;
	v12 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v12;
	fn2EB3_1FCC();
	sp = (word16) sp + 0x0C;
	SCZO = cond(sp);
	while (true)
	{
		ss->*((word16) bp - 4) = ax;
		(ss->*((word16) bp - 2)).u0 = dx;
		ax |= dx;
		SZ = cond(ax);
		O = false;
		C = false;
		if (Test(EQ,Z))
			break;
		ax = ss->*((word16) bp + 16);
		dx = (cui16) (ss->*((word16) bp + 18));
		SCZO = cond(ss->*((word16) bp - 4) - ax);
		if (Test(EQ,Z))
		{
			SCZO = cond(ss->*((word16) bp - 2) - dx);
			if (Test(EQ,Z))
				break;
		}
		ax.u0 = 0x01;
		sp -= 2;
		ss->*sp = ax;
		ax -= ax;
		SCZO = cond(ax);
		sp -= 2;
		ss->*sp = ax;
		v18 = ss->*((word16) bp + 8);
		sp -= 2;
		ss->*sp = v18;
		v19 = ss->*((word16) bp + 6);
		sp -= 2;
		ss->*sp = v19;
		fn2EB3_1526();
		sp = (word16) sp + 8;
		SCZO = cond(sp);
	}
	ax = ss->*((word16) bp - 4);
	dx = (cui16) (ss->*((word16) bp - 2));
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2EB3:2062: define fn2EB3_2062
// Called from:
//      fn2644_2384
//      fn2644_27D4
define fn2EB3_2062
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x06;
	SCZO = cond(ss->*((word16) bp + 0x0A) - 0x01);
	if (Test(EQ,Z))
	{
		SCZO = cond(ss->*((word16) bp + 0x0C) - 0x00);
		if (Test(EQ,Z))
		{
			ax.u0 = 0x01;
			sp -= 2;
			ss->*sp = ax;
			ax -= ax;
			SCZO = cond(ax);
			sp -= 2;
			ss->*sp = ax;
			v9 = ss->*((word16) bp + 8);
			sp -= 2;
			ss->*sp = v9;
			v10 = ss->*((word16) bp + 6);
			sp -= 2;
			ss->*sp = v10;
			fn2EB3_1526();
			sp = (word16) sp + 8;
			SCZO = cond(sp);
			ss->*((word16) bp - 4) = ax;
			ss->*((word16) bp - 2) = dx;
			goto l2EB3_20F4;
		}
	}
	SCZO = cond(ss->*((word16) bp + 0x0C) - 0x00);
	if (Test(LT,SO))
	{
		ax = ss->*((word16) bp + 0x0A);
		dx = ss->*((word16) bp + 0x0C);
		C = ax != 0x00;
		ax = -ax;
		dx = (bool) C + dx.u0;
		C = dx != 0x00;
		dx = -dx;
		SZO = cond(dx);
		ss->*((word16) bp + 0x0A) = ax;
		ss->*((word16) bp + 0x0C) = dx;
		(ss->*((word16) bp - 6)).u0 = ~0x00;
	}
	else
		(ss->*((word16) bp - 6)).u0 = 0x01;
	ax = ss->*((word16) bp + 0x0A);
	ax |= ss->*((word16) bp + 0x0C);
	SZ = cond(ax);
	O = false;
	C.u0 = false;
	while (Test(NE,Z))
	{
		v17 = ss->*((word16) bp - 6);
		sp -= 2;
		ss->*sp = v17;
		ax -= ax;
		SCZO = cond(ax);
		sp -= 2;
		ss->*sp = ax;
		v18 = ss->*((word16) bp + 8);
		sp -= 2;
		ss->*sp = v18;
		v19 = ss->*((word16) bp + 6);
		sp -= 2;
		ss->*sp = v19;
		fn2EB3_1526();
		sp = (word16) sp + 8;
		ss->*((word16) bp - 4) = ax;
		ss->*((word16) bp - 2) = dx;
		v20 = ss->*((word16) bp + 0x0A) - 0x01;
		ss->*((word16) bp + 0x0A) = v20;
		SCZO = cond(v20);
		v21 = ss->*((word16) bp + 0x0C) - 0x00 - C;
		ss->*((word16) bp + 0x0C) = v21;
		ax |= dx;
		SZ = cond(ax);
		O = false;
		C.u0 = false;
		if (Test(EQ,Z))
			break;
		ax = ss->*((word16) bp + 0x0A);
		ax |= ss->*((word16) bp + 0x0C);
		SZ = cond(ax);
		O = false;
		C.u0 = false;
	}
l2EB3_20F4:
	ax = ss->*((word16) bp - 4);
	dx = ss->*((word16) bp - 2);
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2EB3:20FE: define fn2EB3_20FE
// Called from:
//      fn2EB3_24C6
define fn2EB3_20FE
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x1C;
	sp -= 2;
	ss->*sp = di;
	sp -= 2;
	ss->*sp = si;
	es_bx = ss->*((word16) bp + 6);
	ax = es->*((word16) bx + 46);
	cl = 0x03;
	ax <<= cl;
	ax += bx;
	SCZO = cond(ax);
	dx = es;
	ss->*((word16) bp - 24) = ax;
	ss->*((word16) bp - 22) = dx;
	es_bx = ss->*((word16) bp - 24);
	ax = es->*((word16) bx + 48);
	dx = es->*((word16) bx + 50);
	ss->*((word16) bp - 16) = ax;
	ss->*((word16) bp - 0x0E) = dx;
	ax = es->*((word16) bx + 52);
	ss->*((word16) bp - 2) = ax;
	sp -= 2;
	ss->*sp = dx;
	v15 = ss->*((word16) bp - 16);
	sp -= 2;
	ss->*sp = v15;
	es_bx = ss->*((word16) bp + 6);
	v16 = es->*bx;
	sp -= 2;
	ss->*sp = v16;
	fn2E37_04CE();
	sp = (word16) sp + 6;
	ss->*((word16) bp - 0x0A) = ax;
	ss->*((word16) bp - 8) = dx;
	si = ss->*((word16) bp - 2);
	si <<= 0x01;
	es_bx = ss->*((word16) bp - 0x0A);
	ax = es->*((word16) si + ((word16) bx + 2));
	ax += bx;
	ss->*((word16) bp - 20) = ax;
	ss->*((word16) bp - 18) = dx;
	es_bx = ss->*((word16) bp - 20);
	ax = es->*bx;
	ax |= es->*((word16) bx + 2);
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(NE,Z))
	{
		v21 = es->*((word16) bx + 2);
		sp -= 2;
		ss->*sp = v21;
		v22 = es->*bx;
		sp -= 2;
		ss->*sp = v22;
		ax.u0 = 0x03;
		sp -= 2;
		ss->*sp = ax;
		ax -= ax;
		SCZO = cond(ax);
		sp -= 2;
		ss->*sp = ax;
		sp -= 2;
		ss->*sp = ax;
		sp -= 2;
		ss->*sp = ax;
		v23 = ss->*((word16) bp + 8);
		sp -= 2;
		ss->*sp = v23;
		v24 = ss->*((word16) bp + 6);
		sp -= 2;
		ss->*sp = v24;
		fn2EB3_0BF0();
		sp = (word16) sp + 16;
		es_bx = ss->*((word16) bp + 6);
		ax = es->*((word16) bx + 46);
		cl = 0x03;
		ax <<= cl;
		ax += bx;
		SCZO = cond(ax);
		dx = es;
		ss->*((word16) bp - 28) = ax;
		ss->*((word16) bp - 26) = dx;
		di = es->*bx;
		es_bx = ss->*((word16) bp - 28);
		v25 = es->*((word16) bx + 50);
		sp -= 2;
		ss->*sp = v25;
		v26 = es->*((word16) bx + 48);
		sp -= 2;
		ss->*sp = v26;
		sp -= 2;
		ss->*sp = di;
		fn2E37_04CE();
		sp = (word16) sp + 6;
		ss->*((word16) bp - 0x0A) = ax;
		ss->*((word16) bp - 8) = dx;
		es_bx = ss->*((word16) bp - 28);
		bx = es->*((word16) bx + 52);
		bx <<= 0x01;
		bx += ax;
		es = dx;
		ax = es->*((word16) bx + 2);
		ax += Mem0[ss:bp + -0x0A:word16];
		ss->*((word16) bp - 20) = ax;
		ss->*((word16) bp - 18) = dx;
		es_bx = ss->*((word16) bp - 20);
		ax = es->*((word16) bx + 4);
		dx = es->*((word16) bx + 6);
		Mem0[ds:0x14A6:word16] = ax;
		Mem0[ds:5288:word16] = dx;
		es_bx = ss->*((word16) bp + 6);
		v28 = es->*((word16) bx + 38);
		sp -= 2;
		ss->*sp = v28;
		ax = ss->*((word16) bp - 20);
		dx = ss->*((word16) bp - 18);
		ax = (word32) ax.u0 + 8;
		SCZO = cond(ax);
		sp -= 2;
		ss->*sp = dx;
		sp -= 2;
		ss->*sp = ax;
		ax.u0 = 0x14AA;
		sp -= 2;
		ss->*sp = ds;
		sp -= 2;
		ss->*sp = ax;
		fn2017_02EC();
		sp = (word16) sp + 0x0A;
		SCZO = cond(sp);
		v29 = ss->*((word16) bp - 0x0E);
		sp -= 2;
		ss->*sp = v29;
		v30 = ss->*((word16) bp - 16);
		sp -= 2;
		ss->*sp = v30;
		sp -= 2;
		ss->*sp = di;
		fn2E37_05C0();
		sp = (word16) sp + 6;
		ss->*((word16) bp - 0x0A) = ax;
		ss->*((word16) bp - 8) = dx;
		es_bx = ss->*((word16) bp - 0x0A);
		ax = es->*((word16) si + ((word16) bx + 2));
		ax += bx;
		ss->*((word16) bp - 20) = ax;
		ss->*((word16) bp - 18) = dx;
		es_bx = ss->*((word16) bp - 20);
		ax = Mem0[ds:0x14A6:word16];
		dx = Mem0[ds:5288:word16];
		es->*((word16) bx + 4) = ax;
		es->*((word16) bx + 6) = dx;
		es_bx = ss->*((word16) bp + 6);
		v31 = es->*((word16) bx + 38);
		sp -= 2;
		ss->*sp = v31;
		ax.u0 = 0x14AA;
		sp -= 2;
		ss->*sp = ds;
		sp -= 2;
		ss->*sp = ax;
		ax = ss->*((word16) bp - 20);
		dx = ss->*((word16) bp - 18);
		ax = (word32) ax.u0 + 8;
		SCZO = cond(ax);
		sp -= 2;
		ss->*sp = dx;
		sp -= 2;
		ss->*sp = ax;
		fn2017_02EC();
		sp = (word16) sp + 0x0A;
		SCZO = cond(sp);
		es_bx = ss->*((word16) bp - 28);
		ax = es->*((word16) bx + 48);
		dx = es->*((word16) bx + 50);
		ss->*((word16) bp - 16) = ax;
		ss->*((word16) bp - 0x0E) = dx;
		ax = es->*((word16) bx + 52);
		ss->*((word16) bp - 2) = ax;
		sp -= 2;
		ss->*sp = dx;
		v32 = ss->*((word16) bp - 16);
		sp -= 2;
		ss->*sp = v32;
		sp -= 2;
		ss->*sp = di;
		fn2E37_04CE();
		sp = (word16) sp + 6;
		ss->*((word16) bp - 0x0A) = ax;
		ss->*((word16) bp - 8) = dx;
		bx = ss->*((word16) bp - 2);
		bx <<= 0x01;
		bx += ax;
		es = dx;
		ax = es->*((word16) bx + 2);
		ax += Mem0[ss:bp + -0x0A:word16];
		SCZO = cond(ax);
		ss->*((word16) bp - 20) = ax;
		ss->*((word16) bp - 18) = dx;
	}
	es_bx = ss->*((word16) bp - 0x0A);
	ax = es->*bx;
	ss->*((word16) bp - 6) = ax;
	si = ss->*((word16) bp - 2);
	si <<= 0x01;
	SCZO = cond(si);
	ax = es->*((word16) si + ((word16) bx + 2));
	ss->*((word16) bp - 0x0C) = ax;
	ax = ss->*((word16) bp - 2);
	ss->*((word16) bp - 4) = ax;
	while (true)
	{
		ax = ss->*((word16) bp - 6);
		SCZO = cond(ss->*((word16) bp - 4) - ax);
		if (Test(GE,SO))
			break;
		ax = ss->*((word16) bp - 4);
		ax <<= 0x01;
		ax += Mem0[ss:bp + -0x0A:word16];
		SCZO = cond(ax);
		dx = ss->*((word16) bp - 8);
		ss->*((word16) bp - 28) = ax;
		ss->*((word16) bp - 26) = dx;
		es_bx = ss->*((word16) bp - 28);
		ax = es->*((word16) bx + 4);
		es->*((word16) bx + 2) = ax;
		v40 = (word32) (ss->*((word16) bp - 4)) + 1;
		ss->*((word16) bp - 4) = v40;
		SZO = cond(v40);
	}
	di = ax;
	di <<= 0x01;
	es_bx = ss->*((word16) bp - 0x0A);
	ax = ss->*((word16) bp - 0x0C);
	es->*((word16) di + ((word16) bx + 2)) = ax;
	v34 = es->*bx - 0x01;
	es->*bx = v34;
	si = es->*bx;
	es_bx = ss->*((word16) bp + 6);
	di = es->*((word16) bx + 46);
	cl = 0x03;
	di <<= cl;
	es->*((word16) di + ((word16) bx + 54)) = si;
	di = es->*((word16) bx + 46);
	di <<= cl;
	SCZO = cond(di);
	es->*((word16) di + ((word16) bx + 52)) = si;
	v36 = ss->*((word16) bp - 0x0E);
	sp -= 2;
	ss->*sp = v36;
	v37 = ss->*((word16) bp - 16);
	sp -= 2;
	ss->*sp = v37;
	v38 = es->*bx;
	sp -= 2;
	ss->*sp = v38;
	fn2E37_06C4();
	sp = (word16) sp + 6;
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond(es->*((word16) bx + 44) - si);
	if (Test(UGT,CZ))
	{
		SCZO = cond(es->*((word16) bx + 46) - 0x01);
		if (Test(UGT,CZ))
		{
			sp -= 2;
			ss->*sp = es;
			sp -= 2;
			ss->*sp = bx;
			fn2EB3_17FE();
			sp = (word16) sp + 4;
			SCZO = cond(sp);
		}
	}
	si = ss->*sp;
	sp = (word16) sp + 2;
	di = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2EB3:2340: define fn2EB3_2340
// Called from:
//      fn2EB3_240A
//      fn2EB3_24C6
define fn2EB3_2340
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x02;
	sp -= 2;
	ss->*sp = si;
	es_bx = ss->*((word16) bp + 6);
	ax = Mem0[ds:0x12FC:word16];
	SCZO = cond(es->*((word16) bx + 32) - ax);
	if (Test(EQ,Z))
	{
		ax.u0 = 0x02;
		sp -= 2;
		ss->*sp = ax;
		v14 = es->*((word16) bx + 0x0A);
		sp -= 2;
		ss->*sp = v14;
		fn31FF_1BE6();
		sp = (word16) sp + 4;
		SCZO = cond(sp);
	}
	else
	{
		ax = Mem0[ds:0x12FC:word16];
		ss->*((word16) bp - 2) = ax;
		es_bx = ss->*((word16) bp + 6);
		ax = es->*((word16) bx + 32);
		Mem0[ds:0x12FC:word16] = ax;
		bx = es->*((word16) bx + 32);
		bx <<= 0x01;
		bx <<= 0x01;
		SCZO = cond(bx);
		es_si = Mem0[ds:4874:segptr32];
		ax = Mem0[es:bx + si:word16];
		dx = es->*((word16) si + ((word16) bx + 2));
		bx = si;
		es->*bx = ax;
		es->*((word16) bx + 2) = dx;
		ax.u0 = 0x02;
		sp -= 2;
		ss->*sp = ax;
		es_bx = ss->*((word16) bp + 6);
		v17 = es->*((word16) bx + 0x0A);
		sp -= 2;
		ss->*sp = v17;
		fn31FF_1BE6();
		sp = (word16) sp + 4;
		ax = ss->*((word16) bp - 2);
		Mem0[ds:0x12FC:word16] = ax;
		bx = ax;
		bx <<= 0x01;
		bx <<= 0x01;
		SCZO = cond(bx);
		es_si = Mem0[ds:4874:segptr32];
		ax = Mem0[es:bx + si:word16];
		dx = es->*((word16) si + ((word16) bx + 2));
		bx = si;
		es->*bx = ax;
		es->*((word16) bx + 2) = dx;
	}
	es_bx = Mem0[ds:0x1296:segptr32];
	SZP = cond(es->*bx & 0x0100);
	O = false;
	C = false;
	if (Test(EQ,Z))
	{
		sp -= 2;
		ss->*sp = es;
		sp -= 2;
		ss->*sp = bx;
		v21 = ss->*((word16) bp + 8);
		sp -= 2;
		ss->*sp = v21;
		v22 = ss->*((word16) bp + 6);
		sp -= 2;
		ss->*sp = v22;
		fn2EB3_060C();
		sp = (word16) sp + 8;
		ax |= ax;
		SZ = cond(ax);
		O = false;
		C = false;
		if (Test(EQ,Z))
		{
			ax.u0 = 22;
			sp -= 2;
			ss->*sp = ax;
			fn20B2_0176();
			sp = (word16) sp + 2;
			SCZO = cond(sp);
			fn2368_033C();
			ax -= ax;
			SCZO = cond(ax);
			sp -= 2;
			ss->*sp = ax;
			sp -= 2;
			ss->*sp = ax;
			ax.u0 = 24282;
			sp -= 2;
			ss->*sp = ds;
			sp -= 2;
			ss->*sp = ax;
			fn2368_0272();
			sp = (word16) sp + 8;
			SCZO = cond(sp);
		}
	}
	si = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2EB3:240A: define fn2EB3_240A
// Called from:
//      fn2644_1F12
//      fn2EB3_07B2
//      fn2EB3_2450
define fn2EB3_240A
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	v6 = ss->*((word16) bp + 8);
	sp -= 2;
	ss->*sp = v6;
	v7 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v7;
	fn2EB3_2340();
	sp = (word16) sp + 4;
	SCZO = cond(sp);
	es_bx = ds->t1296;
	&v13.u2->t0000.u0 = (es->*bx).t0002.u2;
	sp -= 2;
	ss->*sp = v13;
	es_bx = ss->*((word16) bp + 6);
	&v14.u2->t0000.u0 = (es->*bx).t0010.u2;
	sp -= 2;
	ss->*sp = v14;
	es_bx = ds->t1296;
	&v15.u2->t0000.u0 = (es->*bx).t000A.u2;
	sp -= 2;
	ss->*sp = v15;
	&v16.u2->t0000.u0 = (es->*bx).t0008.u2;
	sp -= 2;
	ss->*sp = v16;
	es_bx = ss->*((word16) bp + 6);
	&v17.u2->t0000.u0 = (es->*bx).t000E.u2;
	sp -= 2;
	ss->*sp = v17;
	&v18.u2->t0000.u0 = (es->*bx).t000C.u2;
	sp -= 2;
	ss->*sp = v18;
	fn2017_0308();
	sp = (word16) sp + 0x0C;
	SCZO = cond(sp);
	fn2368_033C();
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2EB3:2450: define fn2EB3_2450
// Called from:
//      fn2644_1F12
define fn2EB3_2450
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	v6 = ss->*((word16) bp + 8);
	sp -= 2;
	ss->*sp = v6;
	v7 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v7;
	fn2EB3_240A();
	sp = (word16) sp + 4;
	SCZO = cond(sp);
	v9 = ss->*((word16) bp + 0x0C);
	sp -= 2;
	ss->*sp = v9;
	v10 = ss->*((word16) bp + 0x0A);
	sp -= 2;
	ss->*sp = v10;
	es_bx = ss->*((word16) bp + 6);
	v14 = es->*((word16) bx + 38);
	sp -= 2;
	ss->*sp = v14;
	v15 = es->*((word16) bx + 0x0E);
	sp -= 2;
	ss->*sp = v15;
	v16 = es->*((word16) bx + 0x0C);
	sp -= 2;
	ss->*sp = v16;
	sp -= 2;
	ss->*sp = es;
	sp -= 2;
	ss->*sp = bx;
	fn2EB3_2008();
	sp = (word16) sp + 0x0E;
	SCZO = cond(ax - ss->*((word16) bp + 0x0A));
	if (Test(EQ,Z))
	{
		SCZO = cond(dx - ss->*((word16) bp + 0x0C));
		if (Test(EQ,Z))
			goto l2EB3_24C3;
	}
	v20 = ss->*((word16) bp + 0x0C);
	sp -= 2;
	ss->*sp = v20;
	v21 = ss->*((word16) bp + 0x0A);
	sp -= 2;
	ss->*sp = v21;
	ax -= ax;
	SCZO = cond(ax);
	sp -= 2;
	ss->*sp = ax;
	ax.u0 = 24284;
	sp -= 2;
	ss->*sp = ds;
	sp -= 2;
	ss->*sp = ax;
	v23 = ss->*((word16) bp + 8);
	sp -= 2;
	ss->*sp = v23;
	v24 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v24;
	fn2EB3_2008();
	sp = (word16) sp + 0x0E;
	SCZO = cond(ax - ss->*((word16) bp + 0x0A));
	if (Test(EQ,Z))
	{
		SCZO = cond(dx - ss->*((word16) bp + 0x0C));
		if (Test(EQ,Z))
			goto l2EB3_24C3;
	}
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond(es->*((word16) bx + 6) - 0x00);
	if (Test(EQ,Z))
		Mem0[ds:0x10D2:word16] = 0x18;
	es->*((word16) bx + 46) = 0x00;
l2EB3_24C3:
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2EB3:24C6: define fn2EB3_24C6
// Called from:
//      fn2644_1F12
define fn2EB3_24C6
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x02;
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond(es->*((word16) bx + 2) - 0x00);
	if (Test(NE,Z))
	{
		sp -= 2;
		ss->*sp = es;
		sp -= 2;
		ss->*sp = bx;
		fn2EB3_0B54();
		sp = (word16) sp + 4;
		SCZO = cond(sp);
	}
	v11 = ss->*((word16) bp + 8);
	sp -= 2;
	ss->*sp = v11;
	v12 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v12;
	fn2EB3_2340();
	sp = (word16) sp + 4;
	SCZO = cond(ss->*((word16) bp + 0x0E) - 0x00);
	if (Test(EQ,Z))
	{
		es_bx = ss->*((word16) bp + 6);
		v13 = es->*((word16) bx + 38);
		sp -= 2;
		ss->*sp = v13;
		v14 = es->*((word16) bx + 0x0E);
		sp -= 2;
		ss->*sp = v14;
		v15 = es->*((word16) bx + 0x0C);
		sp -= 2;
		ss->*sp = v15;
		es_bx = Mem0[ds:0x1296:segptr32];
		v17 = es->*((word16) bx + 0x0A);
		sp -= 2;
		ss->*sp = v17;
		v18 = es->*((word16) bx + 8);
		sp -= 2;
		ss->*sp = v18;
		fn38AD_00F2();
		sp = (word16) sp + 0x0A;
		ss->*((word16) bp - 2) = ax;
		ax |= ax;
		SZ = cond(ax);
		O = false;
		C = false;
		if (Test(EQ,Z))
			goto l2EB3_2564;
		es_bx = ss->*((word16) bp + 6);
		SCZO = cond(es->*((word16) bx + 46) - 0x00);
		if (Test(NE,Z))
		{
l2EB3_2545:
			v29 = ss->*((word16) bp + 8);
			sp -= 2;
			ss->*sp = v29;
			v30 = ss->*((word16) bp + 6);
			sp -= 2;
			ss->*sp = v30;
			fn2EB3_20FE();
			sp = (word16) sp + 4;
			SCZO = cond(sp);
			goto l2EB3_2564;
		}
		v23 = ss->*((word16) bp + 0x0C);
		sp -= 2;
		ss->*sp = v23;
		v24 = ss->*((word16) bp + 0x0A);
		sp -= 2;
		ss->*sp = v24;
		v25 = es->*((word16) bx + 38);
		sp -= 2;
		ss->*sp = v25;
		v26 = es->*((word16) bx + 0x0E);
		sp -= 2;
		ss->*sp = v26;
		v27 = es->*((word16) bx + 0x0C);
		sp -= 2;
		ss->*sp = v27;
		sp -= 2;
		ss->*sp = es;
		sp -= 2;
		ss->*sp = bx;
		fn2EB3_2008();
		sp = (word16) sp + 0x0E;
		dx |= ax;
		SZ = cond(dx);
		O = false;
		C = false;
		if (Test(NE,Z))
			goto l2EB3_2545;
		es_bx = ss->*((word16) bp + 6);
		SCZO = cond(es->*((word16) bx + 6) - 0x00);
		if (Test(EQ,Z))
			Mem0[ds:0x10D2:word16] = 0x18;
	}
l2EB3_2564:
	SCZO = cond(ss->*((word16) bp + 0x0E) - 0x00);
	if (Test(EQ,Z))
	{
		SCZO = cond(ss->*((word16) bp - 2) - 0x00);
		if (Test(EQ,Z))
			goto l2EB3_2647;
	}
	es_bx = Mem0[ds:0x1296:segptr32];
	v31 = es->*((word16) bx + 2);
	sp -= 2;
	ss->*sp = v31;
	es_bx = ss->*((word16) bp + 6);
	v32 = es->*((word16) bx + 38);
	sp -= 2;
	ss->*sp = v32;
	es_bx = Mem0[ds:0x1296:segptr32];
	v33 = es->*((word16) bx + 0x0A);
	sp -= 2;
	ss->*sp = v33;
	v34 = es->*((word16) bx + 8);
	sp -= 2;
	ss->*sp = v34;
	ax.u0 = 0x14AA;
	sp -= 2;
	ss->*sp = ds;
	sp -= 2;
	ss->*sp = ax;
	fn2017_0308();
	sp = (word16) sp + 0x0C;
	ax -= ax;
	Mem0[ds:0x14A4:word16] = ax;
	Mem0[ds:5282:word16] = ax;
	ax = ss->*((word16) bp + 0x0A);
	dx = ss->*((word16) bp + 0x0C);
	Mem0[ds:0x14A6:word16] = ax;
	Mem0[ds:5288:word16] = dx;
	es_bx = ss->*((word16) bp + 6);
	es->*((word16) bx + 46) = 0x00;
	SCZO = cond(es->*((word16) bx + 6) - 0x00);
	if (Test(NE,Z))
	{
		v35 = es->*((word16) bx + 22);
		sp -= 2;
		ss->*sp = v35;
		v36 = es->*((word16) bx + 20);
		sp -= 2;
		ss->*sp = v36;
		ax -= ax;
		SCZO = cond(ax);
		sp -= 2;
		ss->*sp = ax;
		v37 = es->*((word16) bx + 38);
		sp -= 2;
		ss->*sp = v37;
		ax.u0 = 0x14AA;
		sp -= 2;
		ss->*sp = ds;
		sp -= 2;
		ss->*sp = ax;
		sp -= 2;
		ss->*sp = es;
		sp -= 2;
		ss->*sp = bx;
		fn2EB3_0BF0();
		sp = (word16) sp + 16;
		dx |= ax;
		SZ = cond(dx);
		O = false;
		C = false;
		if (Test(NE,Z))
			goto l2EB3_2638;
		SCZO = cond(Mem0[ds:5252:word16] - 0x00);
		if (Test(EQ,Z))
		{
l2EB3_25E8:
			v38 = ss->*((word16) bp + 8);
			sp -= 2;
			ss->*sp = v38;
			v39 = ss->*((word16) bp + 6);
			sp -= 2;
			ss->*sp = v39;
			fn2EB3_1206();
			sp = (word16) sp + 4;
			SCZO = cond(sp);
			goto l2EB3_2638;
		}
		ax.u0 = 0x12;
	}
	else
	{
		es_bx = ss->*((word16) bp + 6);
		v40 = es->*((word16) bx + 22);
		sp -= 2;
		ss->*sp = v40;
		v41 = es->*((word16) bx + 20);
		sp -= 2;
		ss->*sp = v41;
		ax.u0 = 0x02;
		sp -= 2;
		ss->*sp = ax;
		v42 = es->*((word16) bx + 38);
		sp -= 2;
		ss->*sp = v42;
		ax.u0 = 0x14AA;
		sp -= 2;
		ss->*sp = ds;
		sp -= 2;
		ss->*sp = ax;
		sp -= 2;
		ss->*sp = es;
		sp -= 2;
		ss->*sp = bx;
		fn2EB3_0BF0();
		sp = (word16) sp + 16;
		SCZO = cond(Mem0[ds:5252:word16] - 0x00);
		if (Test(EQ,Z))
			goto l2EB3_25E8;
		ax.u0 = 0x13;
	}
	sp -= 2;
	ss->*sp = ax;
	fn20B2_0176();
	sp = (word16) sp + 2;
	SCZO = cond(sp);
	Mem0[ds:5252:word16] = 0x00;
l2EB3_2638:
	es_bx = ss->*((word16) bp + 6);
	es->*((word16) bx + 46) = 0x00;
	es->*((word16) bx + 4) = 0x01;
l2EB3_2647:
	fn2368_033C();
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond(es->*((word16) bx + 2) - 0x00);
	if (Test(NE,Z))
	{
		sp -= 2;
		ss->*sp = es;
		sp -= 2;
		ss->*sp = bx;
		fn2EB3_0BB4();
		sp = (word16) sp + 4;
		SCZO = cond(sp);
		es_bx = ss->*((word16) bp + 6);
		es->*((word16) bx + 4) = 0x00;
	}
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

