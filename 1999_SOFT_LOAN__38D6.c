// 1999_SOFT_LOAN__38D6.c
// Generated by decompiling 1999_SOFT_LOAN_.exe
// using Reko decompiler version 0.11.4.0.

#include "1999_SOFT_LOAN_.h"

// 38D6:0008: define fn38D6_0008
// Called from:
//      fn1825_6168
//      fn3431_1624
define fn38D6_0008
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x10;
	sp -= 2;
	ss->*sp = di;
	sp -= 2;
	ss->*sp = si;
	es_bx = ss->*((word16) bp + 6);
	ax = es->*((word16) bx + 2);
	ss->*((word16) bp - 0x0C) = ax;
	ax = es->*((word16) bx + 4);
	ss->*((word16) bp - 0x0A) = ax;
	SCZO = cond(es->*bx - 0x08);
	if (Test(NE,Z))
	{
		SCZO = cond(Mem0[ds:5100:word16] - 0x00);
		if (Test(NE,Z))
			ax = Mem0[ds:5112:word16];
		else
		{
			ax -= ax;
			SCZO = cond(ax);
		}
		ss->*((word16) bp - 0x0A) = ax;
		SCZO = cond(ss->*((word16) bp - 0x0C) - 0xFF);
		if (Test(EQ,Z))
		{
			es_bx = ss->*((word16) bp + 6);
			SCZO = cond(es->*((word16) bx + 0x0A) - 50277);
			if (Test(LE,SZO))
			{
				if (Test(LT,SO))
					goto l38D6_00D7;
				SCZO = cond(es->*((word16) bx + 8) - 0x3601);
				if (Test(ULT,C))
				{
l38D6_00D7:
					(ss->*((word16) bp - 0x0C)).u0 = 0x14;
					goto l38D6_0122;
				}
			}
			SCZO = cond(es->*((word16) bx + 0x0A) - 21515);
			if (Test(LT,SO))
				goto l38D6_011D;
			if (Test(LE,SZO))
			{
				SCZO = cond(es->*((word16) bx + 8) - ~0x1C00);
				if (Test(ULE,CZ))
					goto l38D6_011D;
			}
			goto l38D6_00D7;
		}
	}
	else
	{
		SCZO = cond(Mem0[ds:5100:word16] - 0x00);
		if (Test(NE,Z))
		{
			ax |= ax;
			SZ = cond(ax);
			O = false;
			C = false;
			if (Test(NE,Z))
			{
				SCZO = cond(ss->*((word16) bp - 0x0C) - 0xFF);
				if (Test(NE,Z))
				{
					ax = (word16) ax + 1;
					v19 = ss->*((word16) bp - 0x0C) - ax;
					ss->*((word16) bp - 0x0C) = v19;
					SCZO = cond(v19);
				}
			}
			ax = Mem0[ds:5112:word16];
			ss->*((word16) bp - 0x0A) = ax;
		}
		SCZO = cond(ss->*((word16) bp - 0x0C) - 0xFF);
		if (Test(EQ,Z))
		{
			ax = bx;
			dx = es;
			ax = (word16) ax + 8;
			SCZO = cond(ax);
			di = bp - 8;
			si = ax;
			sp -= 2;
			ss->*sp = ss;
			es = ss->*sp;
			sp = (word16) sp + 2;
			sp -= 2;
			ss->*sp = ds;
			ds = dx;
			v24 = ds->*si;
			es->*di = v24;
			si = (word16) si + 2;
			di = (word16) di + 2;
			v25 = ds->*si;
			es->*di = v25;
			si = (word16) si + 2;
			di = (word16) di + 2;
			v26 = ds->*si;
			es->*di = v26;
			si = (word16) si + 2;
			di = (word16) di + 2;
			v27 = ds->*si;
			es->*di = v27;
			si = (word16) si + 2;
			di = (word16) di + 2;
			ds = ss->*sp;
			sp = (word16) sp + 2;
			v28 = ss->*((word16) bp - 2);
			sp -= 2;
			ss->*sp = v28;
			v29 = ss->*((word16) bp - 4);
			sp -= 2;
			ss->*sp = v29;
			v30 = ss->*((word16) bp - 6);
			sp -= 2;
			ss->*sp = v30;
			v31 = ss->*((word16) bp - 8);
			sp -= 2;
			ss->*sp = v31;
			fn400D_00DE();
			sp = (word16) sp + 8;
			ss->*((word16) bp - 0x0E) = ax;
			ax |= ax;
			SZ = cond(ax);
			O = false;
			C = false;
			if (Test(NE,Z))
			{
				v32 = Mem0[ds:9200:word16];
				sp -= 2;
				ss->*sp = v32;
				v33 = Mem0[ds:0x23EE:word16];
				sp -= 2;
				ss->*sp = v33;
				v34 = Mem0[ds:9196:word16];
				sp -= 2;
				ss->*sp = v34;
				v35 = Mem0[ds:9194:word16];
				sp -= 2;
				ss->*sp = v35;
				v36 = ss->*((word16) bp - 2);
				sp -= 2;
				ss->*sp = v36;
				v37 = ss->*((word16) bp - 4);
				sp -= 2;
				ss->*sp = v37;
				v38 = ss->*((word16) bp - 6);
				sp -= 2;
				ss->*sp = v38;
				v39 = ss->*((word16) bp - 8);
				sp -= 2;
				ss->*sp = v39;
				fn400D_0006();
				sp = (word16) sp + 16;
				ss->*((word16) bp - 16) = ax;
				ax |= ax;
				SZ = cond(ax);
				O = false;
				C = false;
				if (Test(NE,Z))
					goto l38D6_00D7;
			}
			v40 = Mem0[ds:0x23F8:word16];
			sp -= 2;
			ss->*sp = v40;
			v41 = Mem0[ds:0x23F6:word16];
			sp -= 2;
			ss->*sp = v41;
			v42 = Mem0[ds:0x23F4:word16];
			sp -= 2;
			ss->*sp = v42;
			v43 = Mem0[ds:0x23F2:word16];
			sp -= 2;
			ss->*sp = v43;
			v44 = ss->*((word16) bp - 2);
			sp -= 2;
			ss->*sp = v44;
			v45 = ss->*((word16) bp - 4);
			sp -= 2;
			ss->*sp = v45;
			v46 = ss->*((word16) bp - 6);
			sp -= 2;
			ss->*sp = v46;
			v47 = ss->*((word16) bp - 8);
			sp -= 2;
			ss->*sp = v47;
			fn400D_0096();
			sp = (word16) sp + 16;
			ss->*((word16) bp - 16) = ax;
			ax |= ax;
			SZ = cond(ax);
			O = false;
			C = false;
			if (Test(EQ,Z))
			{
l38D6_011D:
				(ss->*((word16) bp - 0x0C)).u0 = 0x0A;
				goto l38D6_0122;
			}
			goto l38D6_00D7;
		}
	}
l38D6_0122:
	SCZO = cond(ss->*((word16) bp - 0x0A) - 0x00);
	if (Test(NE,Z))
	{
		ax = ss->*((word16) bp - 0x0A);
		ax = (word16) ax + 1;
		v22 = Mem0[ss:bp + -0x0C:word16] + ax;
		ss->*((word16) bp - 0x0C) = v22;
		SCZO = cond(v22);
	}
	es_bx = ss->*((word16) bp + 6);
	ax = ss->*((word16) bp - 0x0C);
	es->*((word16) bx + 2) = ax;
	ax = ss->*((word16) bp - 0x0A);
	es->*((word16) bx + 4) = ax;
	si = ss->*sp;
	sp = (word16) sp + 2;
	di = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 38D6:0146: define fn38D6_0146
// Called from:
//      fn21DC_0DE4
//      fn38D6_0DFE
define fn38D6_0146
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x0E;
	SCZO = cond(sp);
	sp -= 2;
	ss->*sp = si;
	(ss->*((word16) bp - 0x0A)).u0 = 0x00;
	while (true)
	{
		bx = ss->*((word16) bp - 0x0A);
		bx <<= 0x01;
		bx <<= 0x01;
		es_si = Mem0[ds:13718:segptr32];
		ax = Mem0[es:bx + si:word16];
		dx = es->*((word16) si + ((word16) bx + 2));
		ss->*((word16) bp - 0x0E) = ax;
		ss->*((word16) bp - 0x0C) = dx;
		ax |= dx;
		SZ = cond(ax);
		O = false;
		C = false;
		if (Test(EQ,Z))
			break;
		ax = ss->*((word16) bp - 0x0E);
		ss->*((word16) bp - 8) = ax;
		ss->*((word16) bp - 6) = dx;
		ax = ss->*((word16) bp + 6);
		dx = ss->*((word16) bp + 8);
		ss->*((word16) bp - 4) = ax;
		ss->*((word16) bp - 2) = dx;
		while (true)
		{
			es_bx = ss->*((word16) bp - 8);
			al = es->*bx;
			ss->*((word16) bp - 0x0E) = al;
			al |= al;
			SZ = cond(al);
			O = false;
			C = false;
			if (Test(EQ,Z))
				break;
			es_bx = ss->*((word16) bp - 4);
			al = ss->*((word16) bp - 0x0E);
			SCZO = cond(es->*bx - al);
			if (Test(NE,Z))
				break;
			v23 = (word16) (ss->*((word16) bp - 8)) + 1;
			ss->*((word16) bp - 8) = v23;
			v24 = (word16) (ss->*((word16) bp - 4)) + 1;
			ss->*((word16) bp - 4) = v24;
			SZO = cond(v24);
		}
		es_bx = ss->*((word16) bp - 8);
		SCZO = cond(es->*bx - 0x3D);
		if (Test(EQ,Z))
		{
			es_bx = ss->*((word16) bp - 4);
			SCZO = cond(es->*bx - 0x00);
			if (Test(EQ,Z))
			{
				v20 = (word16) (ss->*((word16) bp - 8)) + 1;
				ss->*((word16) bp - 8) = v20;
				SZO = cond(v20);
				break;
			}
		}
		v22 = (word16) (ss->*((word16) bp - 0x0A)) + 1;
		ss->*((word16) bp - 0x0A) = v22;
		SZO = cond(v22);
	}
	bx = ss->*((word16) bp - 0x0A);
	bx <<= 0x01;
	bx <<= 0x01;
	es_si = Mem0[ds:13718:segptr32];
	ax = Mem0[es:bx + si:word16];
	ax |= es->*((word16) si + ((word16) bx + 2));
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(EQ,Z))
	{
		ax.u0 = 24466;
		dx = ds;
		si = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
	}
	else
	{
		ax = ss->*((word16) bp - 8);
		dx = ss->*((word16) bp - 6);
		si = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
	}
}

// 38D6:0222: define fn38D6_0222
// Called from:
//      fn38D6_0304
//      fn38D6_03DC
//      fn3CEE_8634
define fn38D6_0222
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x04;
	sp -= 2;
	ss->*sp = si;
	SCZO = cond(ss->*((word16) bp + 0x0A) - 100);
	if (Test(UGE,C))
	{
		SCZO = cond(ss->*((word16) bp + 0x0A) - 2999);
		if (Test(ULE,CZ))
		{
			SCZO = cond(ss->*((word16) bp + 8) - 0x01);
			if (Test(UGE,C))
			{
				SCZO = cond(ss->*((word16) bp + 8) - 0x0C);
				if (Test(ULE,CZ))
				{
					SCZO = cond(ss->*((word16) bp + 6) - 0x01);
					if (Test(UGE,C))
					{
						bx = ss->*((word16) bp + 8);
						bx <<= 0x01;
						ax = ss->*((word16) bp + 6);
						SCZO = cond(ds->*((word16) bx + 0x00002414) - ax);
						if (Test(UGE,C))
							goto l38D6_028C;
					}
				}
			}
		}
	}
	SCZO = cond(ss->*((word16) bp + 6) - 0x1D);
	if (Test(NE,Z))
	{
l38D6_0284:
		ax -= ax;
		SCZO = cond(ax);
		dx_ax = (word32) ax;
		si = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
		return;
	}
	SCZO = cond(ss->*((word16) bp + 8) - 0x02);
	if (Test(NE,Z))
		goto l38D6_0284;
	SZP = cond(ss->*((word16) bp + 0x0A) & 0x03);
	O = false;
	C.u0 = false;
	if (Test(EQ,Z))
	{
		ax = ss->*((word16) bp + 0x0A);
		dx -= dx;
		cx.u0 = 100;
		v19 = dx_ax;
		dx.u2 = (uint16) (v19 % cx);
		ax.u2 = (uint16) (v19 /u cx);
		dx |= dx;
		SZ = cond(dx);
		O = false;
		C.u0 = false;
		if (Test(NE,Z))
		{
l38D6_028C:
			SCZO = cond(ss->*((word16) bp + 8) - 0x03);
			if (Test(ULT,C))
			{
				v22 = ss->*((word16) bp + 0x0A) - 0x01;
				ss->*((word16) bp + 0x0A) = v22;
				SZO = cond(v22);
			}
			(ss->*((word16) bp - 4)).u0 = 0x42E4;
			(ss->*((word16) bp - 2)).u0 = 0x1A;
			ax.u0 = 0x016D;
			dx_ax = (word32) ax;
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = ax;
			ax -= ax;
			SCZO = cond(ax);
			sp -= 2;
			ss->*sp = ax;
			v24 = ss->*((word16) bp + 0x0A);
			sp -= 2;
			ss->*sp = v24;
			fn3CEE_05A6();
			sp = (word16) sp + 8;
			cx = ax;
			ax = ss->*((word16) bp + 0x0A);
			bx = dx;
			dx -= dx;
			si.u0 = 100;
			v25 = dx_ax;
			dx.u2 = (uint16) (v25 % si);
			ax.u2 = (uint16) (v25 /u si);
			cx -= ax;
			SCZO = cond(cx);
			bx = bx - 0x00 - C;
			ax = ss->*((word16) bp + 0x0A);
			dx -= dx;
			si.u0 = 400;
			v26 = dx_ax;
			dx.u2 = (uint16) (v26 % si);
			ax.u2 = (uint16) (v26 /u si);
			cx += ax;
			SCZO = cond(cx);
			bx = bx + 0x00 + C;
			ax = ss->*((word16) bp + 0x0A);
			ax >>= 0x01;
			ax >>= 0x01;
			cx += ax;
			SCZO = cond(cx);
			bx = bx + 0x00 + C;
			v27 = Mem0[ss:bp + -4:word16] + cx;
			ss->*((word16) bp - 4) = v27;
			SCZO = cond(v27);
			v28 = Mem0[ss:bp + -2:word16] + bx + C;
			ss->*((word16) bp - 2) = v28;
			bx = ss->*((word16) bp + 8);
			bx <<= 0x01;
			ax = ds->*((word16) bx + 9210);
			ax += Mem0[ss:bp + 6:word16];
			dx -= dx;
			v29 = Mem0[ss:bp + -4:word16] + ax;
			ss->*((word16) bp - 4) = v29;
			SCZO = cond(v29);
			v30 = Mem0[ss:bp + -2:word16] + dx + C;
			ss->*((word16) bp - 2) = v30;
			SCZO = cond(v30);
			ax = ss->*((word16) bp - 4);
			dx = ss->*((word16) bp - 2);
			si = ss->*sp;
			sp = bp;
			bp = ss->*sp;
			sp = (word16) sp + 2;
			return;
		}
	}
	ax = ss->*((word16) bp + 0x0A);
	dx -= dx;
	cx.u0 = 400;
	v21 = dx_ax;
	dx.u2 = (uint16) (v21 % cx);
	ax.u2 = (uint16) (v21 /u cx);
	dx |= dx;
	SZ = cond(dx);
	O = false;
	C.u0 = false;
	if (Test(NE,Z))
		goto l38D6_0284;
	goto l38D6_028C;
}

// 38D6:0304: define fn38D6_0304
// Called from:
//      fn2644_0D70
define fn38D6_0304
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x12;
	SCZO = cond(sp);
	ss->*((word16) bp - 11) = 0x2A;
	ax = bp - 0x0C;
	sp -= 2;
	ss->*sp = ss;
	sp -= 2;
	ss->*sp = ax;
	fn2017_042D();
	sp = (word16) sp + 4;
	ah = (byte) (ss->*((word16) bp - 7));
	al -= al;
	cl = (byte) (ss->*((word16) bp - 8));
	ch -= ch;
	ax = (word16) ax + cx;
	ss->*((word16) bp - 0x0E) = ax;
	al = (byte) (ss->*((word16) bp - 5));
	ah -= ah;
	SCZO = cond(ah);
	ss->*((word16) bp - 16) = ax;
	al = (byte) (ss->*((word16) bp - 6));
	ss->*((word16) bp - 18) = ax;
	v13 = ss->*((word16) bp - 0x0E);
	sp -= 2;
	ss->*sp = v13;
	v14 = ss->*((word16) bp - 16);
	sp -= 2;
	ss->*sp = v14;
	sp -= 2;
	ss->*sp = ax;
	fn38D6_0222();
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 38D6:0348: define fn38D6_0348
// Called from:
//      fn38D6_03DC
define fn38D6_0348
{
	sp = fp;
	Top = 0;
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_115536 Eq_115543::*) bp;
	bp = sp;
	sp -= 0x04;
	SCZO = cond(sp);
	(ss->*bp).tFFFFFFFE.u0 = 0x00;
	while (true)
	{
		es_bx.u3 = (ss->*bp).t0006.u3;
		al.u1 = (es->*bx).u1;
		(ss->*bp).tFFFFFFFC.u1 = (byte) al;
		al |= al;
		SZ = cond(al);
		O = false;
		C = false;
		if (Test(EQ,Z))
			break;
		SCZO = cond((ss->*bp).tFFFFFFFC.u1 - 0x30);
		if (Test(UGE,C))
		{
			SCZO = cond((ss->*bp).tFFFFFFFC.u1 - 0x39);
			if (Test(ULE,CZ))
				break;
		}
		v16 = (ss->*bp).t0006.u0 + 0x01;
		(ss->*bp).t0006.u0 = (ui16) v16;
		SZO = cond(v16);
	}
	while (true)
	{
		es_bx.u3 = (ss->*bp).t0006.u3;
		al.u1 = (es->*bx).u1;
		(ss->*bp).tFFFFFFFC.u1 = (byte) al;
		SCZO = cond(al - 0x30);
		if (Test(ULT,C))
			break;
		SCZO = cond((ss->*bp).tFFFFFFFC.u1 - 0x39);
		if (Test(UGT,CZ))
			break;
		ax.u0 = (ss->*bp).tFFFFFFFE.u0;
		cx = ax;
		ax <<= 0x01;
		ax <<= 0x01;
		ax += cx;
		ax <<= 0x01;
		cl.u1 = (ss->*bp).tFFFFFFFC.u1;
		ch -= ch;
		ax += cx;
		ax -= 0x30;
		SCZO = cond(ax);
		(ss->*bp).tFFFFFFFE.u0 = (ui16) ax;
		v23 = (ss->*bp).t0006.u0 + 0x01;
		(ss->*bp).t0006.u0 = (ui16) v23;
		SZO = cond(v23);
	}
	es_bx.u3 = (ss->*bp).t000A.u3;
	ax.u0 = (ss->*bp).tFFFFFFFE.u0;
	(es->*bx).u0 = (ui16) ax;
	ax.u0 = (ss->*bp).t0006.u0;
	dx = (ss->*bp).w0008;
	sp = bp;
	bp = (struct Eq_115536 Eq_115543::*) (ss->*sp).ptr0000;
	sp = (struct Eq_115536 Eq_115543::*) &sp->ptr0000;
}

// 38D6:03B8: define fn38D6_03B8
// Called from:
//      fn38D6_06FA
define fn38D6_03B8
{
	sp = fp;
	Top = 0;
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_115703 Eq_115710::*) bp;
	bp = sp;
	ax = (ss->*bp).w000A;
	dx_ax = (int32) ax;
	cx = 0x0A;
	v10 = dx_ax;
	ax = (int16) (v10 /16 cx);
	al += 0x30;
	es_bx.u1 = (ss->*bp).t0006.u1;
	(es->*bx).b0000 = al;
	ax = (ss->*bp).w000A;
	dx_ax = (int32) ax;
	v16 = dx_ax;
	dx = (int16) (v16 % cx);
	ax = (int16) (v16 /16 cx);
	dl += 0x30;
	SCZO = cond(dl);
	(es->*bx).b0001 = dl;
	bp = (struct Eq_115703 Eq_115710::*) (ss->*sp).ptr0000;
	sp = (struct Eq_115703 Eq_115710::*) &sp->ptr0000;
}

// 38D6:03DC: define fn38D6_03DC
// Called from:
//      fn2644_17C8
define fn38D6_03DC
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x2A;
	SCZO = cond(sp);
	sp -= 2;
	ss->*sp = si;
	v8 = ss->*((word16) bp + 0x0A);
	sp -= 2;
	ss->*sp = v8;
	v9 = ss->*((word16) bp + 8);
	sp -= 2;
	ss->*sp = v9;
	v10 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v10;
	ax = bp - 0x0022;
	sp -= 2;
	ss->*sp = ss;
	sp -= 2;
	ss->*sp = ax;
	fn2017_02EC();
	sp = (word16) sp + 0x0A;
	si = ss->*((word16) bp + 0x0A);
	Mem0[ss:bp - 0x0022 + si:byte] = 0x00;
	ax = bp - 0x0022;
	ss->*((word16) bp - 42) = ax;
	ss->*((word16) bp - 40) = ss;
	(ss->*((word16) bp - 38)).u0 = 0x00;
	(ss->*((word16) bp - 36)).u0 = 0x00;
	(ss->*((word16) bp - 2)).u0 = 0x00;
	ax = ss->*((word16) bp + 16);
	v15 = ax;
	SCZO = cond(ax - 0x06);
	if (Test(ULE,CZ))
	{
		ax += ax;
		SCZO = cond(ax);
		v13 = bx;
		bx = ax;
		ax = v13;
		switch (v15)
		{
		case 0x00:
			es_bx = ss->*((word16) bp + 6);
			al = es->*bx;
			ah -= ah;
			cx = ax;
			ax <<= 0x01;
			ax <<= 0x01;
			ax += cx;
			ax <<= 0x01;
			cl = (byte) (es->*((word16) bx + 1));
			ch -= ch;
			cx += ax;
			ax = cx;
			cx <<= 0x01;
			cx <<= 0x01;
			cx += ax;
			cx <<= 0x01;
			al = es->*((word16) bx + 2);
			ah -= ah;
			cx += ax;
			ax = cx;
			cx <<= 0x01;
			cx <<= 0x01;
			cx += ax;
			cx <<= 0x01;
			al = es->*((word16) bx + 3);
			ah -= ah;
			cx += ax;
			cx = (word16) cx + 12208;
			ss->*((word16) bp - 2) = cx;
			al = es->*((word16) bx + 4);
			cx = ax;
			ax <<= 0x01;
			ax <<= 0x01;
			ax += cx;
			ax <<= 0x01;
			cl = (byte) (es->*((word16) bx + 5));
			ch -= ch;
			ax += cx;
			ax -= 0x0210;
			ss->*((word16) bp - 36) = ax;
			al = es->*((word16) bx + 6);
			ah -= ah;
			cx = ax;
			ax <<= 0x01;
			ax <<= 0x01;
			ax += cx;
			ax <<= 0x01;
			cl = (byte) (es->*((word16) bx + 7));
			ch -= ch;
			ax += cx;
			ax -= 0x0210;
			SCZO = cond(ax);
			ss->*((word16) bp - 38) = ax;
			goto l38D6_055A;
		case 0x01:
			ax = bp - 36;
			sp -= 2;
			ss->*sp = ss;
			sp -= 2;
			ss->*sp = ax;
			v20 = ss->*((word16) bp - 40);
			sp -= 2;
			ss->*sp = v20;
			v21 = ss->*((word16) bp - 42);
			sp -= 2;
			ss->*sp = v21;
			fn38D6_0348();
			sp = (word16) sp + 8;
			SCZO = cond(sp);
			ss->*((word16) bp - 42) = ax;
			ss->*((word16) bp - 40) = dx;
			ax = bp - 38;
			goto l38D6_0447;
		case 0x02:
			ax = bp - 2;
			sp -= 2;
			ss->*sp = ss;
			sp -= 2;
			ss->*sp = ax;
			v29 = ss->*((word16) bp - 40);
			sp -= 2;
			ss->*sp = v29;
			v30 = ss->*((word16) bp - 42);
			sp -= 2;
			ss->*sp = v30;
			fn38D6_0348();
			sp = (word16) sp + 8;
			SCZO = cond(sp);
			ss->*((word16) bp - 42) = ax;
			ss->*((word16) bp - 40) = dx;
			ax = bp - 36;
			sp -= 2;
			ss->*sp = ss;
			sp -= 2;
			ss->*sp = ax;
			sp -= 2;
			ss->*sp = dx;
			v31 = ss->*((word16) bp - 42);
			sp -= 2;
			ss->*sp = v31;
			fn38D6_0348();
			sp = (word16) sp + 8;
			SCZO = cond(sp);
			ss->*((word16) bp - 42) = ax;
			ss->*((word16) bp - 40) = dx;
			ax = bp - 38;
			break;
		case 0x03:
		case 0x04:
		case 0x05:
		case 0x06:
			ax = bp - 38;
			sp -= 2;
			ss->*sp = ss;
			sp -= 2;
			ss->*sp = ax;
			v27 = ss->*((word16) bp - 40);
			sp -= 2;
			ss->*sp = v27;
			v28 = ss->*((word16) bp - 42);
			sp -= 2;
			ss->*sp = v28;
			fn38D6_0348();
			sp = (word16) sp + 8;
			SCZO = cond(sp);
			ss->*((word16) bp - 42) = ax;
			ss->*((word16) bp - 40) = dx;
			ax = bp - 36;
l38D6_0447:
			sp -= 2;
			ss->*sp = ss;
			sp -= 2;
			ss->*sp = ax;
			v23 = ss->*((word16) bp - 40);
			sp -= 2;
			ss->*sp = v23;
			v24 = ss->*((word16) bp - 42);
			sp -= 2;
			ss->*sp = v24;
			fn38D6_0348();
			sp = (word16) sp + 8;
			SCZO = cond(sp);
			ss->*((word16) bp - 42) = ax;
			ss->*((word16) bp - 40) = dx;
			ax = bp - 2;
			break;
		}
		sp -= 2;
		ss->*sp = ss;
		sp -= 2;
		ss->*sp = ax;
		v25 = ss->*((word16) bp - 40);
		sp -= 2;
		ss->*sp = v25;
		v26 = ss->*((word16) bp - 42);
		sp -= 2;
		ss->*sp = v26;
		fn38D6_0348();
		sp = (word16) sp + 8;
		SCZO = cond(sp);
		ss->*((word16) bp - 42) = ax;
		ss->*((word16) bp - 40) = dx;
	}
l38D6_055A:
	SCZO = cond(ss->*((word16) bp - 38) - 0x00);
	if (Test(EQ,Z))
	{
		SCZO = cond(ss->*((word16) bp - 36) - 0x00);
		if (Test(EQ,Z))
		{
			SCZO = cond(ss->*((word16) bp - 2) - 0x00);
			if (Test(EQ,Z))
			{
				es_bx = ss->*((word16) bp + 0x0C);
				ax -= ax;
				SCZO = cond(ax);
				es->*((word16) bx + 2) = ax;
				es->*bx = ax;
				goto l38D6_05A5;
			}
		}
	}
	ax = ds->t23E0;
	SCZO = cond(ss->*((word16) bp - 2) - ax);
	if (Test(ULT,C))
	{
		v19 = (word32) (ss->*((word16) bp - 2)) + 2000;
		ss->*((word16) bp - 2) = v19;
		SCZO = cond(v19);
	}
	else
	{
		SCZO = cond(ss->*((word16) bp - 2) - 100);
		if (Test(LT,SO))
		{
			v40 = (word32) (ss->*((word16) bp - 2)) + 1900;
			ss->*((word16) bp - 2) = v40;
			SCZO = cond(v40);
		}
	}
	v34 = ss->*((word16) bp - 2);
	sp -= 2;
	ss->*sp = v34;
	v35 = ss->*((word16) bp - 36);
	sp -= 2;
	ss->*sp = v35;
	v36 = ss->*((word16) bp - 38);
	sp -= 2;
	ss->*sp = v36;
	fn38D6_0222();
	sp = (word16) sp + 6;
	es_bx = ss->*((word16) bp + 0x0C);
	es->*bx = ax;
	es->*((word16) bx + 2) = dx;
	ax |= dx;
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(EQ,Z))
	{
		ax -= ax;
		SCZO = cond(ax);
		si = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
		return;
	}
l38D6_05A5:
	ax.u0 = 0x01;
	si = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 38D6:05C4: define fn38D6_05C4
// Called from:
//      fn38D6_06FA
define fn38D6_05C4
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x0C;
	ax = ss->*((word16) bp + 6);
	dx = ss->*((word16) bp + 8);
	ss->*((word16) bp - 0x0A) = ax;
	ss->*((word16) bp - 8) = dx;
	SCZO = cond(dx - 0x1A);
	if (Test(LE,SZO))
	{
		if (Test(LT,SO))
		{
l38D6_05E2:
			es_bx = ss->*((word16) bp + 0x0A);
			(es->*bx).u0 = 0x00;
			es_bx = ss->*((word16) bp + 0x0E);
			(es->*bx).u0 = 0x00;
			es_bx = ss->*((word16) bp + 18);
			(es->*bx).u0 = 0x00;
			es_bx = ss->*((word16) bp + 22);
			(es->*bx).u0 = 0x00;
			sp = bp;
			bp = ss->*sp;
			sp = &sp.u7->u1.t0002.u0;
			return;
		}
		SCZO = cond(ax - 0x42E4);
		if (Test(ULT,C))
			goto l38D6_05E2;
	}
	v15 = ss->*((word16) bp - 0x0A) - 0x42E4;
	ss->*((word16) bp - 0x0A) = v15;
	SCZO = cond(v15);
	v16 = ss->*((word16) bp - 8) - 0x1A - C;
	ss->*((word16) bp - 8) = v16;
	SCZO = cond(v16);
	ax.u0 = 0x05B5;
	dx_ax.u0 = (int32) ax;
	sp -= 2;
	ss->*sp = dx;
	sp -= 2;
	ss->*sp = ax;
	ax = ss->*((word16) bp - 0x0A);
	dx = ss->*((word16) bp - 8);
	cl = 0x02;
	do
	{
		ax <<= 0x01;
		SCZO = cond(ax);
		v19 = (dx & 0x01 << 0x10 - 0x01) != 0x00;
		dx = __rcl<word16,byte>(dx, 0x01, C);
		C = v19;
		--cl;
		SZO = cond(cl);
	} while (Test(NE,Z));
	sp -= 2;
	ss->*sp = dx;
	sp -= 2;
	ss->*sp = ax;
	fn3CEE_0500();
	sp = (word16) sp + 8;
	ss->*((word16) bp - 2) = ax;
	dx -= dx;
	cx.u0 = 0x016D;
	dx_ax = cx *s32 ax;
	cx = ss->*((word16) bp - 0x0A);
	cx -= ax;
	ax = ss->*((word16) bp - 2);
	dx -= dx;
	bx.u0 = 100;
	v22 = dx_ax;
	dx = (uint16) (v22 % bx);
	ax = (uint16) (v22 /u bx);
	cx += ax;
	ax = ss->*((word16) bp - 2);
	dx -= dx;
	bx.u0 = 400;
	v23 = dx_ax;
	dx = (uint16) (v23 % bx);
	ax = (uint16) (v23 /u bx);
	cx -= ax;
	ax = ss->*((word16) bp - 2);
	ax >>= 0x01;
	ax >>= 0x01;
	cx -= ax;
	ss->*((word16) bp - 4) = cx;
	SZP = cond(ss->*((word16) bp - 2) & 0x03);
	O = false;
	C.u0 = false;
	if (Test(EQ,Z))
	{
		ax = ss->*((word16) bp - 2);
		dx -= dx;
		cx.u0 = 100;
		v26 = dx_ax;
		dx = (uint16) (v26 % cx);
		ax = (uint16) (v26 /u cx);
		dx |= dx;
		SZ = cond(dx);
		O = false;
		C.u0 = false;
		if (Test(NE,Z))
		{
l38D6_0686:
			v30 = (word80) (ss->*((word16) bp - 4)) + 1;
			ss->*((word16) bp - 4) = v30;
			SZO = cond(v30);
			goto l38D6_0689;
		}
	}
	ax = ss->*((word16) bp - 2);
	dx -= dx;
	cx = bx;
	v28 = dx_ax;
	dx = (uint16) (v28 % cx);
	ax = (uint16) (v28 /u cx);
	dx |= dx;
	SZ = cond(dx);
	O = false;
	C.u0 = false;
	if (Test(NE,Z))
	{
		SCZO = cond(ss->*((word16) bp - 4) - 0x3B);
		if (Test(ULE,CZ))
		{
l38D6_0689:
			(ss->*((word16) bp - 6)).u0 = 0x01;
			while (true)
			{
				bx = ss->*((word16) bp - 6);
				bx <<= 0x01;
				ax = ss->*((word16) bp - 4);
				SCZO = cond(ds->*((byte) bx.u0 + 9262) - ax);
				if (Test(UGE,C))
					break;
				v34 = (word80) (ss->*((word16) bp - 6)) + 1;
				ss->*((word16) bp - 6) = v34;
				SZO = cond(v34);
			}
			bx = ss->*((word16) bp - 6);
			bx <<= 0x01;
			ax -= ds->*((byte) bx.u0 + 0x0000242C);
			ss->*((word16) bp - 0x0C) = ax;
			SCZO = cond(ss->*((word16) bp - 6) - 0x0C);
			if (Test(UGT,CZ))
			{
				v32 = ss->*((word16) bp - 6) - 0x0C;
				ss->*((word16) bp - 6) = v32;
				SCZO = cond(v32);
				v33 = (word80) (ss->*((word16) bp - 2)) + 1;
				ss->*((word16) bp - 2) = v33;
				SZO = cond(v33);
			}
			es_bx = ss->*((word16) bp + 0x0A);
			ax = ss->*((word16) bp - 0x0C);
			es->*bx.u0 = ax;
			es_bx = ss->*((word16) bp + 0x0E);
			ax = ss->*((word16) bp - 6);
			es->*bx.u0 = ax;
			es_bx = ss->*((word16) bp + 18);
			ax = ss->*((word16) bp - 2);
			es->*bx.u0 = ax;
			ax.u0 = 0x07;
			dx_ax.u0 = (int32) ax;
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = ax;
			ax = ss->*((word16) bp - 0x0A);
			dx = ss->*((word16) bp - 8);
			--ax;
			SCZO = cond(ax);
			dx = dx - 0x00 - C;
			SCZO = cond(dx);
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = ax;
			fn3CEE_05DA();
			ax = (byte) ax.u0 + 1;
			SZO = cond(ax);
			es_bx = ss->*((word16) bp + 22);
			es->*bx.u0 = ax;
			sp = bp;
			bp = ss->*sp;
			sp = &sp.u7->u1.t0002.u0;
			return;
		}
	}
	goto l38D6_0686;
}

// 38D6:06FA: define fn38D6_06FA
// Called from:
//      fn1825_6168
//      fn2644_0D70
//      fn2EB3_060C
//      fn3431_133C
//      fn3431_1624
define fn38D6_06FA
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x12;
	sp -= 2;
	ss->*sp = si;
	SCZO = cond(ss->*((word16) bp + 0x0E) - 0x00);
	if (Test(NE,Z))
	{
		SCZO = cond(ds->w20A6 - 0x00);
		if (Test(NE,Z))
		{
			ax.u0 = 0x0A;
l38D6_0717:
			ss->*((word16) bp - 18) = ax;
			ax = ss->*((word16) bp + 0x0A);
			ax |= ss->*((word16) bp + 0x0C);
			SZ = cond(ax);
			O = false;
			C = false;
			if (Test(EQ,Z))
			{
				v16 = ss->*((word16) bp - 18);
				sp -= 2;
				ss->*sp = v16;
				ax.u0 = 0x20;
				sp -= 2;
				ss->*sp = ax;
				v17 = ss->*((word16) bp + 8);
				sp -= 2;
				ss->*sp = v17;
				v18 = ss->*((word16) bp + 6);
				sp -= 2;
				ss->*sp = v18;
				fn2017_0228();
				sp = (word16) sp + 8;
				SCZO = cond(sp);
				goto l38D6_0837;
			}
			ax = bp - 8;
			sp -= 2;
			ss->*sp = ss;
			sp -= 2;
			ss->*sp = ax;
			ax = bp - 2;
			sp -= 2;
			ss->*sp = ss;
			sp -= 2;
			ss->*sp = ax;
			ax = bp - 6;
			sp -= 2;
			ss->*sp = ss;
			sp -= 2;
			ss->*sp = ax;
			ax = bp - 0x0E;
			sp -= 2;
			ss->*sp = ss;
			sp -= 2;
			ss->*sp = ax;
			v14 = ss->*((word16) bp + 0x0C);
			sp -= 2;
			ss->*sp = v14;
			v15 = ss->*((word16) bp + 0x0A);
			sp -= 2;
			ss->*sp = v15;
			fn38D6_05C4();
			sp = (word16) sp + 20;
			SCZO = cond(ss->*((word16) bp + 0x0E) - 0x00);
			if (Test(NE,Z))
			{
				SCZO = cond(ss->*((word16) bp + 0x0E) - 0x01);
				if (Test(EQ,Z))
				{
					(ss->*((word16) bp - 4)).u0 = 0x03;
					(ss->*((word16) bp - 16)).u0 = 0x00;
				}
				else
				{
					SCZO = cond(ss->*((word16) bp + 0x0E) - 0x02);
					if (Test(EQ,Z))
					{
						SCZO = cond(ds->w20A6 - 0x00);
						if (Test(NE,Z))
							ax.u0 = 0x08;
						else
							ax.u0 = 0x06;
						ss->*((word16) bp - 4) = ax;
						SCZO = cond(ds->w20A6 - 0x00);
						if (Test(NE,Z))
							ax.u0 = 0x05;
						else
							ax.u0 = 0x03;
						ss->*((word16) bp - 16) = ax;
l38D6_0756:
						(ss->*((word16) bp - 0x0A)).u0 = 0x00;
l38D6_07AB:
						v23 = ss->*((word16) bp - 0x0E);
						sp -= 2;
						ss->*sp = v23;
						ax = ss->*((word16) bp - 4);
						ax += Mem0[ss:bp + 6:word16];
						SCZO = cond(ax);
						dx = ss->*((word16) bp + 8);
						sp -= 2;
						ss->*sp = dx;
						sp -= 2;
						ss->*sp = ax;
						fn38D6_03B8();
						sp = (word16) sp + 6;
						v25 = ss->*((word16) bp - 6);
						sp -= 2;
						ss->*sp = v25;
						ax = ss->*((word16) bp - 16);
						ax += Mem0[ss:bp + 6:word16];
						SCZO = cond(ax);
						dx = ss->*((word16) bp + 8);
						sp -= 2;
						ss->*sp = dx;
						sp -= 2;
						ss->*sp = ax;
						fn38D6_03B8();
						sp = (word16) sp + 6;
						SCZO = cond(ss->*((word16) bp + 0x0E) - 0x00);
						if (Test(NE,Z))
						{
							SCZO = cond(ds->w20A6 - 0x00);
							if (Test(EQ,Z))
							{
l38D6_0803:
								ax = ss->*((word16) bp - 2);
								dx -= dx;
								cx = 100;
								v30 = dx_ax;
								dx = (uint16) (v30 % cx);
								ax = (uint16) (v30 /u cx);
								sp -= 2;
								ss->*sp = dx;
								ax = ss->*((word16) bp - 0x0A);
								ax += Mem0[ss:bp + 6:word16];
								SCZO = cond(ax);
								dx = ss->*((word16) bp + 8);
								sp -= 2;
								ss->*sp = dx;
								sp -= 2;
								ss->*sp = ax;
								fn38D6_03B8();
								sp = (word16) sp + 6;
								SCZO = cond(sp);
l38D6_0837:
								SCZO = cond(ss->*((word16) bp + 0x0E) - 0x00);
								if (Test(EQ,Z))
								{
l38D6_086E:
									bx = ss->*((word16) bp - 18);
									es_si = ss->*((word16) bp + 6);
									Mem0[es:bx + si:byte] = 0x00;
									si = ss->*sp;
									sp = bp;
									bp = ss->*sp;
									sp = (word16) sp + 2;
									return;
								}
								else
								{
									bx = ss->*((word16) bp + 0x0E);
									al = (byte) (ds->*((word16) bx + 9292));
									ss->*((word16) bp - 0x0C) = al;
									SCZO = cond(bx - 0x02);
									if (Test(EQ,Z))
									{
										SCZO = cond(ds->w20A6 - 0x00);
										if (Test(NE,Z))
										{
											es_bx = ss->*((word16) bp + 6);
											es->*((word16) bx + 4) = al;
											es->*((word16) bx + 7) = al;
											goto l38D6_086E;
										}
									}
									es_bx = ss->*((word16) bp + 6);
									al = (byte) (ss->*((word16) bp - 0x0C));
									es->*((word16) bx + 2) = al;
									es->*((word16) bx + 5) = al;
									goto l38D6_086E;
								}
							}
						}
						ax = ss->*((word16) bp - 2);
						dx -= dx;
						cx = 100;
						v28 = dx_ax;
						ax = (uint16) (v28 /u cx);
						sp -= 2;
						ss->*sp = ax;
						ax = ss->*((word16) bp - 0x0A);
						ax += Mem0[ss:bp + 6:word16];
						SCZO = cond(ax);
						dx = ss->*((word16) bp + 8);
						sp -= 2;
						ss->*sp = dx;
						sp -= 2;
						ss->*sp = ax;
						fn38D6_03B8();
						sp = (word16) sp + 6;
						v29 = (word32) (ss->*((word16) bp - 0x0A)) + 2;
						ss->*((word16) bp - 0x0A) = v29;
						SCZO = cond(v29);
						goto l38D6_0803;
					}
					(ss->*((word16) bp - 4)).u0 = 0x00;
					(ss->*((word16) bp - 16)).u0 = 0x03;
				}
				(ss->*((word16) bp - 0x0A)).u0 = 0x06;
				goto l38D6_07AB;
			}
			else
			{
				(ss->*((word16) bp - 4)).u0 = 0x06;
				(ss->*((word16) bp - 16)).u0 = 0x04;
				goto l38D6_0756;
			}
		}
	}
	ax.u0 = 0x08;
	goto l38D6_0717;
}

// 38D6:0CDE: define fn38D6_0CDE
// Called from:
//      fn1825_0DA8
//      fn1825_139A
//      fn1825_1D40
define fn38D6_0CDE
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x06;
	SCZO = cond(sp);
	sp -= 2;
	ss->*sp = si;
	while (true)
	{
		es_bx = ss->*((word16) bp + 6);
		al = es->*bx;
		ss->*((word16) bp - 6) = al;
		al |= al;
		SZ = cond(al);
		O = false;
		C = false;
		if (Test(EQ,Z))
			break;
		SCZO = cond(ss->*((word16) bp - 6) - 0x20);
		if (Test(NE,Z))
			break;
		v17.u1 = (word16) (ss->*((word16) bp + 6)) + 1;
		ss->*((word16) bp + 6) = v17;
		SZO = cond(v17);
	}
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond(es->*bx - 0x2D);
	if (Test(EQ,Z))
		ax.u0 = 0x01;
	else
	{
		ax -= ax;
		SCZO = cond(ax);
	}
	ss->*((word16) bp - 2) = ax;
	ax |= ax;
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(EQ,Z))
	{
		SCZO = cond(es->*bx - 0x2B);
		if (Test(NE,Z))
		{
l38D6_0D1E:
			(ss->*((word16) bp - 4)).u0 = 0x00;
			while (true)
			{
				es_bx = ss->*((word16) bp + 6);
				al = es->*bx;
				ah -= ah;
				SCZO = cond(ah);
				si = ax;
				sp -= 2;
				ss->*sp = si;
				fn38AD_0040();
				sp = (word16) sp + 2;
				SZP = cond(al & 0x02);
				O = false;
				C = false;
				if (Test(EQ,Z))
					break;
				ax.u0 = 0x0A;
				dx_ax = ss->*((word16) bp - 4) *s32 ax;
				ss->*((word16) bp - 4) = ax;
				ax = si - 48;
				v24 = Mem0[ss:bp + -4:word16] + ax;
				ss->*((word16) bp - 4) = v24;
				SCZO = cond(v24);
				v25.u1 = (word16) (ss->*((word16) bp + 6)) + 1;
				ss->*((word16) bp + 6) = v25;
				SZO = cond(v25);
			}
			SCZO = cond(ss->*((word16) bp - 2) - 0x00);
			if (Test(EQ,Z))
			{
				ax = ss->*((word16) bp - 4);
				si = ss->*sp;
				sp = bp;
				bp = ss->*sp;
				sp = (word16) sp + 2;
				return;
			}
			else
			{
				ax = ss->*((word16) bp - 4);
				C = ax != 0x00;
				ax = -ax;
				SZO = cond(ax);
				si = ss->*sp;
				sp = bp;
				bp = ss->*sp;
				sp = (word16) sp + 2;
				return;
			}
		}
	}
	v19.u1 = (word16) (ss->*((word16) bp + 6)) + 1;
	ss->*((word16) bp + 6) = v19;
	SZO = cond(v19);
	goto l38D6_0D1E;
}

// 38D6:0D68: define fn38D6_0D68
// Called from:
//      fn1825_2CF2
//      fn1825_63F8
//      fn20B2_000E
define fn38D6_0D68
{
	word16 wArg08;
	word16 wArg0A;
	segptr32 ptrArg04;
	word16 bx;
	word16 cx;
	word16 dx;
	selector es;
	Top_3 = 0;
	if (wArg08 < 0x00)
		ax_17 = 0x01;
	else
		ax_15 = 0x00;
	ax_18 = ϕ(ax_17, ax_15);
	ax_22 = ax_18;
	if (ax_18 != 0x00)
	{
		ax_29 = -wArg08;
		wArg08_128 = ax_29;
	}
	ax_164 = ϕ(ax_22, ax_29);
	wArg08_162 = ϕ(wArg08, wArg08_128);
	SCZO_35 = cond(wArg0A - 0x00);
	C_175 = SLICE(SCZO_35, bool, 1);
	O_199 = SLICE(SCZO_35, bool, 4);
	S_202 = (bool) SCZO_35;
	Z_211 = SLICE(SCZO_35, bool, 2);
	if (wArg0A > 0x00)
	{
		wArg0A_132 = wArg0A - 0x01;
		bx_40 = wArg0A - 0x01;
		es_42 = SLICE(ptrArg04, selector, 16);
		si_43 = (word16) ptrArg04;
		Mem44[es_42:wArg0A - 0x01 + si_43:byte] = 0x00;
		while (true)
		{
			es_197 = ϕ(es_42, es_70);
			dx_190 = ϕ(dx, dx_78);
			cx_183 = ϕ(cx, cx_60);
			ax_167 = ϕ(ax_164, ax_79);
			wArg0A_137 = ϕ(wArg0A_132, wArg0A_138);
			wArg08_136 = ϕ(wArg08_162, wArg08_140);
			bx_45 = ϕ(bx_40, bx_68);
			bx_46 = bx_45;
			if (bx_45 <= 0x00 || wArg08_136 == 0x00)
				break;
			v20_56 = wArg0A_137 - 0x01;
			wArg0A_138 = v20_56;
			dx_ax_59 = (int32) wArg08_136;
			cx_60 = 0x0A;
			dx_64 = (int16) (dx_ax_59 % 0x0A);
			dl_66 = (byte) dx_64;
			bx_68 = v20_56;
			es_70 = SLICE(ptrArg04, selector, 16);
			*((word32) ptrArg04 + (uipr32) v20_56) = dl_66 + 0x30;
			dx_ax_74 = (int32) wArg08_136;
			dx_78 = (int16) (dx_ax_74 % 0x0A);
			ax_79 = (int16) (dx_ax_74 /16 0x0A);
			wArg08_140 = ax_79;
		}
		if (wArg0A_137 > 0x00 && ax_18 != 0x00)
		{
			v19_89 = wArg0A_137 - 0x01;
			wArg0A_145 = v19_89;
			bx_92 = v19_89;
			es_94 = SLICE(ptrArg04, selector, 16);
			*((word32) ptrArg04 + (uipr32) v19_89) = 0x2D;
		}
		while (true)
		{
			es_195 = ϕ(es_197, es_197, es_94, es_107);
			bx_172 = ϕ(bx_46, bx_46, bx_92, bx_105);
			wArg0A_147 = ϕ(wArg0A_137, wArg0A_137, wArg0A_145, wArg0A_148);
			SCZO_100 = cond(wArg0A_147 - 0x00);
			C_176 = SLICE(SCZO_100, bool, 1);
			O_200 = SLICE(SCZO_100, bool, 4);
			S_203 = (bool) SCZO_100;
			Z_212 = SLICE(SCZO_100, bool, 2);
			if (wArg0A_147 <= 0x00)
				break;
			v27_102 = wArg0A_147 - 0x01;
			wArg0A_148 = v27_102;
			bx_105 = v27_102;
			es_107 = SLICE(ptrArg04, selector, 16);
			*((word32) ptrArg04 + (uipr32) v27_102) = 0x20;
		}
	}
	Z_210 = ϕ(Z_211, Z_212);
	S_201 = ϕ(S_202, S_203);
	O_198 = ϕ(O_199, O_200);
	es_191 = ϕ(es, es_195);
	dx_184 = ϕ(dx, dx_190);
	cx_177 = ϕ(cx, cx_183);
	C_174 = ϕ(C_175, C_176);
	bx_168 = ϕ(bx, bx_172);
	ax_163 = ϕ(ax_164, ax_167);
}

// 38D6:0DFE: define fn38D6_0DFE
// Called from:
//      fn1825_0CD2
define fn38D6_0DFE
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0xB6;
	SCZO = cond(sp);
	ax.u0 = 24470;
	sp -= 2;
	ss->*sp = ds;
	sp -= 2;
	ss->*sp = ax;
	fn38D6_0146();
	sp = (word16) sp + 4;
	SCZO = cond(sp);
	ss->*((word16) bp - 0x0094) = ax;
	ss->*((word16) bp - 0x0092) = dx;
	ax.u0 = 24478;
	sp -= 2;
	ss->*sp = ds;
	sp -= 2;
	ss->*sp = ax;
	ax = bp - 0x8F;
	sp -= 2;
	ss->*sp = ss;
	sp -= 2;
	ss->*sp = ax;
	fn2017_01BA();
	sp = (word16) sp + 8;
	SCZO = cond(sp);
	v10 = ss->*((word16) bp + 8);
	sp -= 2;
	ss->*sp = v10;
	v11 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v11;
	fn2017_03F5();
	sp = (word16) sp + 4;
	SCZO = cond(ax - 122);
	if (Test(ULT,C))
	{
		v13 = ss->*((word16) bp + 8);
		sp -= 2;
		ss->*sp = v13;
		v14 = ss->*((word16) bp + 6);
		sp -= 2;
		ss->*sp = v14;
		fn2017_03F5();
		sp = (word16) sp + 4;
		SCZO = cond(sp);
		ax = (char *) ax.u0 + 1;
		SZO = cond(ax);
	}
	else
		ax.u0 = 0x7B;
	sp -= 2;
	ss->*sp = ax;
	v16 = ss->*((word16) bp + 8);
	sp -= 2;
	ss->*sp = v16;
	v17 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v17;
	ax = bp - 0x8C;
	sp -= 2;
	ss->*sp = ss;
	sp -= 2;
	ss->*sp = ax;
	fn2017_01DA();
	sp = (word16) sp + 0x0A;
	SCZO = cond(sp);
	ax.u0 = 24482;
	sp -= 2;
	ss->*sp = ds;
	sp -= 2;
	ss->*sp = ax;
	ax = bp - 0x8F;
	sp -= 2;
	ss->*sp = ss;
	sp -= 2;
	ss->*sp = ax;
	fn2017_037D();
	sp = (word16) sp + 8;
	SCZO = cond(sp);
	ax = bp - 0x8F;
	sp -= 2;
	ss->*sp = ss;
	sp -= 2;
	ss->*sp = ax;
	fn2017_03F5();
	sp = (word16) sp + 4;
	ss->*((word16) bp - 144) = al;
	ax.u0 = 0x20;
	sp -= 2;
	ss->*sp = ax;
	ax -= ax;
	SCZO = cond(ax);
	sp -= 2;
	ss->*sp = ax;
	ax = bp - 0xB4;
	sp -= 2;
	ss->*sp = ss;
	sp -= 2;
	ss->*sp = ax;
	fn2017_0228();
	sp = (word16) sp + 8;
	SCZO = cond(sp);
	ss->*((word16) bp - 0x0E) = 0x00;
	ax = bp - 0x90;
	ss->*((word16) bp - 0x0C) = ax;
	ss->*((word16) bp - 0x0A) = ss;
	ax = bp - 0xB4;
	ss->*((word16) bp - 8) = ax;
	ss->*((word16) bp - 6) = ss;
	ax = bp - 0xB4;
	ss->*((word16) bp - 4) = ax;
	ss->*((word16) bp - 2) = ss;
	ax = bp - 0x0E;
	sp -= 2;
	ss->*sp = ss;
	sp -= 2;
	ss->*sp = ax;
	v19 = ss->*((word16) bp - 0x0092);
	sp -= 2;
	ss->*sp = v19;
	v20 = ss->*((word16) bp - 0x0094);
	sp -= 2;
	ss->*sp = v20;
	fn2017_04E1();
	ss->*((word16) bp - 0x00B6) = ax;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

