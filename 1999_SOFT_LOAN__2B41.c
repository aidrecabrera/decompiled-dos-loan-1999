// 1999_SOFT_LOAN__2B41.c
// Generated by decompiling 1999_SOFT_LOAN_.exe
// using Reko decompiler version 0.11.4.0.

#include "1999_SOFT_LOAN_.h"

// 2B41:0006: define fn2B41_0006
// Called from:
//      fn2B41_00B4
//      fn2B41_01FA
define fn2B41_0006
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x02;
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond((es->*bx).t0030.u0 - 0x00);
	if (Test(NE,Z))
	{
		v11.u0 = (es->*bx).t0030.u0;
		sp -= 2;
		ss->*sp = v11;
		fn2D1A_0598();
		sp = (word16) sp + 2;
		SCZO = cond(sp);
		ss->*((word16) bp - 2) = al;
	}
	else
	{
		ax.u0 = 0x01;
		sp -= 2;
		ss->*sp = ax;
		ax = bp - 2;
		sp -= 2;
		ss->*sp = ss;
		sp -= 2;
		ss->*sp = ax;
		es_bx = ss->*((word16) bp + 6);
		v14.u0 = (es->*bx).t0034.u0;
		sp -= 2;
		ss->*sp = v14;
		fn208F_00C9();
		sp = (word16) sp + 8;
		ax |= ax;
		SZ = cond(ax);
		O = false;
		C = false;
		if (Test(EQ,Z))
			ss->*((word16) bp - 2) = 0x1A;
	}
	al = (byte) (ss->*((word16) bp - 2));
	ah -= ah;
	SCZO = cond(ah);
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2B41:0052: define fn2B41_0052
// Called from:
//      fn2B41_01B8
//      fn2B41_042E
define fn2B41_0052
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x02;
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond((es->*bx).t0030.u0 - 0x00);
	if (Test(EQ,Z))
	{
		v15 = ss->*((word16) bp + 0x0E);
		sp -= 2;
		ss->*sp = v15;
		v16 = ss->*((word16) bp + 0x0C);
		sp -= 2;
		ss->*sp = v16;
		v17 = ss->*((word16) bp + 0x0A);
		sp -= 2;
		ss->*sp = v17;
		es_bx = ss->*((word16) bp + 6);
		v18.u0 = (es->*bx).t0034.u0;
		sp -= 2;
		ss->*sp = v18;
		fn208F_00EF();
		sp = (word16) sp + 8;
		ss->*((word16) bp - 2) = ax;
		ax = ss->*((word16) bp + 0x0E);
		SCZO = cond(ss->*((word16) bp - 2) - ax);
		if (Test(ULT,C))
		{
			ax.u0 = 24214;
			sp -= 2;
			ss->*sp = ds;
			sp -= 2;
			ss->*sp = ax;
			ax -= ax;
			SCZO = cond(ax);
			sp -= 2;
			ss->*sp = ax;
			fn20B2_10AC();
			sp = (word16) sp + 6;
			SCZO = cond(sp);
		}
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
	}
	else
	{
		v11 = ss->*((word16) bp + 0x0E);
		sp -= 2;
		ss->*sp = v11;
		v12 = ss->*((word16) bp + 0x0C);
		sp -= 2;
		ss->*sp = v12;
		v13 = ss->*((word16) bp + 0x0A);
		sp -= 2;
		ss->*sp = v13;
		v14.u0 = (es->*bx).t0030.u0;
		sp -= 2;
		ss->*sp = v14;
		fn2D1A_064E();
		sp = (word16) sp + 8;
		SCZO = cond(sp);
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
	}
}

// 2B41:00B4: define fn2B41_00B4
// Called from:
//      fn2644_20AA
define fn2B41_00B4
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x04;
	SCZO = cond(sp);
	sp -= 2;
	ss->*sp = si;
	es_bx = ss->*((word16) bp + 6);
	es->*((word16) bx + 74) = 0x00;
	es->*((word16) bx + 72) = 0x00;
	es->*((word16) bx + 66) = 0x01;
	es->*((word16) bx + 70) = 0x00;
	v11 = es->*((word16) bx + 32);
	sp -= 2;
	ss->*sp = v11;
	ax.u0 = 0x20;
	sp -= 2;
	ss->*sp = ax;
	v13 = es->*((word16) bx + 92);
	sp -= 2;
	ss->*sp = v13;
	v14 = es->*((word16) bx + 90);
	sp -= 2;
	ss->*sp = v14;
	fn2017_0228();
	sp = (word16) sp + 8;
	SCZO = cond(sp);
	(ss->*((word16) bp - 4)).u0 = 0x01;
	(ss->*((word16) bp - 2)).u0 = 0x01;
	while (true)
	{
		SCZO = cond(ss->*((word16) bp - 2) - 0x00);
		if (Test(EQ,Z))
			break;
		es_bx = ss->*((word16) bp + 6);
		al = (byte) (es->*((word16) bx + 96));
		ah -= ah;
		ax |= ax;
		SZ = cond(ax);
		O = false;
		C = false;
		if (Test(NE,Z))
		{
			SCZO = cond(ax - 0x0A);
			if (Test(EQ,Z))
				goto l2B41_015D;
			SCZO = cond(ax - 0x0D);
			if (Test(NE,Z))
			{
				SCZO = cond(ax - 0x1A);
				if (Test(NE,Z))
				{
					si = ss->*((word16) bp - 4);
					v21 = (word32) (ss->*((word16) bp - 4)) + 1;
					ss->*((word16) bp - 4) = v21;
					es_bx = es->*((word16) bx + 90);
					Mem0[es:bx + si:byte] = al;
					es_bx = ss->*((word16) bp + 6);
					ax = ss->*((word16) bp - 4);
					dx -= dx;
					SCZO = cond(es->*((word16) bx + 0x0022) - dx);
					if (Test(UGE,C))
					{
						if (Test(ULE,CZ))
						{
							SCZO = cond(es->*((word16) bx + 32) - ax);
							if (Test(UGT,CZ))
								goto l2B41_0140;
							goto l2B41_017A;
						}
l2B41_0140:
						ax.u0 = 0x01;
					}
					else
					{
l2B41_017A:
						ax -= ax;
						SCZO = cond(ax);
					}
					ss->*((word16) bp - 2) = ax;
					goto l2B41_015D;
				}
				SCZO = cond(ss->*((word16) bp - 4) - 0x01);
				if (Test(EQ,Z))
				{
					es->*((word16) bx + 72) = 0x01;
					es->*((word16) bx + 66) = 0x00;
				}
			}
			(ss->*((word16) bp - 2)).u0 = 0x00;
		}
l2B41_015D:
		SCZO = cond(ss->*((word16) bp - 2) - 0x00);
		if (Test(NE,Z))
		{
			v25 = ss->*((word16) bp + 8);
			sp -= 2;
			ss->*sp = v25;
			v26 = ss->*((word16) bp + 6);
			sp -= 2;
			ss->*sp = v26;
			fn2B41_0006();
			sp = (word16) sp + 4;
			SCZO = cond(sp);
			es_bx = ss->*((word16) bp + 6);
			es->*((word16) bx + 96) = al;
		}
	}
	while (true)
	{
		es_bx = ss->*((word16) bp + 6);
		SCZO = cond(es->*((word16) bx + 96) - 0x0D);
		if (Test(EQ,Z))
			break;
		es_bx = ss->*((word16) bp + 6);
		SCZO = cond(es->*((word16) bx + 96) - 0x1A);
		if (Test(EQ,Z))
			break;
		sp -= 2;
		ss->*sp = es;
		sp -= 2;
		ss->*sp = bx;
		fn2B41_0006();
		sp = (word16) sp + 4;
		SCZO = cond(sp);
		es_bx = ss->*((word16) bp + 6);
		es->*((word16) bx + 96) = al;
	}
	SCZO = cond(es->*((word16) bx + 96) - 0x0D);
	if (Test(EQ,Z))
		es->*((word16) bx + 96) = 0x00;
	si = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2B41:01B8: define fn2B41_01B8
// Called from:
//      fn2644_21CA
define fn2B41_01B8
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	es_bx = ss->*((word16) bp + 6);
	ax = es->*((word16) bx + 32);
	--ax;
	sp -= 2;
	ss->*sp = ax;
	ax = es->*((word16) bx + 90);
	dx = es->*((word16) bx + 92);
	ax = (word16) ax + 1;
	SZO = cond(ax);
	sp -= 2;
	ss->*sp = dx;
	sp -= 2;
	ss->*sp = ax;
	sp -= 2;
	ss->*sp = es;
	sp -= 2;
	ss->*sp = bx;
	fn2B41_0052();
	sp = (word16) sp + 0x0A;
	SCZO = cond(sp);
	ax.u0 = 0x02;
	sp -= 2;
	ss->*sp = ax;
	ax.u0 = 24224;
	sp -= 2;
	ss->*sp = ds;
	sp -= 2;
	ss->*sp = ax;
	v14 = ss->*((word16) bp + 8);
	sp -= 2;
	ss->*sp = v14;
	v15 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v15;
	fn2B41_0052();
	sp = (word16) sp + 0x0A;
	SCZO = cond(sp);
	es_bx = ss->*((word16) bp + 6);
	es->*((word16) bx + 86) = 0x00;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2B41:01FA: define fn2B41_01FA
// Called from:
//      fn2644_20AA
define fn2B41_01FA
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x10;
	SCZO = cond(sp);
	sp -= 2;
	ss->*sp = si;
	es_bx = ss->*((word16) bp + 6);
	es->*((word16) bx + 74) = 0x00;
	es->*((word16) bx + 72) = 0x00;
	es->*((word16) bx + 66) = 0x01;
	es->*((word16) bx + 70) = 0x00;
	v11 = es->*((word16) bx + 32);
	sp -= 2;
	ss->*sp = v11;
	ax.u0 = 0x20;
	sp -= 2;
	ss->*sp = ax;
	v13 = es->*((word16) bx + 92);
	sp -= 2;
	ss->*sp = v13;
	v14 = es->*((word16) bx + 90);
	sp -= 2;
	ss->*sp = v14;
	fn2017_0228();
	sp = (word16) sp + 8;
	es_bx = ss->*((word16) bp + 6);
	al = es->*((word16) bx + 96);
	ss->*((word16) bp - 2) = al;
	al |= al;
	SZ = cond(al);
	O = false;
	C = false;
	if (Test(NE,Z))
	{
		SCZO = cond(al - 0x0A);
		if (Test(NE,Z))
		{
l2B41_0252:
			SCZO = cond(ss->*((word16) bp - 2) - 0x1A);
			if (Test(EQ,Z))
			{
				es_bx = ss->*((word16) bp + 6);
				es->*((word16) bx + 72) = 0x01;
				es->*((word16) bx + 66) = 0x00;
				si = ss->*sp;
				sp = bp;
				bp = ss->*sp;
				sp = (word16) sp + 2;
				return;
			}
			(ss->*((word16) bp - 8)).u0 = 0x00;
			while (true)
			{
				es_bx = ss->*((word16) bp + 6);
				ax = ss->*((word16) bp - 8);
				SCZO = cond(es->*((word16) bx + 166) - ax);
				if (Test(ULE,CZ))
					break;
				ax.u0 = 0x12;
				dx_ax = ss->*((word16) bp - 8) *32 ax;
				cx = es->*((word16) bx + 0x00A8);
				si = es->*((word16) bx + 0x00AA);
				cx += ax;
				SCZO = cond(cx);
				ss->*((word16) bp - 0x0C) = cx;
				ss->*((word16) bp - 0x0A) = si;
l2B41_0296:
				SCZO = cond(ss->*((word16) bp - 2) - 0x00);
				if (Test(EQ,Z))
				{
l2B41_02A8:
					v23 = ss->*((word16) bp + 8);
					sp -= 2;
					ss->*sp = v23;
					v24 = ss->*((word16) bp + 6);
					sp -= 2;
					ss->*sp = v24;
					fn2B41_0006();
					sp = (word16) sp + 4;
					SCZO = cond(sp);
					ss->*((word16) bp - 2) = al;
					goto l2B41_0296;
				}
				SCZO = cond(ss->*((word16) bp - 2) - 0x20);
				if (Test(EQ,Z))
					goto l2B41_02A8;
				SCZO = cond(ss->*((word16) bp - 2) - 0x0A);
				if (Test(EQ,Z))
					goto l2B41_02A8;
				SCZO = cond(ss->*((word16) bp - 2) - 0x1A);
				if (Test(EQ,Z))
					break;
				SCZO = cond(ss->*((word16) bp - 2) - 0x0D);
				if (Test(EQ,Z))
					break;
				SCZO = cond(ds->t1304 - 0x00);
				if (Test(NE,Z))
				{
					al = ds->t1304;
					SCZO = cond(ss->*((word16) bp - 2) - al);
					if (Test(EQ,Z))
					{
						al = ss->*((word16) bp - 2);
						ss->*((word16) bp - 0x0E) = al;
						v26 = ss->*((word16) bp + 8);
						sp -= 2;
						ss->*sp = v26;
						v27 = ss->*((word16) bp + 6);
						sp -= 2;
						ss->*sp = v27;
						fn2B41_0006();
						sp = (word16) sp + 4;
						SCZO = cond(sp);
						ss->*((word16) bp - 2) = al;
					}
					else
						ss->*((word16) bp - 0x0E) = 44;
				}
				else
					ss->*((word16) bp - 0x0E) = 0x20;
				es_bx = ss->*((word16) bp - 0x0C);
				ax = es->*((word16) bx + 8);
				es_bx = ss->*((word16) bp + 6);
				ax += Mem0[es:bx + 90:word16];
				SCZO = cond(ax);
				dx = es->*((word16) bx + 92);
				ss->*((word16) bp - 6) = ax;
				ss->*((word16) bp - 4) = dx;
				es_bx = ss->*((word16) bp - 0x0C);
				ax = es->*((word16) bx + 2);
				ss->*((word16) bp - 16) = ax;
				while (true)
				{
					SCZO = cond(ss->*((word16) bp - 16) - 0x00);
					if (Test(EQ,Z))
						break;
					al = ss->*((word16) bp - 0x0E);
					SCZO = cond(ss->*((word16) bp - 2) - al);
					if (Test(EQ,Z))
						break;
					SCZO = cond(ss->*((word16) bp - 2) - 0x0D);
					if (Test(EQ,Z))
						break;
					SCZO = cond(ss->*((word16) bp - 2) - 0x1A);
					if (Test(EQ,Z))
						break;
					es_bx = ss->*((word16) bp - 6);
					v39 = (word32) (ss->*((word16) bp - 6)) + 1;
					ss->*((word16) bp - 6) = v39;
					al = ss->*((word16) bp - 2);
					es->*bx = al;
					v40 = ss->*((word16) bp - 16) - 0x01;
					ss->*((word16) bp - 16) = v40;
					SZO = cond(v40);
					v41 = ss->*((word16) bp + 8);
					sp -= 2;
					ss->*sp = v41;
					v42 = ss->*((word16) bp + 6);
					sp -= 2;
					ss->*sp = v42;
					fn2B41_0006();
					sp = (word16) sp + 4;
					SCZO = cond(sp);
					ss->*((word16) bp - 2) = al;
				}
				es_bx = ss->*((word16) bp - 0x0C);
				SCZO = cond(es->*bx - 0x0100);
				if (Test(EQ,Z))
				{
					SCZO = cond(ds->t1304 - 0x00);
					if (Test(NE,Z))
					{
						while (true)
						{
							al = ss->*((word16) bp - 0x0E);
							SCZO = cond(ss->*((word16) bp - 2) - al);
							if (Test(EQ,Z))
								break;
							SCZO = cond(ss->*((word16) bp - 2) - 0x0D);
							if (Test(EQ,Z))
								break;
							SCZO = cond(ss->*((word16) bp - 2) - 0x1A);
							if (Test(EQ,Z))
								break;
							v33 = ss->*((word16) bp + 8);
							sp -= 2;
							ss->*sp = v33;
							v34 = ss->*((word16) bp + 6);
							sp -= 2;
							ss->*sp = v34;
							fn2B41_0006();
							sp = (word16) sp + 4;
							SCZO = cond(sp);
							ss->*((word16) bp - 2) = al;
						}
					}
				}
				SCZO = cond(ds->t1304 - 0x00);
				if (Test(NE,Z))
					al.u0 = 44;
				else
					al.u0 = 0x20;
				ss->*((word16) bp - 0x0E) = al;
				while (true)
				{
					al = ss->*((word16) bp - 0x0E);
					SCZO = cond(ss->*((word16) bp - 2) - al);
					if (Test(EQ,Z))
						break;
					SCZO = cond(ss->*((word16) bp - 2) - 0x0D);
					if (Test(EQ,Z))
						break;
					SCZO = cond(ss->*((word16) bp - 2) - 0x1A);
					if (Test(EQ,Z))
						break;
					v37 = ss->*((word16) bp + 8);
					sp -= 2;
					ss->*sp = v37;
					v38 = ss->*((word16) bp + 6);
					sp -= 2;
					ss->*sp = v38;
					fn2B41_0006();
					sp = (word16) sp + 4;
					SCZO = cond(sp);
					ss->*((word16) bp - 2) = al;
				}
				al = ss->*((word16) bp - 0x0E);
				SCZO = cond(ss->*((word16) bp - 2) - al);
				if (Test(EQ,Z))
					ss->*((word16) bp - 2) = 0x00;
				v35 = (word32) (ss->*((word16) bp - 8)) + 1;
				ss->*((word16) bp - 8) = v35;
				SZO = cond(v35);
			}
			while (true)
			{
				SCZO = cond(ss->*((word16) bp - 2) - 0x0D);
				if (Test(EQ,Z))
					break;
				SCZO = cond(ss->*((word16) bp - 2) - 0x1A);
				if (Test(EQ,Z))
					break;
				v31 = ss->*((word16) bp + 8);
				sp -= 2;
				ss->*sp = v31;
				v32 = ss->*((word16) bp + 6);
				sp -= 2;
				ss->*sp = v32;
				fn2B41_0006();
				sp = (word16) sp + 4;
				SCZO = cond(sp);
				ss->*((word16) bp - 2) = al;
			}
			SCZO = cond(ss->*((word16) bp - 2) - 0x0D);
			if (Test(EQ,Z))
			{
l2B41_0408:
				v28 = ss->*((word16) bp + 8);
				sp -= 2;
				ss->*sp = v28;
				v29 = ss->*((word16) bp + 6);
				sp -= 2;
				ss->*sp = v29;
				fn2B41_0006();
				sp = (word16) sp + 4;
				SCZO = cond(sp);
				ss->*((word16) bp - 2) = al;
			}
			SCZO = cond(ss->*((word16) bp - 2) - 0x0A);
			if (Test(NE,Z))
			{
l2B41_041E:
				es_bx = ss->*((word16) bp + 6);
				al = ss->*((word16) bp - 2);
				es->*((word16) bx + 96) = al;
				si = ss->*sp;
				sp = bp;
				bp = ss->*sp;
				sp = (word16) sp + 2;
				return;
			}
			SCZO = cond(ss->*((word16) bp - 2) - 0x1A);
			if (Test(EQ,Z))
				goto l2B41_041E;
			goto l2B41_0408;
		}
	}
	sp -= 2;
	ss->*sp = es;
	sp -= 2;
	ss->*sp = bx;
	fn2B41_0006();
	sp = (word16) sp + 4;
	SCZO = cond(sp);
	ss->*((word16) bp - 2) = al;
	goto l2B41_0252;
}

// 2B41:042E: define fn2B41_042E
// Called from:
//      fn2644_21CA
define fn2B41_042E
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x0E;
	SCZO = cond(sp);
	sp -= 2;
	ss->*sp = si;
	ss->*((word16) bp - 0x0C) = 0x01;
	(ss->*((word16) bp - 6)).u0 = 0x00;
	while (true)
	{
		es_bx = ss->*((word16) bp + 6);
		ax = ss->*((word16) bp - 6);
		SCZO = cond((es->*bx).w00A6 - ax);
		if (Test(ULE,CZ))
			break;
		ax.u0 = 0x12;
		dx_ax = ss->*((word16) bp - 6) *32 ax;
		cx.u3 = (es->*bx).t00A8.u3;
		si.u3 = (es->*bx).t00AA.u3;
		cx += ax;
		ss->*((word16) bp - 0x0A) = cx;
		ss->*((word16) bp - 8) = si;
		SCZO = cond(ss->*((word16) bp - 0x0C) - 0x00);
		if (Test(NE,Z))
			ss->*((word16) bp - 0x0C) = 0x00;
		else
		{
			ax.u0 = 0x01;
			sp -= 2;
			ss->*sp = ax;
			SCZO = cond(Mem0[ds:4868:byte] - 0x00);
			if (Test(NE,Z))
				ax.u0 = 24228;
			else
				ax.u0 = 24230;
			sp -= 2;
			ss->*sp = ds;
			sp -= 2;
			ss->*sp = ax;
			v20 = ss->*((word16) bp + 8);
			sp -= 2;
			ss->*sp = v20;
			v21 = ss->*((word16) bp + 6);
			sp -= 2;
			ss->*sp = v21;
			fn2B41_0052();
			sp = (word16) sp + 0x0A;
			SCZO = cond(sp);
		}
		es_bx = ss->*((word16) bp - 0x0A);
		ax.u3 = (es->*bx).t0000.u3;
		SCZO = cond(ax - 0x10);
		if (Test(EQ,Z))
		{
l2B41_0550:
			es_bx = ss->*((word16) bp - 0x0A);
			ax.u3 = (es->*bx).t0002.u3;
			ss->*((word16) bp - 0x0E) = ax;
			ax.u3 = (es->*bx).t0008.u3;
			es_bx = ss->*((word16) bp + 6);
			ax.u3 += (es->*bx).w005A /16 4869;
			SCZO = cond(ax);
			dx.u3 = (es->*bx).t005C.u3;
			ss->*((word16) bp - 4) = ax;
			ss->*((word16) bp - 2) = dx;
			while (true)
			{
				SCZO = cond(ss->*((word16) bp - 0x0E) - 0x00);
				if (Test(EQ,Z))
					break;
				es_bx = ss->*((word16) bp - 4);
				SCZO = cond((es->*bx).t0000.u0 - 0x20);
				if (Test(NE,Z))
					break;
				v25 = ss->*((word16) bp - 0x0E) - 0x01;
				ss->*((word16) bp - 0x0E) = v25;
				v27 = (word32) (ss->*((word16) bp - 4)) + 1;
				ss->*((word16) bp - 4) = v27;
				SZO = cond(v27);
			}
			SCZO = cond(ss->*((word16) bp - 0x0E) - 0x00);
			if (Test(EQ,Z))
				goto l2B41_0549;
			v22 = ss->*((word16) bp - 0x0E);
			sp -= 2;
			ss->*sp = v22;
			v23 = ss->*((word16) bp - 2);
			sp -= 2;
			ss->*sp = v23;
			v24 = ss->*((word16) bp - 4);
			sp -= 2;
			ss->*sp = v24;
			goto l2B41_053C;
		}
		SCZO = cond(ax - 0x40);
		if (Test(EQ,Z))
			goto l2B41_0550;
		SCZO = cond(ax - 0x80);
		if (Test(EQ,Z))
			goto l2B41_0550;
		SCZO = cond(ax - 0x0100);
		if (Test(EQ,Z))
		{
			SCZO = cond(Mem0[ds:4868:byte] - 0x00);
			if (Test(NE,Z))
			{
				ax.u0 = 0x01;
				sp -= 2;
				ss->*sp = ax;
				ax.u0 = 4868;
				sp -= 2;
				ss->*sp = ds;
				sp -= 2;
				ss->*sp = ax;
				v30 = ss->*((word16) bp + 8);
				sp -= 2;
				ss->*sp = v30;
				v31 = ss->*((word16) bp + 6);
				sp -= 2;
				ss->*sp = v31;
				fn2B41_0052();
				sp = (word16) sp + 0x0A;
				SCZO = cond(sp);
			}
			es_bx = ss->*((word16) bp - 0x0A);
			ax.u3 = (es->*bx).t0002.u3;
			ss->*((word16) bp - 0x0E) = ax;
			ax.u3 = (es->*bx).t0008.u3;
			es_bx = ss->*((word16) bp + 6);
			ax.u3 += (es->*bx).w005A /16 4869;
			SCZO = cond(ax);
			dx.u3 = (es->*bx).t005C.u3;
			ss->*((word16) bp - 4) = ax;
			ss->*((word16) bp - 2) = dx;
			while (true)
			{
				SCZO = cond(ss->*((word16) bp - 0x0E) - 0x00);
				if (Test(EQ,Z))
					break;
				si = ss->*((word16) bp - 0x0E);
				es_bx = ss->*((word16) bp - 4);
				SCZO = cond(Mem0[es:bx - 1 + si:byte] - 0x20);
				if (Test(NE,Z))
					break;
				v38 = ss->*((word16) bp - 0x0E) - 0x01;
				ss->*((word16) bp - 0x0E) = v38;
				SZO = cond(v38);
			}
			SCZO = cond(ss->*((word16) bp - 0x0E) - 0x00);
			if (Test(NE,Z))
			{
				v33 = ss->*((word16) bp - 0x0E);
				sp -= 2;
				ss->*sp = v33;
				v34 = ss->*((word16) bp - 2);
				sp -= 2;
				ss->*sp = v34;
				v35 = ss->*((word16) bp - 4);
				sp -= 2;
				ss->*sp = v35;
				v36 = ss->*((word16) bp + 8);
				sp -= 2;
				ss->*sp = v36;
				v37 = ss->*((word16) bp + 6);
				sp -= 2;
				ss->*sp = v37;
				fn2B41_0052();
				sp = (word16) sp + 0x0A;
				SCZO = cond(sp);
			}
			SCZO = cond(Mem0[ds:4868:byte] - 0x00);
			if (Test(NE,Z))
			{
				ax.u0 = 0x01;
				sp -= 2;
				ss->*sp = ax;
				ax.u0 = 4868;
				sp -= 2;
				ss->*sp = ds;
				sp -= 2;
				ss->*sp = ax;
l2B41_053C:
				v28 = ss->*((word16) bp + 8);
				sp -= 2;
				ss->*sp = v28;
				v29 = ss->*((word16) bp + 6);
				sp -= 2;
				ss->*sp = v29;
				fn2B41_0052();
				sp = (word16) sp + 0x0A;
				SCZO = cond(sp);
			}
		}
l2B41_0549:
		v32 = (word32) (ss->*((word16) bp - 6)) + 1;
		ss->*((word16) bp - 6) = v32;
		SZO = cond(v32);
	}
	ax.u0 = 0x02;
	sp -= 2;
	ss->*sp = ax;
	ax.u0 = 24232;
	sp -= 2;
	ss->*sp = ds;
	sp -= 2;
	ss->*sp = ax;
	v17 = ss->*((word16) bp + 8);
	sp -= 2;
	ss->*sp = v17;
	v18 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v18;
	fn2B41_0052();
	sp = (word16) sp + 0x0A;
	SCZO = cond(sp);
	es_bx = ss->*((word16) bp + 6);
	(es->*bx).w0056 = 0x00;
	si = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

