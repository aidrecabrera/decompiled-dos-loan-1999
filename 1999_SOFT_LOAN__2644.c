// 1999_SOFT_LOAN__2644.c
// Generated by decompiling 1999_SOFT_LOAN_.exe
// using Reko decompiler version 0.11.4.0.

#include "1999_SOFT_LOAN_.h"

// 2644:000E: define fn2644_000E
// Called from:
//      fn21DC_0EC2
define fn2644_000E
{
	sp = fp;
	Top = 0;
	ax = 0x0400;
	sp -= 2;
	ss->*sp = (struct Eq_62545 * Eq_62549::*) ax;
	ax = 4874;
	sp -= 2;
	ss->*sp = (struct Eq_62545 * Eq_62549::*) ds;
	sp -= 2;
	ss->*sp = (struct Eq_62545 * Eq_62549::*) ax;
	fn21DC_06DC();
	sp = (struct Eq_62545 * Eq_62549::*) ((char *) sp + 6);
	ax |= ax;
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(EQ,Z))
	{
		ax -= ax;
		SCZO = cond(ax);
	}
	else
	{
		ax = 0x0400;
		sp -= 2;
		ss->*sp = (struct Eq_62545 * Eq_62549::*) ax;
		ax -= ax;
		SCZO = cond(ax);
		sp -= 2;
		ss->*sp = (struct Eq_62545 * Eq_62549::*) ax;
		v12 = ds->ptr130C;
		sp -= 2;
		ss->*sp = (struct Eq_62545 * Eq_62549::*) v12;
		v13 = ds->ptr130A;
		sp -= 2;
		ss->*sp = (struct Eq_62545 * Eq_62549::*) v13;
		fn2017_0228();
		sp = (struct Eq_62545 * Eq_62549::*) ((char *) sp + 8);
		SCZO = cond(sp);
		ax = 0x01;
	}
}

// 2644:0974: define fn2644_0974
// Called from:
//      fn2644_0F82
define fn2644_0974
{
	sp = fp;
	Top = 0;
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_62623 Eq_62630::*) bp;
	bp = sp;
	sp -= 0x0E;
	SCZO = cond(sp);
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_62623 Eq_62630::*) si;
	(ss->*bp).tFFFFFFFA.u0 = 0x00;
l2644_0A31:
	es_bx.u2 = (ss->*bp).t0006.u2;
	ax.u0 = (ss->*bp).tFFFFFFFA.u0;
	SCZO = cond((es->*bx).w00A6 - ax);
	if (Test(ULE,CZ))
	{
		si = (struct Eq_62623 Eq_62630::*) (ss->*sp).ptr0000;
		sp = bp;
		bp = (struct Eq_62623 Eq_62630::*) (ss->*sp).ptr0000;
		sp = (struct Eq_62623 Eq_62630::*) &sp->ptr0000;
		return;
	}
	ax.u0 = 0x12;
	dx_ax = (ss->*bp).tFFFFFFFA.u0 *32 ax;
	es_bx.u2 = (ss->*bp).t0006.u2;
	cx.u0 = (es->*bx).t00A8.u0;
	si = (es->*bx).ptr00AA;
	cx += ax;
	(ss->*bp).tFFFFFFF2.u0 = (uint16) cx;
	(ss->*bp).ptrFFFFFFF4 = (struct Eq_62623 Eq_62630::*) si;
	es_bx.u2 = (ss->*bp).tFFFFFFF2.u2;
	ax.u0 = (es->*bx).t000E.u0;
	dx = (es->*bx).w0010;
	(ss->*bp).tFFFFFFF6.u0 = (uint16) ax;
	(ss->*bp).wFFFFFFF8 = dx;
	es_bx.u2 = (ss->*bp).tFFFFFFF6.u2;
	ax.u0 = (es->*bx).t0000.u0;
	dx = (es->*bx).w0002;
	(ss->*bp).tFFFFFFFC.u0 = (uint16) ax;
	(ss->*bp).wFFFFFFFE = dx;
	SCZO = cond(cx - ax);
	if (Test(EQ,Z))
	{
		SCZO = cond(si - dx);
		if (Test(EQ,Z))
		{
			es_bx.u2 = (ss->*bp).tFFFFFFFC.u2;
			ax.u0 = (es->*bx).t000A.u0;
			dx = (es->*bx).w000C;
			es_bx.u2 = (ss->*bp).tFFFFFFF6.u2;
			(es->*bx).t0000.u0 = (uint16) ax;
			(es->*bx).w0002 = dx;
			goto l2644_0A2E;
		}
	}
	while (true)
	{
		ax.u0 = 0x12;
		dx_ax = (ss->*bp).tFFFFFFFA.u0 *32 ax;
		es_bx.u2 = (ss->*bp).t0006.u2;
		cx.u0 = (es->*bx).t00A8.u0;
		si = (es->*bx).ptr00AA;
		cx += ax;
		es_bx.u2 = (ss->*bp).tFFFFFFFC.u2;
		SCZO = cond(cx - ((es->*bx).t000A).u0);
		if (Test(EQ,Z))
		{
			SCZO = cond(si - (es->*bx).w000C);
			if (Test(EQ,Z))
			{
				es_bx.u2 = (ss->*bp).tFFFFFFFC.u2;
				es_bx.u2 = (es->*bx).t000A.u2;
				ax.u0 = (es->*bx).t000A.u0;
				dx = (es->*bx).w000C;
				es_bx.u2 = (ss->*bp).tFFFFFFFC.u2;
				(es->*bx).t000A.u0 = (uint16) ax;
				(es->*bx).w000C = dx;
l2644_0A2E:
				v17 = (ss->*bp).tFFFFFFFA.u0 + 0x01;
				(ss->*bp).tFFFFFFFA.u0 = (uint16) v17;
				SZO = cond(v17);
				goto l2644_0A31;
			}
		}
		ax.u0 = (es->*bx).t000A.u0;
		dx = (es->*bx).w000C;
		(ss->*bp).tFFFFFFFC.u0 = (uint16) ax;
		(ss->*bp).wFFFFFFFE = dx;
	}
}

// 2644:0D70: define fn2644_0D70
// Called from:
//      fn2644_45CA
define fn2644_0D70
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x10;
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond(es->*((word16) bx + 54) - 0x00);
	if (Test(NE,Z))
		es->*bx = 131;
	else
		es->*bx = 0x03;
	ax -= ax;
	SCZO = cond(ax);
	sp -= 2;
	ss->*sp = ax;
	fn38D6_0304();
	sp -= 2;
	ss->*sp = dx;
	sp -= 2;
	ss->*sp = ax;
	ax = bp - 16;
	sp -= 2;
	ss->*sp = ss;
	sp -= 2;
	ss->*sp = ax;
	fn38D6_06FA();
	sp = (word16) sp + 0x0A;
	es_bx = ss->*((word16) bp + 6);
	al = (ui8) (ss->*((word16) bp - 0x0E));
	cx = ax;
	al <<= 0x01;
	al <<= 0x01;
	al += cl;
	al <<= 0x01;
	al = (ui8) ((word32) (ss->*((word16) bp - 0x0D)) + al);
	al -= 0x10;
	es->*((word16) bx + 1) = al;
	al = (ui8) (ss->*((word16) bp - 0x0C));
	cx = ax;
	al <<= 0x01;
	al <<= 0x01;
	al += cl;
	al <<= 0x01;
	al = (ui8) ((word32) (ss->*((word16) bp - 11)) + al);
	al -= 0x10;
	es->*((word16) bx + 2) = al;
	al = (ui8) (ss->*((word16) bp - 0x0A));
	cx = ax;
	al <<= 0x01;
	al <<= 0x01;
	al += cl;
	al <<= 0x01;
	al = (ui8) ((word32) (ss->*((word16) bp - 9)) + al);
	al -= 0x10;
	es->*((word16) bx + 3) = al;
	ax = es->*((word16) bx + 44);
	dx = es->*((word16) bx + 46);
	es->*((word16) bx + 4) = ax;
	es->*((word16) bx + 6) = dx;
	ax = es->*((word16) bx + 36);
	es->*((word16) bx + 8) = ax;
	ax = es->*((word16) bx + 32);
	es->*((word16) bx + 0x0A) = ax;
	ax.u0 = 0x14;
	sp -= 2;
	ss->*sp = ax;
	ax -= ax;
	sp -= 2;
	ss->*sp = ax;
	ax = bx;
	dx = es;
	ax = (word32) ax.u0 + 0x0C;
	SCZO = cond(ax);
	sp -= 2;
	ss->*sp = dx;
	sp -= 2;
	ss->*sp = ax;
	fn2017_0228();
	sp = (word16) sp + 8;
	ax -= ax;
	SCZO = cond(ax);
	sp -= 2;
	ss->*sp = ax;
	sp -= 2;
	ss->*sp = ax;
	sp -= 2;
	ss->*sp = ax;
	es_bx = ss->*((word16) bp + 6);
	v16 = es->*((word16) bx + 52);
	sp -= 2;
	ss->*sp = v16;
	fn208F_0115();
	sp = (word16) sp + 8;
	SCZO = cond(sp);
	ax.u0 = 0x20;
	sp -= 2;
	ss->*sp = ax;
	v17 = ss->*((word16) bp + 8);
	sp -= 2;
	ss->*sp = v17;
	v18 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v18;
	es_bx = ss->*((word16) bp + 6);
	v19 = es->*((word16) bx + 52);
	sp -= 2;
	ss->*sp = v19;
	fn208F_00EF();
	es_bx = ss->*((word16) bp + 6);
	es->*((word16) bx + 84) = 0x00;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2644:0F82: define fn2644_0F82
// Called from:
//      fn2644_45CA
define fn2644_0F82
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	ax = ss->*((word16) bp + 6);
	ax |= ss->*((word16) bp + 8);
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(NE,Z))
	{
		es_bx = ss->*((word16) bp + 6);
		SCZO = cond((es->*bx).t0034.u0 - 0x00);
		if (Test(NE,Z))
		{
			SCZO = cond((es->*bx).t0034.u0 - ~0x00);
			if (Test(NE,Z))
			{
				v15.u0 = (es->*bx).t0034.u0;
				sp -= 2;
				ss->*sp = v15;
				fn208F_00AE();
				sp = (word16) sp + 2;
				SCZO = cond(sp);
			}
		}
		es_bx = ss->*((word16) bp + 6);
		SCZO = cond((es->*bx).w0036 - 0x00);
		if (Test(NE,Z))
		{
			SCZO = cond((es->*bx).t0038.u0 - ~0x00);
			if (Test(NE,Z))
			{
				v16.u0 = (es->*bx).t0038.u0;
				sp -= 2;
				ss->*sp = v16;
				fn208F_00AE();
				sp = (word16) sp + 2;
				SCZO = cond(sp);
			}
		}
		es_bx = ss->*((word16) bp + 6);
		ax.u0 = (es->*bx).t005A.u0;
		ax |= (es->*bx).t005C.u0;
		SZ = cond(ax);
		O = false;
		C = false;
		if (Test(NE,Z))
		{
			v17.u0 = (es->*bx).t0020.u0;
			sp -= 2;
			ss->*sp = v17;
			v18.u0 = (es->*bx).t005C.u0;
			sp -= 2;
			ss->*sp = v18;
			v19.u0 = (es->*bx).t005A.u0;
			sp -= 2;
			ss->*sp = v19;
			fn21DC_0702();
			sp = (word16) sp + 6;
			SCZO = cond(sp);
		}
		v20 = ss->*((word16) bp + 8);
		sp -= 2;
		ss->*sp = v20;
		v21 = ss->*((word16) bp + 6);
		sp -= 2;
		ss->*sp = v21;
		fn2644_0974();
		sp = (word16) sp + 4;
		es_bx = ss->*((word16) bp + 6);
		SCZO = cond((es->*bx).t00AC.u0 - 0x00);
		if (Test(NE,Z))
		{
			v22.u0 = (es->*bx).t00AC.u0;
			sp -= 2;
			ss->*sp = v22;
			v23.u0 = (es->*bx).t00AA.u0;
			sp -= 2;
			ss->*sp = v23;
			v24.u0 = (es->*bx).t00A8.u0;
			sp -= 2;
			ss->*sp = v24;
			fn21DC_096A();
			sp = (word16) sp + 6;
			SCZO = cond(sp);
		}
		ax.u0 = 0x010C;
		sp -= 2;
		ss->*sp = ax;
		v25 = ss->*((word16) bp + 8);
		sp -= 2;
		ss->*sp = v25;
		v26 = ss->*((word16) bp + 6);
		sp -= 2;
		ss->*sp = v26;
		fn21DC_0702();
		sp = (word16) sp + 6;
		SCZO = cond(sp);
	}
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2644:1756: define fn2644_1756
// Called from:
//      fn2644_17C8
define fn2644_1756
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x06;
	sp -= 2;
	ss->*sp = di;
	sp -= 2;
	ss->*sp = si;
	ax -= ax;
	SCZO = cond(ax);
	ss->*((word16) bp - 4) = ax;
	ss->*((word16) bp - 6) = ax;
	v10 = ss->*((word16) bp + 0x0A);
	sp -= 2;
	ss->*sp = v10;
	v11 = ss->*((word16) bp + 8);
	sp -= 2;
	ss->*sp = v11;
	v12 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v12;
	fn38AD_0118();
	sp = (word16) sp + 6;
	SCZO = cond(sp);
	ss->*((word16) bp - 2) = ax;
	while (true)
	{
		ax = ss->*((word16) bp + 0x0A);
		SCZO = cond(ss->*((word16) bp - 2) - ax);
		if (Test(UGE,C))
			break;
		bx = ss->*((word16) bp - 2);
		es_di = ss->*((word16) bp + 6);
		al = Mem0[es:bx + di:byte];
		ah -= ah;
		SCZO = cond(ah);
		si = ax;
		sp -= 2;
		ss->*sp = si;
		fn38AD_0040();
		sp = (word16) sp + 2;
		SZP = cond(al & 0x02);
		O = false;
		C.u0 = false;
		if (Test(EQ,Z))
			break;
		ax.u0 = 0x0A;
		dx_ax = (int32) ax;
		sp -= 2;
		ss->*sp = dx;
		sp -= 2;
		ss->*sp = ax;
		ax = bp - 6;
		sp -= 2;
		ss->*sp = ax;
		fn3CEE_06EA();
		sp = (word16) sp + 6;
		ax = si - 48;
		dx -= dx;
		v25 = Mem0[ss:bp + -6:word16] + ax;
		ss->*((word16) bp - 6) = v25;
		SCZO = cond(v25);
		v26 = Mem0[ss:bp + -4:word16] + dx + C;
		ss->*((word16) bp - 4) = v26;
		SCZO = cond(v26);
		v27 = (word32) (ss->*((word16) bp - 2)) + 1;
		ss->*((word16) bp - 2) = v27;
		SZO = cond(v27);
	}
	ax = ss->*((word16) bp - 6);
	dx = ss->*((word16) bp - 4);
	si = ss->*sp;
	sp = (word16) sp + 2;
	di = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2644:17C8: define fn2644_17C8
// Called from:
//      fn3CEE_4490
//      fn3CEE_5556
define fn2644_17C8
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x2E;
	sp -= 2;
	ss->*sp = di;
	sp -= 2;
	ss->*sp = si;
	v10 = Mem0[ds:0x1296:word16] + 0x10;
	Mem0[ds:0x1296:word16] = v10;
	es_bx = ss->*((word16) bp + 6);
	bx = es->*((word16) bx + 6);
	bx <<= 0x01;
	bx <<= 0x01;
	es_si = Mem0[ds:4874:segptr32];
	ax = Mem0[es:bx + si:word16];
	dx = es->*((word16) si + ((word16) bx + 2));
	ss->*((word16) bp - 36) = ax;
	ss->*((word16) bp - 0x0022) = dx;
	ax |= dx;
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(NE,Z))
	{
		es_bx = ss->*((word16) bp + 6);
		ax = es->*bx;
		SCZO = cond(ax - 0x10);
		if (Test(NE,Z))
		{
			SCZO = cond(ax - 0x40);
			if (Test(NE,Z))
			{
				SCZO = cond(ax - 0x80);
				if (Test(NE,Z))
				{
					SCZO = cond(ax - 0x0100);
					if (Test(NE,Z))
					{
						SCZO = cond(ax - 0x0300);
						if (Test(NE,Z))
						{
							es_bx = Mem0[ds:0x1296:segptr32];
							(es->*bx).u0 = 0x00;
							si = ss->*sp;
							sp = (word16) sp + 2;
							di = ss->*sp;
							sp = bp;
							bp = ss->*sp;
							sp = (word16) sp + 2;
							return;
						}
						ax.u0 = 0x5E5E;
						ss->*((word16) bp - 40) = ax;
						ss->*((word16) bp - 38) = ds;
						(ss->*((word16) bp - 42)).u0 = 0x00;
						es_bx = ss->*((word16) bp + 6);
						v33 = es->*((word16) bx + 2);
						sp -= 2;
						ss->*sp = v33;
						ax = es->*((word16) bx + 8);
						es_bx = ss->*((word16) bp - 36);
						ax += Mem0[es:bx + 90:word16];
						SCZO = cond(ax);
						dx = es->*((word16) bx + 92);
						sp -= 2;
						ss->*sp = dx;
						sp -= 2;
						ss->*sp = ax;
						fn2644_1756();
						sp = (word16) sp + 6;
						ss->*((word16) bp - 44) = ax;
						ax |= ax;
						SZ = cond(ax);
						O = false;
						C = false;
						if (Test(NE,Z))
						{
							sp -= 2;
							ss->*sp = ax;
							v34 = ss->*((word16) bp - 0x0022);
							sp -= 2;
							ss->*sp = v34;
							v35 = ss->*((word16) bp - 36);
							sp -= 2;
							ss->*sp = v35;
							fn2B9C_000C();
							sp = (word16) sp + 6;
							SCZO = cond(sp);
							ss->*((word16) bp - 42) = ax;
							sp -= 2;
							ss->*sp = ax;
							ax = bp - 40;
							sp -= 2;
							ss->*sp = ss;
							sp -= 2;
							ss->*sp = ax;
							fn21DC_0696();
							sp = (word16) sp + 6;
							ax |= ax;
							SZ = cond(ax);
							O = false;
							C = false;
							if (Test(NE,Z))
							{
								v36 = ss->*((word16) bp - 42);
								sp -= 2;
								ss->*sp = v36;
								v37 = ss->*((word16) bp - 38);
								sp -= 2;
								ss->*sp = v37;
								v38 = ss->*((word16) bp - 40);
								sp -= 2;
								ss->*sp = v38;
								v39 = ss->*((word16) bp - 44);
								sp -= 2;
								ss->*sp = v39;
								v40 = ss->*((word16) bp - 0x0022);
								sp -= 2;
								ss->*sp = v40;
								v41 = ss->*((word16) bp - 36);
								sp -= 2;
								ss->*sp = v41;
								fn2B9C_009C();
								sp = (word16) sp + 0x0C;
								SCZO = cond(sp);
							}
						}
						es_bx = Mem0[ds:0x1296:segptr32];
						(es->*bx).u0 = 0x0300;
						v42 = ss->*((word16) bp - 38);
						sp -= 2;
						ss->*sp = v42;
						v43 = ss->*((word16) bp - 40);
						sp -= 2;
						ss->*sp = v43;
						fn2017_03F5();
						sp = (word16) sp + 4;
						SCZO = cond(sp);
						es_bx = Mem0[ds:0x1296:segptr32];
					}
					else
					{
						es_bx = ss->*((word16) bp + 6);
						ax = es->*((word16) bx + 2);
						ss->*((word16) bp - 46) = ax;
						ax = (word16) ax + 1;
						SZO = cond(ax);
						ss->*((word16) bp - 42) = ax;
						sp -= 2;
						ss->*sp = ax;
						ax = bp - 40;
						sp -= 2;
						ss->*sp = ss;
						sp -= 2;
						ss->*sp = ax;
						fn21DC_0696();
						sp = (word16) sp + 6;
						ax |= ax;
						SZ = cond(ax);
						O = false;
						C = false;
						if (Test(NE,Z))
						{
							v30 = ss->*((word16) bp - 46);
							sp -= 2;
							ss->*sp = v30;
							es_bx = ss->*((word16) bp + 6);
							ax = es->*((word16) bx + 8);
							es_bx = ss->*((word16) bp - 36);
							ax += Mem0[es:bx + 90:word16];
							SCZO = cond(ax);
							dx = es->*((word16) bx + 92);
							sp -= 2;
							ss->*sp = dx;
							sp -= 2;
							ss->*sp = ax;
							v31 = ss->*((word16) bp - 38);
							sp -= 2;
							ss->*sp = v31;
							v32 = ss->*((word16) bp - 40);
							sp -= 2;
							ss->*sp = v32;
							fn2017_02EC();
							sp = (word16) sp + 0x0A;
							SCZO = cond(sp);
							bx = ss->*((word16) bp - 46);
							es_si = ss->*((word16) bp - 40);
							Mem0[es:bx + si:byte] = 0x00;
						}
						es_bx = Mem0[ds:0x1296:segptr32];
						(es->*bx).u0 = 0x0100;
						ax = ss->*((word16) bp - 46);
					}
					es->*((word16) bx + 2) = ax;
					ax = ss->*((word16) bp - 40);
					dx = ss->*((word16) bp - 38);
					es->*((word16) bx + 8) = ax;
					es->*((word16) bx + 0x0A) = dx;
					ax = ss->*((word16) bp - 42);
					es->*((word16) bx + 0x0C) = ax;
					si = ss->*sp;
					sp = (word16) sp + 2;
					di = ss->*sp;
					sp = bp;
					bp = ss->*sp;
					sp = (word16) sp + 2;
				}
				else
				{
					es_bx = Mem0[ds:0x1296:segptr32];
					(es->*bx).u0 = 0x80;
					es_bx = ss->*((word16) bp + 6);
					bx = es->*((word16) bx + 8);
					es_si = ss->*((word16) bp - 36);
					es_si = es->*((word16) si + 90);
					al = Mem0[es:bx + si:byte];
					ah -= ah;
					SCZO = cond(ah);
					sp -= 2;
					ss->*sp = ax;
					fn38AD_0040();
					sp = (word16) sp + 2;
					ax &= 0x08;
					SZ = cond(ax);
					O = false;
					C = false;
					es_bx = Mem0[ds:0x1296:segptr32];
					es->*((word16) bx + 8) = ax;
					si = ss->*sp;
					sp = (word16) sp + 2;
					di = ss->*sp;
					sp = bp;
					bp = ss->*sp;
					sp = (word16) sp + 2;
				}
			}
			else
			{
				es_bx = Mem0[ds:0x1296:segptr32];
				(es->*bx).u0 = 0x20;
				ax -= ax;
				sp -= 2;
				ss->*sp = ax;
				ax = bx;
				dx = es;
				ax = (word16) ax + 8;
				sp -= 2;
				ss->*sp = dx;
				sp -= 2;
				ss->*sp = ax;
				es_bx = ss->*((word16) bp + 6);
				v26 = es->*((word16) bx + 2);
				sp -= 2;
				ss->*sp = v26;
				ax = es->*((word16) bx + 8);
				es_bx = ss->*((word16) bp - 36);
				ax += Mem0[es:bx + 90:word16];
				SCZO = cond(ax);
				dx = es->*((word16) bx + 92);
				sp -= 2;
				ss->*sp = dx;
				sp -= 2;
				ss->*sp = ax;
				fn38D6_03DC();
				sp = (word16) sp + 0x0C;
				SCZO = cond(sp);
				si = ss->*sp;
				sp = (word16) sp + 2;
				di = ss->*sp;
				sp = bp;
				bp = ss->*sp;
				sp = (word16) sp + 2;
			}
		}
		else
		{
			es_bx = Mem0[ds:0x1296:segptr32];
			(es->*bx).u0 = 0x08;
			es_bx = ss->*((word16) bp + 6);
			ax = es->*((word16) bx + 2);
			es_bx = Mem0[ds:0x1296:segptr32];
			es->*((word16) bx + 2) = ax;
			es_bx = ss->*((word16) bp + 6);
			ax = es->*((word16) bx + 4);
			es_bx = Mem0[ds:0x1296:segptr32];
			es->*((word16) bx + 4) = ax;
			es_bx = ss->*((word16) bp + 6);
			v21 = es->*((word16) bx + 2);
			sp -= 2;
			ss->*sp = v21;
			ax = es->*((word16) bx + 8);
			es_bx = ss->*((word16) bp - 36);
			ax += Mem0[es:bx + 90:word16];
			SCZO = cond(ax);
			dx = es->*((word16) bx + 92);
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = ax;
			fn3CEE_0D30();
			sp = (word16) sp + 6;
			SCZO = cond(sp);
			es_bx = Mem0[ds:0x1296:segptr32];
			di = (word16) bx + 8;
			si = ax;
			sp -= 2;
			ss->*sp = ds;
			ds = dx;
			v22 = ds->*si;
			es->*di = v22;
			si = (word16) si + 2;
			di = (word16) di + 2;
			v23 = ds->*si;
			es->*di = v23;
			si = (word16) si + 2;
			di = (word16) di + 2;
			v24 = ds->*si;
			es->*di = v24;
			si = (word16) si + 2;
			di = (word16) di + 2;
			v25 = ds->*si;
			es->*di = v25;
			ds = ss->*sp;
			sp = (word16) sp + 2;
			si = ss->*sp;
			sp = (word16) sp + 2;
			di = ss->*sp;
			sp = bp;
			bp = ss->*sp;
			sp = (word16) sp + 2;
		}
	}
	else
	{
		es_bx = Mem0[ds:0x1296:segptr32];
		(es->*bx).u0 = 0x80;
		(es->*((word16) bx + 8)).u0 = 0x00;
		Mem0[ds:0x10D2:word16] = 0x14;
		si = ss->*sp;
		sp = (word16) sp + 2;
		di = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
	}
}

// 2644:1F12: define fn2644_1F12
// Called from:
//      fn2644_27D4
//      fn2644_2B40
//      fn2644_2C1A
//      fn2644_2CF0
//      fn2644_44C4
//      fn2644_45CA
//      fn2EB3_0064
//      fn2EB3_07B2
define fn2644_1F12
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x08;
	sp -= 2;
	ss->*sp = si;
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond(es->*((word16) bx + 86) - 0x00);
	if (Test(NE,Z))
	{
		(ss->*((word16) bp - 4)).u0 = 0x01;
		while (true)
		{
			es_bx = ss->*((word16) bp + 6);
			ax = ss->*((word16) bp - 4);
			SCZO = cond(es->*((word16) bx + 100) - ax);
			if (Test(ULT,C))
				break;
			v16 = es->*((word16) bx + 88);
			sp -= 2;
			ss->*sp = v16;
			v17 = es->*((word16) bx + 42);
			sp -= 2;
			ss->*sp = v17;
			v18 = es->*((word16) bx + 40);
			sp -= 2;
			ss->*sp = v18;
			si = ss->*((word16) bp - 4);
			si <<= 0x01;
			si <<= 0x01;
			SCZO = cond(si);
			v19 = es->*((word16) si + ((word16) bx + 0x0068));
			sp -= 2;
			ss->*sp = v19;
			v20 = es->*((word16) si + ((word16) bx + 0x0066));
			sp -= 2;
			ss->*sp = v20;
			fn2EB3_24C6();
			sp = (word16) sp + 0x0A;
			SCZO = cond(sp);
			v21 = (word32) (ss->*((word16) bp - 4)) + 1;
			ss->*((word16) bp - 4) = v21;
			SZO = cond(v21);
		}
		sp -= 2;
		ss->*sp = es;
		sp -= 2;
		ss->*sp = bx;
		fn2644_21CA();
		sp = (word16) sp + 4;
		SCZO = cond(sp);
		es_bx = ss->*((word16) bp + 6);
		es->*((word16) bx + 86) = 0x00;
		es->*((word16) bx + 84) = 0x01;
		(es->*((word16) bx + 88)).u0 = 0x00;
	}
	(ss->*((word16) bp - 2)).u0 = 0x00;
	SCZO = cond(ss->*((word16) bp + 0x0A) - 0x05);
	if (Test(EQ,Z))
	{
		(ss->*((word16) bp - 4)).u0 = 0x01;
		while (true)
		{
			es_bx = ss->*((word16) bp + 6);
			ax = ss->*((word16) bp - 4);
			SCZO = cond(es->*((word16) bx + 100) - ax);
			if (Test(ULT,C))
				break;
			si = ax;
			si <<= 0x01;
			si <<= 0x01;
			SCZO = cond(si);
			v14 = es->*((word16) si + ((word16) bx + 0x0068));
			sp -= 2;
			ss->*sp = v14;
			v15 = es->*((word16) si + ((word16) bx + 0x0066));
			sp -= 2;
			ss->*sp = v15;
			fn2EB3_240A();
			sp = (word16) sp + 4;
			SCZO = cond(sp);
			v23 = (word32) (ss->*((word16) bp - 4)) + 1;
			ss->*((word16) bp - 4) = v23;
			SZO = cond(v23);
		}
	}
	else
	{
		es_bx = ss->*((word16) bp + 6);
		SCZO = cond(es->*((word16) bx + 98) - 0x00);
		if (Test(NE,Z))
		{
			si = es->*((word16) bx + 98);
			si <<= 0x01;
			si <<= 0x01;
			ax = es->*((word16) si + ((word16) bx + 0x0066));
			dx = es->*((word16) si + ((word16) bx + 0x0068));
			ss->*((word16) bp - 8) = ax;
			ss->*((word16) bp - 6) = dx;
			ax = ss->*((word16) bp + 0x0A);
			SCZO = cond(ax - 0x02);
			if (Test(NE,Z))
			{
				SCZO = cond(ax - 0x03);
				if (Test(NE,Z))
				{
					SCZO = cond(ax - 0x04);
					if (Test(EQ,Z))
					{
						es_bx = ss->*((word16) bp - 8);
						SCZO = cond(es->*((word16) bx + 2) - 0x00);
						if (Test(NE,Z))
						{
							v25 = es->*bx;
							sp -= 2;
							ss->*sp = v25;
							fn207F_0048();
							sp = (word16) sp + 2;
							SCZO = cond(sp);
						}
					}
				}
				else
				{
					es_bx = ss->*((word16) bp - 8);
					SCZO = cond(es->*((word16) bx + 2) - 0x00);
					if (Test(NE,Z))
					{
						sp -= 2;
						ss->*sp = es;
						sp -= 2;
						ss->*sp = bx;
						fn2EB3_0B54();
						sp = (word16) sp + 4;
						SCZO = cond(sp);
						(ss->*((word16) bp - 2)).u0 = 0x01;
					}
					es_bx = ss->*((word16) bp - 8);
					SCZO = cond(es->*((word16) bx + 46) - 0x00);
					if (Test(EQ,Z))
					{
						es_bx = ss->*((word16) bp + 6);
						SCZO = cond(es->*((word16) bx + 66) - 0x00);
						if (Test(NE,Z))
						{
							v26 = es->*((word16) bx + 42);
							sp -= 2;
							ss->*sp = v26;
							v27 = es->*((word16) bx + 40);
							sp -= 2;
							ss->*sp = v27;
							v28 = ss->*((word16) bp - 6);
							sp -= 2;
							ss->*sp = v28;
							v29 = ss->*((word16) bp - 8);
							sp -= 2;
							ss->*sp = v29;
							fn2EB3_2450();
							sp = (word16) sp + 8;
							SCZO = cond(sp);
						}
					}
				}
			}
			else
			{
				es_bx = ss->*((word16) bp - 8);
				SCZO = cond(es->*((word16) bx + 2) - 0x00);
				if (Test(NE,Z))
				{
					sp -= 2;
					ss->*sp = es;
					sp -= 2;
					ss->*sp = bx;
					fn2EB3_0B54();
					sp = (word16) sp + 4;
					SCZO = cond(sp);
					(ss->*((word16) bp - 2)).u0 = 0x01;
				}
			}
		}
	}
	ax = ss->*((word16) bp - 2);
	si = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2644:2068: define fn2644_2068
// Called from:
//      fn2644_22BE
//      fn2644_2CF0
//      fn2644_45CA
define fn2644_2068
{
	sp = fp;
	Top = 0;
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_65118 Eq_65125::*) bp;
	bp = sp;
	sp -= 0x04;
	ax = &Eq_65125::t0002;
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_65118 Eq_65125::*) ax;
	ax -= ax;
	SCZO = cond(ax);
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_65118 Eq_65125::*) ax;
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_65118 Eq_65125::*) ax;
	es_bx.u1 = (ss->*bp).t0006.u1;
	v11 = (es->*bx).ptr0034;
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_65118 Eq_65125::*) v11;
	fn208F_0115();
	sp = (struct Eq_65118 Eq_65125::*) ((char *) &sp->t0006 + 2);
	(ss->*bp).ptrFFFFFFFC = (struct Eq_65118 Eq_65125::*) ax;
	(ss->*bp).ptrFFFFFFFE = (struct Eq_65118 Eq_65125::*) dx;
	es_bx.u1 = (ss->*bp).t0006.u1;
	v13 = (es->*bx).ptr0022;
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_65118 Eq_65125::*) v13;
	v14 = (es->*bx).ptr0020;
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_65118 Eq_65125::*) v14;
	ax -= (es->*bx).w0024;
	SCZO = cond(ax);
	dx = dx - (es->*bx).w0026 - C;
	SCZO = cond(dx);
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_65118 Eq_65125::*) dx;
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_65118 Eq_65125::*) ax;
	fn3CEE_0500();
	sp = bp;
	bp = (struct Eq_65118 Eq_65125::*) (ss->*sp).ptr0000;
	sp = (struct Eq_65118 Eq_65125::*) &sp->ptr0000;
}

// 2644:20AA: define fn2644_20AA
// Called from:
//      fn2644_22BE
define fn2644_20AA
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x0A;
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond(es->*((word16) bx + 50) - 0x00);
	if (Test(EQ,Z))
	{
		ax = es->*((word16) bx + 48);
		ss->*((word16) bp - 2) = ax;
		ax |= ax;
		SZ = cond(ax);
		O = false;
		C.u0 = false;
		if (Test(NE,Z))
		{
			v15 = es->*((word16) bx + 42);
			sp -= 2;
			ss->*sp = v15;
			v16 = es->*((word16) bx + 40);
			sp -= 2;
			ss->*sp = v16;
			sp -= 2;
			ss->*sp = ax;
			fn2D1A_02FC();
			sp = (word16) sp + 6;
			ss->*((word16) bp - 0x0A) = ax;
			ss->*((word16) bp - 8) = dx;
			ax |= dx;
			SZ = cond(ax);
			O = false;
			C.u0 = false;
			if (Test(NE,Z))
			{
				es_bx = ss->*((word16) bp + 6);
				v18 = es->*((word16) bx + 32);
				sp -= 2;
				ss->*sp = v18;
				sp -= 2;
				ss->*sp = dx;
				v19 = ss->*((word16) bp - 0x0A);
				sp -= 2;
				ss->*sp = v19;
				v20 = es->*((word16) bx + 92);
				sp -= 2;
				ss->*sp = v20;
				v21 = es->*((word16) bx + 90);
				sp -= 2;
				ss->*sp = v21;
				fn2017_0258();
				sp = (word16) sp + 0x0A;
				SCZO = cond(sp);
			}
			else
				(ss->*((word16) bp - 2)).u0 = 0x00;
		}
		SCZO = cond(ss->*((word16) bp - 2) - 0x00);
		if (Test(EQ,Z))
		{
			es_bx = ss->*((word16) bp + 6);
			v22 = es->*((word16) bx + 0x0022);
			sp -= 2;
			ss->*sp = v22;
			v23 = es->*((word16) bx + 32);
			sp -= 2;
			ss->*sp = v23;
			ax = es->*((word16) bx + 40);
			dx = es->*((word16) bx + 42);
			--ax;
			SCZO = cond(ax);
			dx = dx - 0x00 - C;
			SCZO = cond(dx);
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = ax;
			fn3CEE_05A6();
			sp = (word16) sp + 8;
			es_bx = ss->*((word16) bp + 6);
			ax += Mem0[es:bx + 36:word16];
			SCZO = cond(ax);
			dx = dx + Mem0[es:bx + 38:word16] + C;
			ss->*((word16) bp - 6) = ax;
			ss->*((word16) bp - 4) = dx;
			ax -= ax;
			SCZO = cond(ax);
			sp -= 2;
			ss->*sp = ax;
			sp -= 2;
			ss->*sp = dx;
			v24 = ss->*((word16) bp - 6);
			sp -= 2;
			ss->*sp = v24;
			v25 = es->*((word16) bx + 52);
			sp -= 2;
			ss->*sp = v25;
			fn208F_0115();
			sp = (word16) sp + 8;
			SCZO = cond(sp);
			es_bx = ss->*((word16) bp + 6);
			v26 = es->*((word16) bx + 32);
			sp -= 2;
			ss->*sp = v26;
			v27 = es->*((word16) bx + 92);
			sp -= 2;
			ss->*sp = v27;
			v28 = es->*((word16) bx + 90);
			sp -= 2;
			ss->*sp = v28;
			v29 = es->*((word16) bx + 52);
			sp -= 2;
			ss->*sp = v29;
			fn208F_00C9();
			sp = (word16) sp + 8;
			SCZO = cond(sp);
		}
		es_bx = ss->*((word16) bp + 6);
		es->*((word16) bx + 66) = 0x01;
		es_bx = es->*((word16) bx + 90);
		SCZO = cond(es->*bx - 0x2A);
		if (Test(EQ,Z))
			ax.u0 = 0x01;
		else
		{
			ax -= ax;
			SCZO = cond(ax);
		}
		es_bx = ss->*((word16) bp + 6);
		es->*((word16) bx + 70) = ax;
		es->*((word16) bx + 72) = 0x00;
		es->*((word16) bx + 74) = 0x00;
		es->*((word16) bx + 76) = 0x00;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
		return;
	}
	SCZO = cond(es->*((word16) bx + 50) - 0x01);
	if (Test(EQ,Z))
	{
		sp -= 2;
		ss->*sp = es;
		sp -= 2;
		ss->*sp = bx;
		fn2B41_00B4();
	}
	else
	{
		es_bx = ss->*((word16) bp + 6);
		SCZO = cond(es->*((word16) bx + 50) - 0x02);
		if (Test(NE,Z))
			goto l2644_21C6;
		sp -= 2;
		ss->*sp = es;
		sp -= 2;
		ss->*sp = bx;
		fn2B41_01FA();
	}
	sp = (word16) sp + 4;
	SCZO = cond(sp);
l2644_21C6:
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2644:21CA: define fn2644_21CA
// Called from:
//      fn2644_1F12
define fn2644_21CA
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x08;
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond(es->*((word16) bx + 50) - 0x00);
	if (Test(NE,Z))
	{
		es_bx = ss->*((word16) bp + 6);
		SCZO = cond(es->*((word16) bx + 50) - 0x01);
		if (Test(EQ,Z))
		{
			sp -= 2;
			ss->*sp = es;
			sp -= 2;
			ss->*sp = bx;
			fn2B41_01B8();
		}
		else
		{
			es_bx = ss->*((word16) bp + 6);
			SCZO = cond(es->*((word16) bx + 50) - 0x02);
			if (Test(NE,Z))
				goto l2644_22BA;
			sp -= 2;
			ss->*sp = es;
			sp -= 2;
			ss->*sp = bx;
			fn2B41_042E();
		}
		sp = (word16) sp + 4;
		SCZO = cond(sp);
	}
	else
	{
		ax = es->*((word16) bx + 48);
		ss->*((word16) bp - 2) = ax;
		ax |= ax;
		SZ = cond(ax);
		O = false;
		C.u0 = false;
		if (Test(NE,Z))
		{
			v15 = es->*((word16) bx + 92);
			sp -= 2;
			ss->*sp = v15;
			v16 = es->*((word16) bx + 90);
			sp -= 2;
			ss->*sp = v16;
			v17 = es->*((word16) bx + 42);
			sp -= 2;
			ss->*sp = v17;
			v18 = es->*((word16) bx + 40);
			sp -= 2;
			ss->*sp = v18;
			sp -= 2;
			ss->*sp = ax;
			fn2D1A_03E4();
			sp = (word16) sp + 0x0A;
			dx |= ax;
			SZ = cond(dx);
			O = false;
			C.u0 = false;
			if (Test(EQ,Z))
				(ss->*((word16) bp - 2)).u0 = 0x00;
		}
		SCZO = cond(ss->*((word16) bp - 2) - 0x00);
		if (Test(EQ,Z))
		{
			es_bx = ss->*((word16) bp + 6);
			v20 = es->*((word16) bx + 0x0022);
			sp -= 2;
			ss->*sp = v20;
			v21 = es->*((word16) bx + 32);
			sp -= 2;
			ss->*sp = v21;
			ax = es->*((word16) bx + 40);
			dx = es->*((word16) bx + 42);
			--ax;
			SCZO = cond(ax);
			dx = dx - 0x00 - C;
			SCZO = cond(dx);
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = ax;
			fn3CEE_05A6();
			sp = (word16) sp + 8;
			es_bx = ss->*((word16) bp + 6);
			ax += Mem0[es:bx + 36:word16];
			SCZO = cond(ax);
			dx = dx + Mem0[es:bx + 38:word16] + C;
			ss->*((word16) bp - 6) = ax;
			ss->*((word16) bp - 4) = dx;
			ax -= ax;
			SCZO = cond(ax);
			sp -= 2;
			ss->*sp = ax;
			sp -= 2;
			ss->*sp = dx;
			v22 = ss->*((word16) bp - 6);
			sp -= 2;
			ss->*sp = v22;
			v23 = es->*((word16) bx + 52);
			sp -= 2;
			ss->*sp = v23;
			fn208F_0115();
			sp = (word16) sp + 8;
			SCZO = cond(sp);
			es_bx = ss->*((word16) bp + 6);
			v24 = es->*((word16) bx + 32);
			sp -= 2;
			ss->*sp = v24;
			v25 = es->*((word16) bx + 92);
			sp -= 2;
			ss->*sp = v25;
			v26 = es->*((word16) bx + 90);
			sp -= 2;
			ss->*sp = v26;
			v27 = es->*((word16) bx + 52);
			sp -= 2;
			ss->*sp = v27;
			fn208F_00EF();
			sp = (word16) sp + 8;
			ss->*((word16) bp - 8) = ax;
			es_bx = ss->*((word16) bp + 6);
			SCZO = cond(es->*((word16) bx + 32) - ax);
			if (Test(NE,Z))
			{
				ax.u0 = 0x5E70;
				sp -= 2;
				ss->*sp = ds;
				sp -= 2;
				ss->*sp = ax;
				ax -= ax;
				SCZO = cond(ax);
				sp -= 2;
				ss->*sp = ax;
				fn20B2_10AC();
				sp = (word16) sp + 6;
				SCZO = cond(sp);
				sp = bp;
				bp = ss->*sp;
				sp = (word16) sp + 2;
				return;
			}
		}
	}
l2644_22BA:
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2644:22BE: define fn2644_22BE
// Called from:
//      fn2644_2384
//      fn2644_27D4
//      fn2644_2B40
//      fn2644_2C1A
//      fn2644_2CF0
//      fn2EB3_07B2
define fn2644_22BE
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	es_bx = ss->*((word16) bp + 6);
	SCZO = cond(es->*((word16) bx + 58) - 0x00);
	if (Test(NE,Z))
	{
		ax = ss->*((word16) bp + 0x0A);
		dx = (word16) (ss->*((word16) bp + 0x0C));
		SCZO = cond(es->*((word16) bx + 46) - dx);
		if (Test(GT,SZO))
			goto l2644_22F3;
		if (Test(LT,SO))
		{
l2644_22DF:
			sp -= 2;
			ss->*sp = es;
			sp -= 2;
			ss->*sp = bx;
			fn2644_2068();
			sp = (word16) sp + 4;
			SCZO = cond(sp);
			es_bx = ss->*((word16) bp + 6);
			es->*((word16) bx + 44) = ax;
			es->*((word16) bx + 46) = dx;
			goto l2644_22F3;
		}
		SCZO = cond(es->*((word16) bx + 44) - ax);
		if (Test(ULT,C))
			goto l2644_22DF;
	}
l2644_22F3:
	ax = ss->*((word16) bp + 0x0A);
	dx = (word16) (ss->*((word16) bp + 0x0C));
	SCZO = cond(es->*((word16) bx + 46) - dx);
	if (Test(GE,SO))
	{
		if (Test(GT,SZO))
		{
l2644_2307:
			SCZO = cond(ss->*((word16) bp + 0x0C) - 0x00);
			if (Test(GE,SO))
			{
				if (Test(GT,SZO))
				{
l2644_2315:
					es_bx = ss->*((word16) bp + 6);
					ax = ss->*((word16) bp + 0x0A);
					dx = (word16) (ss->*((word16) bp + 0x0C));
					es->*((word16) bx + 40) = ax;
					es->*((word16) bx + 42) = dx;
					sp -= 2;
					ss->*sp = es;
					sp -= 2;
					ss->*sp = bx;
					fn2644_20AA();
					sp = (word16) sp + 4;
					SCZO = cond(sp);
					bp = ss->*sp;
					sp = (word16) sp + 2;
					return;
				}
				SCZO = cond(ss->*((word16) bp + 0x0A) - 0x01);
				if (Test(UGE,C))
					goto l2644_2315;
			}
			goto l2644_2332;
		}
		SCZO = cond(es->*((word16) bx + 44) - ax);
		if (Test(UGE,C))
			goto l2644_2307;
	}
l2644_2332:
	es_bx = ss->*((word16) bp + 6);
	ax = es->*((word16) bx + 44);
	dx = (word16) (es->*((word16) bx + 46));
	ax = (word16) ax + 1;
	SCZO = cond(ax);
	dx = (word16) ((bool) C + (dx + 0x00));
	SCZO = cond(dx);
	es->*((word16) bx + 40) = ax;
	es->*((word16) bx + 42) = dx;
	es->*((word16) bx + 66) = 0x00;
	es->*((word16) bx + 70) = 0x00;
	es->*((word16) bx + 72) = 0x01;
	es->*((word16) bx + 74) = 0x01;
	es->*((word16) bx + 76) = 0x00;
	v16 = es->*((word16) bx + 32);
	sp -= 2;
	ss->*sp = v16;
	ax.u0 = 0x20;
	sp -= 2;
	ss->*sp = ax;
	v17 = es->*((word16) bx + 92);
	sp -= 2;
	ss->*sp = v17;
	v18 = es->*((word16) bx + 90);
	sp -= 2;
	ss->*sp = v18;
	fn2017_0228();
	sp = (word16) sp + 8;
	SCZO = cond(sp);
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2644:2384: define fn2644_2384
// Called from:
//      fn2644_27D4
//      fn2644_2C1A
//      fn2644_2CF0
//      fn2EB3_07B2
define fn2644_2384
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x08;
	sp -= 2;
	ss->*sp = si;
	SCZO = cond(ds->w10D2 - 0x00);
	if (Test(EQ,Z))
	{
		(ss->*((word16) bp - 2)).u0 = 0x00;
		(ss->*((word16) bp - 8)).u0 = 0x01;
		while (true)
		{
			es_bx = ss->*((word16) bp + 6);
			SCZO = cond(es->*((word16) bx + 66) - 0x00);
			if (Test(EQ,Z))
				break;
			SCZO = cond(ss->*((word16) bp - 8) - 0x00);
			if (Test(EQ,Z))
				break;
			es_bx = ss->*((word16) bp + 6);
			SCZO = cond(es->*((word16) bx + 0x00B0) - 0x00);
			if (Test(NE,Z))
			{
				ax.u0 = 0x08;
				sp -= 2;
				ss->*sp = ax;
				v14 = es->*((word16) bx + 0x00B0);
				sp -= 2;
				ss->*sp = v14;
				fn31FF_1BE6();
				sp = (word16) sp + 4;
				es_bx = ds->t1296;
				SCZO = cond(es->*((word16) bx + 8) - 0x00);
				if (Test(NE,Z))
				{
					SCZO = cond(ds->w13E8 - 0x00);
					if (Test(NE,Z))
					{
						es_bx = ss->*((word16) bp + 6);
						SCZO = cond(es->*((word16) bx + 70) - 0x00);
						if (Test(NE,Z))
							goto l2644_23E9;
					}
					ax -= ax;
					SCZO = cond(ax);
				}
				else
				{
l2644_23E9:
					ax.u0 = 0x01;
				}
				ss->*((word16) bp - 8) = ax;
				SCZO = cond(ds->w10D2 - 0x00);
				if (Test(EQ,Z))
				{
					es_bx = ds->t1296;
					SCZO = cond(es->*bx - 0x80);
					if (Test(NE,Z))
					{
						ds->w10D6 = 0x08;
						ds->w10D2 = 0x01;
					}
				}
				fn2368_033C();
				SCZO = cond(ds->w10D2 - 0x00);
				if (Test(NE,Z))
					goto l2644_2392;
				goto l2644_243B;
			}
			SCZO = cond(ds->w13E8 - 0x00);
			if (Test(NE,Z))
			{
				es_bx = ss->*((word16) bp + 6);
				SCZO = cond(es->*((word16) bx + 70) - 0x00);
				if (Test(EQ,Z))
					goto l2644_2436;
				ax.u0 = 0x01;
			}
			else
			{
l2644_2436:
				ax -= ax;
				SCZO = cond(ax);
			}
			ss->*((word16) bp - 8) = ax;
l2644_243B:
			SCZO = cond(ss->*((word16) bp - 8) - 0x00);
			if (Test(NE,Z))
			{
				(ss->*((word16) bp - 2)).u0 = 0x01;
				es_bx = ss->*((word16) bp + 6);
				SCZO = cond(es->*((word16) bx + 98) - 0x00);
				if (Test(NE,Z))
				{
					v15 = ss->*((word16) bp + 0x0C);
					sp -= 2;
					ss->*sp = v15;
					v16 = ss->*((word16) bp + 0x0A);
					sp -= 2;
					ss->*sp = v16;
					si = es->*((word16) bx + 98);
					si <<= 0x01;
					si <<= 0x01;
					SCZO = cond(si);
					v17 = es->*((word16) si + ((word16) bx + 0x0068));
					sp -= 2;
					ss->*sp = v17;
					v18 = es->*((word16) si + ((word16) bx + 0x0066));
					sp -= 2;
					ss->*sp = v18;
					fn2EB3_2062();
					sp = (word16) sp + 8;
					SCZO = cond(sp);
				}
				else
				{
					es_bx = ss->*((word16) bp + 6);
					ax = es->*((word16) bx + 40);
					dx = es->*((word16) bx + 42);
					ax += Mem0[ss:bp + 0x0A:word16];
					SCZO = cond(ax);
					dx = dx + Mem0[ss:bp + 0x0C:word16] + C;
					SCZO = cond(dx);
				}
				ss->*((word16) bp - 6) = ax;
				ss->*((word16) bp - 4) = dx;
				sp -= 2;
				ss->*sp = dx;
				sp -= 2;
				ss->*sp = ax;
				v20 = ss->*((word16) bp + 8);
				sp -= 2;
				ss->*sp = v20;
				v21 = ss->*((word16) bp + 6);
				sp -= 2;
				ss->*sp = v21;
				fn2644_22BE();
				sp = (word16) sp + 8;
				es_bx = ss->*((word16) bp + 6);
				SCZO = cond(es->*((word16) bx + 0x00BA) - 0x00);
				if (Test(NE,Z))
				{
					sp -= 2;
					ss->*sp = es;
					sp -= 2;
					ss->*sp = bx;
					fn2644_24C0();
					sp = (word16) sp + 4;
					SCZO = cond(sp);
				}
			}
		}
		ax = ss->*((word16) bp - 2);
		si = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
	}
	else
	{
l2644_2392:
		ax -= ax;
		SCZO = cond(ax);
		si = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
	}
}

// 2644:24C0: define fn2644_24C0
// Called from:
//      fn2644_2384
//      fn2644_27D4
//      fn2644_2B40
//      fn2644_2C1A
//      fn2644_2CF0
//      fn2EB3_07B2
define fn2644_24C0
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x12;
	SCZO = cond(sp);
	sp -= 2;
	ss->*sp = di;
	sp -= 2;
	ss->*sp = si;
	(ss->*((word16) bp - 0x0A)).u0 = 0x00;
	while (true)
	{
		es_bx = ss->*((word16) bp + 6);
		ax = ss->*((word16) bp - 0x0A);
		SCZO = cond(es->*((word16) bx + 0x00BA) - ax);
		if (Test(ULE,CZ))
			break;
		SCZO = cond(Mem0[ds:0x10D2:word16] - 0x00);
		if (Test(NE,Z))
			break;
		cx = ax;
		ax <<= 0x01;
		ax <<= 0x01;
		ax += cx;
		ax <<= 0x01;
		ax += bx;
		dx = es;
		ax = (word16) ax + 188;
		ss->*((word16) bp - 8) = ax;
		ss->*((word16) bp - 6) = dx;
		es_bx = ss->*((word16) bp - 8);
		bx = es->*((word16) bx + 2);
		bx <<= 0x01;
		bx <<= 0x01;
		es_si = Mem0[ds:4874:segptr32];
		ax = Mem0[es:bx + si:word16];
		ax |= es->*((word16) si + ((word16) bx + 2));
		SZ = cond(ax);
		O = false;
		C = false;
		if (Test(NE,Z))
		{
			es_bx = ss->*((word16) bp + 6);
			SCZO = cond(es->*((word16) bx + 66) - 0x00);
			if (Test(NE,Z))
			{
				ax = Mem0[ds:0x12FC:word16];
				SCZO = cond(es->*((word16) bx + 60) - ax);
				if (Test(NE,Z))
				{
					ax = Mem0[ds:0x12FC:word16];
					ss->*((word16) bp - 2) = ax;
					es_bx = ss->*((word16) bp + 6);
					ax = es->*((word16) bx + 60);
					Mem0[ds:0x12FC:word16] = ax;
					bx = es->*((word16) bx + 60);
					bx <<= 0x01;
					bx <<= 0x01;
					SCZO = cond(bx);
					es_si = Mem0[ds:4874:segptr32];
					ax = Mem0[es:bx + si:word16];
					dx = es->*((word16) si + ((word16) bx + 2));
					bx = si;
					es->*bx = ax;
					es->*((word16) bx + 2) = dx;
					ax.u0 = 0x04;
					sp -= 2;
					ss->*sp = ax;
					es_bx = ss->*((word16) bp - 8);
					v25 = es->*bx;
					sp -= 2;
					ss->*sp = v25;
					fn31FF_1BE6();
					sp = (word16) sp + 4;
					ax = ss->*((word16) bp - 2);
					Mem0[ds:0x12FC:word16] = ax;
					bx = ax;
					bx <<= 0x01;
					bx <<= 0x01;
					SCZO = cond(bx);
					es_si = Mem0[ds:4874:segptr32];
					ax = Mem0[es:bx + si:word16];
					dx = es->*((word16) si + ((word16) bx + 2));
					bx = si;
					es->*bx = ax;
					es->*((word16) bx + 2) = dx;
				}
				else
				{
					ax.u0 = 0x04;
					sp -= 2;
					ss->*sp = ax;
					es_bx = ss->*((word16) bp - 8);
					v24 = es->*bx;
					sp -= 2;
					ss->*sp = v24;
					fn31FF_1BE6();
					sp = (word16) sp + 4;
					SCZO = cond(sp);
				}
				SCZO = cond(Mem0[ds:0x10D2:word16] - 0x00);
				if (Test(NE,Z))
				{
					fn2368_033C();
					si = ss->*sp;
					sp = (word16) sp + 2;
					di = ss->*sp;
					sp = bp;
					bp = ss->*sp;
					sp = (word16) sp + 2;
					return;
				}
				es_bx = ss->*((word16) bp - 8);
				bx = es->*((word16) bx + 2);
				bx <<= 0x01;
				bx <<= 0x01;
				es_si = Mem0[ds:4874:segptr32];
				ax = Mem0[es:bx + si:word16];
				dx = es->*((word16) si + ((word16) bx + 2));
				ss->*((word16) bp - 18) = ax;
				ss->*((word16) bp - 16) = dx;
				es_bx = ss->*((word16) bp - 18);
				SCZO = cond(es->*((word16) bx + 98) - 0x00);
				if (Test(NE,Z))
				{
					ax -= ax;
					sp -= 2;
					ss->*sp = ax;
					ax = Mem0[ds:0x1296:word16];
					dx = Mem0[ds:0x1298:word16];
					sp -= 0x10;
					SCZO = cond(sp);
					si = ax;
					di = sp;
					sp -= 2;
					ss->*sp = ss;
					es = ss->*sp;
					sp = (word16) sp + 2;
					sp -= 2;
					ss->*sp = ds;
					ds = dx;
					cx.u0 = 0x08;
					size = cx *32 0x02;
					memcpy(di, si, size);
					cx.u0 = 0x00;
					si += SLICE(size, word16, 0);
					di = (<unknown>*) ((char *) di + (word16) size);
					ds = ss->*sp;
					sp = (word16) sp + 2;
					v29 = ss->*((word16) bp - 16);
					sp -= 2;
					ss->*sp = v29;
					sp -= 2;
					ss->*sp = bx;
					fn2EB3_07B2();
					sp = (word16) sp + 22;
					SCZO = cond(sp);
					goto l2644_25F9;
				}
				es_bx = Mem0[ds:0x1296:segptr32];
				SZP = cond(es->*bx & 0x08);
				O = false;
				C = false;
				if (Test(NE,Z))
				{
					v31 = es->*((word16) bx + 0x0E);
					sp -= 2;
					ss->*sp = v31;
					v32 = es->*((word16) bx + 0x0C);
					sp -= 2;
					ss->*sp = v32;
					v33 = es->*((word16) bx + 0x0A);
					sp -= 2;
					ss->*sp = v33;
					v34 = es->*((word16) bx + 8);
					sp -= 2;
					ss->*sp = v34;
					fn3CEE_0C5A();
					sp = (word16) sp + 8;
					SCZO = cond(sp);
					goto l2644_25B2;
				}
				es_bx = Mem0[ds:0x1296:segptr32];
				SZP = cond(es->*bx & 0x02);
				O = false;
				C = false;
				if (Test(NE,Z))
				{
					ax = es->*((word16) bx + 8);
					dx = es->*((word16) bx + 0x0A);
l2644_25B2:
					ss->*((word16) bp - 0x0E) = ax;
					ss->*((word16) bp - 0x0C) = dx;
				}
				else
				{
					ax -= ax;
					SCZO = cond(ax);
					ss->*((word16) bp - 0x0C) = ax;
					ss->*((word16) bp - 0x0E) = ax;
				}
				v35 = ss->*((word16) bp - 0x0C);
				sp -= 2;
				ss->*sp = v35;
				v36 = ss->*((word16) bp - 0x0E);
				sp -= 2;
				ss->*sp = v36;
				es_bx = ss->*((word16) bp - 8);
				bx = es->*((word16) bx + 2);
				bx <<= 0x01;
				bx <<= 0x01;
				SCZO = cond(bx);
				es_si = Mem0[ds:4874:segptr32];
				v37 = es->*((char *) si + ((word16) bx + 2));
				sp -= 2;
				ss->*sp = v37;
				v38 = Mem0[es:bx + si:word16];
				sp -= 2;
				ss->*sp = v38;
				fn2644_2B40();
				sp = (word16) sp + 8;
				SCZO = cond(sp);
l2644_25F9:
				fn2368_033C();
			}
			else
			{
				ax -= ax;
				sp -= 2;
				ss->*sp = ax;
				sp -= 2;
				ss->*sp = ax;
				es_bx = ss->*((word16) bp - 8);
				bx = es->*((word16) bx + 2);
				bx <<= 0x01;
				bx <<= 0x01;
				SCZO = cond(bx);
				es_si = Mem0[ds:4874:segptr32];
				v26 = es->*((word16) si + ((word16) bx + 2));
				sp -= 2;
				ss->*sp = v26;
				v27 = Mem0[es:bx + si:word16];
				sp -= 2;
				ss->*sp = v27;
				fn2644_2B40();
				sp = (word16) sp + 8;
				SCZO = cond(sp);
			}
		}
		v22 = (word32) (ss->*((word16) bp - 0x0A)) + 1;
		ss->*((word16) bp - 0x0A) = v22;
		SZO = cond(v22);
	}
	si = ss->*sp;
	sp = (word16) sp + 2;
	di = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2644:27D4: define fn2644_27D4
// Called from:
//      fn3CEE_3C50
define fn2644_27D4
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x18;
	sp -= 2;
	ss->*sp = si;
	ax = ds->t12B2;
	dx = ds->t12B4;
	ss->*((word16) bp - 0x0E) = ax;
	ss->*((word16) bp - 0x0C) = dx;
	dx |= dx;
	SZ = cond(dx);
	O = false;
	C.u0 = false;
	if (Test(LT,SO))
		ax.u0 = ~0x00;
	else
		ax.u0 = 0x01;
	dx_ax = (int32) ax;
	ss->*((word16) bp - 24) = ax;
	ss->*((word16) bp - 22) = dx;
	es_bx = ds->t130A;
	ax = es->*bx;
	dx = es->*((word16) bx + 2);
	ss->*((word16) bp - 0x0A) = ax;
	ss->*((word16) bp - 8) = dx;
	ax |= dx;
	SZ = cond(ax);
	O = false;
	C.u0 = false;
	if (Test(EQ,Z))
	{
l2644_2B0E:
		ax = ss->*((word16) bp - 0x0A);
		ax |= ss->*((word16) bp - 8);
		SZ = cond(ax);
		O = false;
		C.u0 = false;
		if (Test(NE,Z))
		{
			ax.u0 = 0x01;
			sp -= 2;
			ss->*sp = ax;
			v20 = ss->*((word16) bp - 8);
			sp -= 2;
			ss->*sp = v20;
			v21 = ss->*((word16) bp - 0x0A);
			sp -= 2;
			ss->*sp = v21;
			fn2644_1F12();
			sp = (word16) sp + 6;
			es_bx = ss->*((word16) bp - 0x0A);
			SCZO = cond(es->*((word16) bx + 0x00BA) - 0x00);
			if (Test(NE,Z))
			{
				sp -= 2;
				ss->*sp = es;
				sp -= 2;
				ss->*sp = bx;
				fn2644_24C0();
				sp = (word16) sp + 4;
				SCZO = cond(sp);
			}
		}
		goto l2644_2B3B;
	}
	ax = ss->*((word16) bp - 0x0E);
	ax |= ss->*((word16) bp - 0x0C);
	SZ = cond(ax);
	O = false;
	C.u0 = false;
	if (Test(EQ,Z))
		goto l2644_2B0E;
	es_bx = ss->*((word16) bp - 0x0A);
	ax = es->*((word16) bx + 98);
	ss->*((word16) bp - 16) = ax;
	ax |= ax;
	SZ = cond(ax);
	O = false;
	C.u0 = false;
	if (Test(NE,Z))
	{
		ax.u0 = 0x03;
		sp -= 2;
		ss->*sp = ax;
		sp -= 2;
		ss->*sp = dx;
		sp -= 2;
		ss->*sp = bx;
		fn2644_1F12();
		sp = (word16) sp + 6;
		ss->*((word16) bp - 6) = ax;
		si = ss->*((word16) bp - 16);
		si <<= 0x01;
		si <<= 0x01;
		SCZO = cond(si);
		es_bx = ss->*((word16) bp - 0x0A);
		ax = es->*((word16) si + ((word16) bx + 0x0066));
		dx = es->*((word16) si + ((word16) bx + 0x0068));
		ss->*((word16) bp - 20) = ax;
		ss->*((word16) bp - 18) = dx;
	}
	else
	{
		ax.u0 = 0x02;
		sp -= 2;
		ss->*sp = ax;
		sp -= 2;
		ss->*sp = es;
		sp -= 2;
		ss->*sp = bx;
		fn2644_1F12();
		sp = (word16) sp + 6;
		SCZO = cond(sp);
		ss->*((word16) bp - 6) = ax;
	}
	SCZO = cond(ds->w13E8 - 0x00);
	if (Test(EQ,Z))
	{
		es_bx = ss->*((word16) bp - 0x0A);
		SCZO = cond(es->*((word16) bx + 0x00B0) - 0x00);
		if (Test(EQ,Z))
		{
			SCZO = cond(ss->*((word16) bp - 16) - 0x00);
			if (Test(NE,Z))
			{
				SCZO = cond(es->*((word16) bx + 66) - 0x00);
				if (Test(EQ,Z))
				{
					SCZO = cond(ss->*((word16) bp - 22) - 0x00);
					if (Test(LT,SO))
					{
						ax.u0 = 0x03;
						sp -= 2;
						ss->*sp = ax;
						ax -= ax;
						SCZO = cond(ax);
						sp -= 2;
						ss->*sp = ax;
						sp -= 2;
						ss->*sp = ax;
						sp -= 2;
						ss->*sp = ax;
						v22 = ss->*((word16) bp - 18);
						sp -= 2;
						ss->*sp = v22;
						v23 = ss->*((word16) bp - 20);
						sp -= 2;
						ss->*sp = v23;
						fn2EB3_1FCC();
						sp = (word16) sp + 0x0C;
						ss->*((word16) bp - 4) = ax;
						ss->*((word16) bp - 2) = dx;
						ax = ss->*((word16) bp - 24);
						dx = ss->*((word16) bp - 22);
						v24 = ss->*((word16) bp - 0x0E) - ax;
						ss->*((word16) bp - 0x0E) = v24;
						SCZO = cond(v24);
						v25 = ss->*((word16) bp - 0x0C) - dx - C;
						ss->*((word16) bp - 0x0C) = v25;
						SCZO = cond(v25);
					}
				}
				ax = ss->*((word16) bp - 0x0E);
				ax |= ss->*((word16) bp - 0x0C);
				SZ = cond(ax);
				O = false;
				C.u0 = false;
				if (Test(EQ,Z))
				{
l2644_2A41:
					v46 = ss->*((word16) bp - 2);
					sp -= 2;
					ss->*sp = v46;
					v47 = ss->*((word16) bp - 4);
					sp -= 2;
					ss->*sp = v47;
					v48 = ss->*((word16) bp - 8);
					sp -= 2;
					ss->*sp = v48;
					v49 = ss->*((word16) bp - 0x0A);
					sp -= 2;
					ss->*sp = v49;
					fn2644_22BE();
					sp = (word16) sp + 8;
					es_bx = ss->*((word16) bp - 0x0A);
					SCZO = cond(es->*((word16) bx + 66) - 0x00);
					if (Test(EQ,Z))
					{
						SCZO = cond(ss->*((word16) bp - 22) - 0x00);
						if (Test(LT,SO))
						{
							SCZO = cond(ss->*((word16) bp - 16) - 0x00);
							if (Test(NE,Z))
							{
								ax.u0 = 0x04;
								sp -= 2;
								ss->*sp = ax;
								ax -= ax;
								SCZO = cond(ax);
								sp -= 2;
								ss->*sp = ax;
								sp -= 2;
								ss->*sp = ax;
								sp -= 2;
								ss->*sp = ax;
								v50 = ss->*((word16) bp - 18);
								sp -= 2;
								ss->*sp = v50;
								v51 = ss->*((word16) bp - 20);
								sp -= 2;
								ss->*sp = v51;
								fn2EB3_1FCC();
								sp = (word16) sp + 0x0C;
								SCZO = cond(sp);
								ss->*((word16) bp - 4) = ax;
								ss->*((word16) bp - 2) = dx;
							}
							else
							{
								(ss->*((word16) bp - 4)).u0 = 0x01;
								(ss->*((word16) bp - 2)).u0 = 0x00;
							}
							v52 = ss->*((word16) bp - 2);
							sp -= 2;
							ss->*sp = v52;
							v53 = ss->*((word16) bp - 4);
							sp -= 2;
							ss->*sp = v53;
							v54 = ss->*((word16) bp - 8);
							sp -= 2;
							ss->*sp = v54;
							v55 = ss->*((word16) bp - 0x0A);
							sp -= 2;
							ss->*sp = v55;
							fn2644_22BE();
							sp = (word16) sp + 8;
							SCZO = cond(sp);
							es_bx = ss->*((word16) bp - 0x0A);
							es->*((word16) bx + 74) = 0x01;
						}
					}
					SCZO = cond(es->*((word16) bx + 0x00BA) - 0x00);
					if (Test(NE,Z))
					{
						sp -= 2;
						ss->*sp = es;
						sp -= 2;
						ss->*sp = bx;
						fn2644_24C0();
						sp = (word16) sp + 4;
						SCZO = cond(sp);
					}
					goto l2644_2AC1;
				}
				v42 = ss->*((word16) bp - 0x0C);
				sp -= 2;
				ss->*sp = v42;
				v43 = ss->*((word16) bp - 0x0E);
				sp -= 2;
				ss->*sp = v43;
				v44 = ss->*((word16) bp - 18);
				sp -= 2;
				ss->*sp = v44;
				v45 = ss->*((word16) bp - 20);
				sp -= 2;
				ss->*sp = v45;
				fn2EB3_2062();
				sp = (word16) sp + 8;
				SCZO = cond(sp);
			}
			else
			{
				es_bx = ss->*((word16) bp - 0x0A);
				ax = es->*((word16) bx + 40);
				dx = es->*((word16) bx + 42);
				ax += Mem0[ss:bp + -0x0E:word16];
				SCZO = cond(ax);
				dx = dx + Mem0[ss:bp + -0x0C:word16] + C;
				SCZO = cond(dx);
			}
			ss->*((word16) bp - 4) = ax;
			ss->*((word16) bp - 2) = dx;
			goto l2644_2A41;
		}
	}
	do
	{
		SCZO = cond(ss->*((word16) bp - 16) - 0x00);
		if (Test(NE,Z))
		{
			es_bx = ss->*((word16) bp - 0x0A);
			SCZO = cond(es->*((word16) bx + 66) - 0x00);
			if (Test(NE,Z))
			{
				v26 = ss->*((word16) bp - 22);
				sp -= 2;
				ss->*sp = v26;
				v27 = ss->*((word16) bp - 24);
				sp -= 2;
				ss->*sp = v27;
				v28 = ss->*((word16) bp - 18);
				sp -= 2;
				ss->*sp = v28;
				v29 = ss->*((word16) bp - 20);
				sp -= 2;
				ss->*sp = v29;
				fn2EB3_2062();
				sp = (word16) sp + 8;
				SCZO = cond(sp);
				goto l2644_28DF;
			}
			SCZO = cond(ss->*((word16) bp - 22) - 0x00);
			if (Test(LT,SO))
			{
				ax.u0 = 0x03;
				sp -= 2;
				ss->*sp = ax;
				ax -= ax;
				SCZO = cond(ax);
				sp -= 2;
				ss->*sp = ax;
				sp -= 2;
				ss->*sp = ax;
				sp -= 2;
				ss->*sp = ax;
				v30 = ss->*((word16) bp - 18);
				sp -= 2;
				ss->*sp = v30;
				v31 = ss->*((word16) bp - 20);
				sp -= 2;
				ss->*sp = v31;
				fn2EB3_1FCC();
				sp = (word16) sp + 0x0C;
				SCZO = cond(sp);
				goto l2644_28DF;
			}
			ax -= ax;
			SCZO = cond(ax);
			ss->*((word16) bp - 2) = ax;
			ss->*((word16) bp - 4) = ax;
		}
		else
		{
			es_bx = ss->*((word16) bp - 0x0A);
			ax = es->*((word16) bx + 40);
			dx = es->*((word16) bx + 42);
			ax += Mem0[ss:bp + -24:word16];
			SCZO = cond(ax);
			dx = dx + Mem0[ss:bp + -22:word16] + C;
			SCZO = cond(dx);
l2644_28DF:
			ss->*((word16) bp - 4) = ax;
			ss->*((word16) bp - 2) = dx;
		}
		v32 = ss->*((word16) bp - 2);
		sp -= 2;
		ss->*sp = v32;
		v33 = ss->*((word16) bp - 4);
		sp -= 2;
		ss->*sp = v33;
		v34 = ss->*((word16) bp - 8);
		sp -= 2;
		ss->*sp = v34;
		v35 = ss->*((word16) bp - 0x0A);
		sp -= 2;
		ss->*sp = v35;
		fn2644_22BE();
		sp = (word16) sp + 8;
		es_bx = ss->*((word16) bp - 0x0A);
		SCZO = cond(es->*((word16) bx + 0x00BA) - 0x00);
		if (Test(NE,Z))
		{
			sp -= 2;
			ss->*sp = es;
			sp -= 2;
			ss->*sp = bx;
			fn2644_24C0();
			sp = (word16) sp + 4;
			SCZO = cond(sp);
		}
		v36 = ss->*((word16) bp - 22);
		sp -= 2;
		ss->*sp = v36;
		v37 = ss->*((word16) bp - 24);
		sp -= 2;
		ss->*sp = v37;
		v38 = ss->*((word16) bp - 8);
		sp -= 2;
		ss->*sp = v38;
		v39 = ss->*((word16) bp - 0x0A);
		sp -= 2;
		ss->*sp = v39;
		fn2644_2384();
		sp = (word16) sp + 8;
		ax = ss->*((word16) bp - 24);
		dx = ss->*((word16) bp - 22);
		v40 = ss->*((word16) bp - 0x0E) - ax;
		ss->*((word16) bp - 0x0E) = v40;
		SCZO = cond(v40);
		v41 = ss->*((word16) bp - 0x0C) - dx - C;
		ss->*((word16) bp - 0x0C) = v41;
		es_bx = ss->*((word16) bp - 0x0A);
		SCZO = cond(es->*((word16) bx + 66) - 0x00);
		if (Test(EQ,Z))
			break;
		ax = ss->*((word16) bp - 0x0E);
		ax |= ss->*((word16) bp - 0x0C);
		SZ = cond(ax);
		O = false;
		C.u0 = false;
		if (Test(EQ,Z))
			break;
		SCZO = cond(ds->w10D2 - 0x00);
	} while (Test(EQ,Z));
	SCZO = cond(es->*((word16) bx + 66) - 0x00);
	if (Test(EQ,Z))
	{
		SCZO = cond(ss->*((word16) bp - 22) - 0x00);
		if (Test(LT,SO))
		{
			SCZO = cond(ss->*((word16) bp - 16) - 0x00);
			if (Test(NE,Z))
			{
				ax.u0 = 0x04;
				sp -= 2;
				ss->*sp = ax;
				ax -= ax;
				SCZO = cond(ax);
				sp -= 2;
				ss->*sp = ax;
				sp -= 2;
				ss->*sp = ax;
				sp -= 2;
				ss->*sp = ax;
				v56 = ss->*((word16) bp - 18);
				sp -= 2;
				ss->*sp = v56;
				v57 = ss->*((word16) bp - 20);
				sp -= 2;
				ss->*sp = v57;
				fn2EB3_1FCC();
				sp = (word16) sp + 0x0C;
				SCZO = cond(sp);
				ss->*((word16) bp - 4) = ax;
				ss->*((word16) bp - 2) = dx;
			}
			else
			{
				(ss->*((word16) bp - 4)).u0 = 0x01;
				(ss->*((word16) bp - 2)).u0 = 0x00;
			}
			v58 = ss->*((word16) bp - 2);
			sp -= 2;
			ss->*sp = v58;
			v59 = ss->*((word16) bp - 4);
			sp -= 2;
			ss->*sp = v59;
			v60 = ss->*((word16) bp - 8);
			sp -= 2;
			ss->*sp = v60;
			v61 = ss->*((word16) bp - 0x0A);
			sp -= 2;
			ss->*sp = v61;
			fn2644_22BE();
			sp = (word16) sp + 8;
			es_bx = ss->*((word16) bp - 0x0A);
			SCZO = cond(es->*((word16) bx + 0x00BA) - 0x00);
			if (Test(NE,Z))
			{
				sp -= 2;
				ss->*sp = es;
				sp -= 2;
				ss->*sp = bx;
				fn2644_24C0();
				sp = (word16) sp + 4;
				SCZO = cond(sp);
			}
			ax.u0 = 0x01;
			dx_ax = (int32) ax;
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = ax;
			v62 = ss->*((word16) bp - 8);
			sp -= 2;
			ss->*sp = v62;
			v63 = ss->*((word16) bp - 0x0A);
			sp -= 2;
			ss->*sp = v63;
			fn2644_2384();
			sp = (word16) sp + 8;
			SCZO = cond(sp);
			es_bx = ss->*((word16) bp - 0x0A);
			es->*((word16) bx + 74) = 0x01;
		}
	}
l2644_2AC1:
	es_bx = ss->*((word16) bp - 0x0A);
	SCZO = cond(es->*((word16) bx + 66) - 0x00);
	if (Test(EQ,Z))
	{
		SCZO = cond(ss->*((word16) bp - 16) - 0x00);
		if (Test(NE,Z))
		{
			es_bx = ss->*((word16) bp - 20);
			es->*((word16) bx + 46) = 0x00;
		}
		SCZO = cond(ss->*((word16) bp - 22) - 0x00);
		if (Test(LT,SO))
		{
			es_bx = ss->*((word16) bp - 0x0A);
			es->*((word16) bx + 72) = 0x00;
		}
		else
		{
			es_bx = ss->*((word16) bp - 0x0A);
			es->*((word16) bx + 74) = 0x00;
		}
	}
	SCZO = cond(ss->*((word16) bp - 6) - 0x00);
	if (Test(NE,Z))
	{
		ax.u0 = 0x04;
		sp -= 2;
		ss->*sp = ax;
		sp -= 2;
		ss->*sp = es;
		sp -= 2;
		ss->*sp = bx;
		fn2644_1F12();
		sp = (word16) sp + 6;
		SCZO = cond(sp);
		si = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
		return;
	}
l2644_2B3B:
	si = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2644:2B40: define fn2644_2B40
// Called from:
//      fn2644_24C0
//      fn3CEE_3C78
define fn2644_2B40
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 2;
	ss->*sp = si;
	ax = ss->*((word16) bp + 6);
	ax |= ss->*((word16) bp + 8);
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(NE,Z))
	{
		ax.u0 = 0x01;
		sp -= 2;
		ss->*sp = ax;
		v12 = ss->*((word16) bp + 8);
		sp -= 2;
		ss->*sp = v12;
		v13 = ss->*((word16) bp + 6);
		sp -= 2;
		ss->*sp = v13;
		fn2644_1F12();
		sp = (word16) sp + 6;
		es_bx = ss->*((word16) bp + 6);
		SCZO = cond(es->*((word16) bx + 98) - 0x00);
		if (Test(NE,Z))
		{
			si = es->*((word16) bx + 98);
			si <<= 0x01;
			si <<= 0x01;
			SCZO = cond(si);
			es_bx = es->*((word16) si + ((word16) bx + 0x0066));
			es->*((word16) bx + 46) = 0x00;
		}
		v18 = ss->*((word16) bp + 0x0C);
		sp -= 2;
		ss->*sp = v18;
		v19 = ss->*((word16) bp + 0x0A);
		sp -= 2;
		ss->*sp = v19;
		v20 = ss->*((word16) bp + 8);
		sp -= 2;
		ss->*sp = v20;
		v21 = ss->*((word16) bp + 6);
		sp -= 2;
		ss->*sp = v21;
		fn2644_22BE();
		sp = (word16) sp + 8;
		es_bx = ss->*((word16) bp + 6);
		SCZO = cond(es->*((word16) bx + 0x00BA) - 0x00);
		if (Test(NE,Z))
		{
			sp -= 2;
			ss->*sp = es;
			sp -= 2;
			ss->*sp = bx;
			fn2644_24C0();
			sp = (word16) sp + 4;
			SCZO = cond(sp);
		}
	}
	si = ss->*sp;
	sp = (word16) sp + 2;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2644:2C1A: define fn2644_2C1A
// Called from:
//      fn3CEE_4EAC
define fn2644_2C1A
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x0A;
	sp -= 2;
	ss->*sp = si;
	es_bx = ds->t130A;
	ax = es->*bx;
	dx = es->*((word16) bx + 2);
	ss->*((word16) bp - 0x0A) = ax;
	ss->*((word16) bp - 8) = dx;
	ax |= dx;
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(EQ,Z))
	{
l2644_2CEB:
		si = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
		return;
	}
	ax.u0 = 0x02;
	sp -= 2;
	ss->*sp = ax;
	sp -= 2;
	ss->*sp = dx;
	v18 = ss->*((word16) bp - 0x0A);
	sp -= 2;
	ss->*sp = v18;
	fn2644_1F12();
	sp = (word16) sp + 6;
	ss->*((word16) bp - 6) = ax;
	es_bx = ss->*((word16) bp - 0x0A);
	SCZO = cond(es->*((word16) bx + 98) - 0x00);
	if (Test(NE,Z))
	{
		ax.u0 = 0x04;
		sp -= 2;
		ss->*sp = ax;
		ax -= ax;
		sp -= 2;
		ss->*sp = ax;
		sp -= 2;
		ss->*sp = ax;
		sp -= 2;
		ss->*sp = ax;
		si = es->*((word16) bx + 98);
		si <<= 0x01;
		si <<= 0x01;
		SCZO = cond(si);
		v19 = es->*((word16) si + ((word16) bx + 0x0068));
		sp -= 2;
		ss->*sp = v19;
		v20 = es->*((word16) si + ((word16) bx + 0x0066));
		sp -= 2;
		ss->*sp = v20;
		fn2EB3_1FCC();
		sp = (word16) sp + 0x0C;
		SCZO = cond(sp);
		ss->*((word16) bp - 4) = ax;
		ss->*((word16) bp - 2) = dx;
	}
	else
	{
		(ss->*((word16) bp - 4)).u0 = 0x01;
		(ss->*((word16) bp - 2)).u0 = 0x00;
	}
	v21 = ss->*((word16) bp - 2);
	sp -= 2;
	ss->*sp = v21;
	v22 = ss->*((word16) bp - 4);
	sp -= 2;
	ss->*sp = v22;
	v23 = ss->*((word16) bp - 8);
	sp -= 2;
	ss->*sp = v23;
	v24 = ss->*((word16) bp - 0x0A);
	sp -= 2;
	ss->*sp = v24;
	fn2644_22BE();
	sp = (word16) sp + 8;
	es_bx = ss->*((word16) bp - 0x0A);
	SCZO = cond(es->*((word16) bx + 0x00BA) - 0x00);
	if (Test(NE,Z))
	{
		sp -= 2;
		ss->*sp = es;
		sp -= 2;
		ss->*sp = bx;
		fn2644_24C0();
		sp = (word16) sp + 4;
		SCZO = cond(sp);
	}
	SCZO = cond(ds->w13E8 - 0x00);
	if (Test(EQ,Z))
	{
		es_bx = ss->*((word16) bp - 0x0A);
		SCZO = cond(es->*((word16) bx + 0x00B0) - 0x00);
		if (Test(EQ,Z))
		{
l2644_2CD4:
			SCZO = cond(ss->*((word16) bp - 6) - 0x00);
			if (Test(NE,Z))
			{
				ax.u0 = 0x04;
				sp -= 2;
				ss->*sp = ax;
				v28 = ss->*((word16) bp - 8);
				sp -= 2;
				ss->*sp = v28;
				v29 = ss->*((word16) bp - 0x0A);
				sp -= 2;
				ss->*sp = v29;
				fn2644_1F12();
				sp = (word16) sp + 6;
				SCZO = cond(sp);
			}
			goto l2644_2CEB;
		}
	}
	ax.u0 = 0x01;
	dx_ax = (int32) ax;
	sp -= 2;
	ss->*sp = dx;
	sp -= 2;
	ss->*sp = ax;
	v26 = ss->*((word16) bp - 8);
	sp -= 2;
	ss->*sp = v26;
	v27 = ss->*((word16) bp - 0x0A);
	sp -= 2;
	ss->*sp = v27;
	fn2644_2384();
	sp = (word16) sp + 8;
	SCZO = cond(sp);
	goto l2644_2CD4;
}

// 2644:2CF0: define fn2644_2CF0
// Called from:
//      fn3CEE_4EAC
define fn2644_2CF0
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x0A;
	sp -= 2;
	ss->*sp = si;
	es_bx = ds->t130A;
	ax = es->*bx;
	dx = es->*((word16) bx + 2);
	ss->*((word16) bp - 0x0A) = ax;
	ss->*((word16) bp - 8) = dx;
	ax |= dx;
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(EQ,Z))
	{
l2644_2DD9:
		si = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
		return;
	}
	ax.u0 = 0x02;
	sp -= 2;
	ss->*sp = ax;
	sp -= 2;
	ss->*sp = dx;
	v18 = ss->*((word16) bp - 0x0A);
	sp -= 2;
	ss->*sp = v18;
	fn2644_1F12();
	sp = (word16) sp + 6;
	ss->*((word16) bp - 6) = ax;
	es_bx = ss->*((word16) bp - 0x0A);
	SCZO = cond(es->*((word16) bx + 98) - 0x00);
	if (Test(NE,Z))
	{
		ax.u0 = 0x03;
		sp -= 2;
		ss->*sp = ax;
		ax -= ax;
		sp -= 2;
		ss->*sp = ax;
		sp -= 2;
		ss->*sp = ax;
		sp -= 2;
		ss->*sp = ax;
		si = es->*((word16) bx + 98);
		si <<= 0x01;
		si <<= 0x01;
		SCZO = cond(si);
		v19 = es->*((word16) si + ((word16) bx + 0x0068));
		sp -= 2;
		ss->*sp = v19;
		v20 = es->*((word16) si + ((word16) bx + 0x0066));
		sp -= 2;
		ss->*sp = v20;
		fn2EB3_1FCC();
		sp = (word16) sp + 0x0C;
		SCZO = cond(sp);
	}
	else
	{
		es_bx = ss->*((word16) bp - 0x0A);
		SCZO = cond(es->*((word16) bx + 58) - 0x00);
		if (Test(NE,Z))
		{
			sp -= 2;
			ss->*sp = es;
			sp -= 2;
			ss->*sp = bx;
			fn2644_2068();
			sp = (word16) sp + 4;
			SCZO = cond(sp);
			es_bx = ss->*((word16) bp - 0x0A);
			es->*((word16) bx + 44) = ax;
			es->*((word16) bx + 46) = dx;
		}
		ax = es->*((word16) bx + 44);
		dx = es->*((word16) bx + 46);
	}
	ss->*((word16) bp - 4) = ax;
	ss->*((word16) bp - 2) = dx;
	sp -= 2;
	ss->*sp = dx;
	sp -= 2;
	ss->*sp = ax;
	v21 = ss->*((word16) bp - 8);
	sp -= 2;
	ss->*sp = v21;
	v22 = ss->*((word16) bp - 0x0A);
	sp -= 2;
	ss->*sp = v22;
	fn2644_22BE();
	sp = (word16) sp + 8;
	es_bx = ss->*((word16) bp - 0x0A);
	SCZO = cond(es->*((word16) bx + 0x00BA) - 0x00);
	if (Test(NE,Z))
	{
		sp -= 2;
		ss->*sp = es;
		sp -= 2;
		ss->*sp = bx;
		fn2644_24C0();
		sp = (word16) sp + 4;
		SCZO = cond(sp);
	}
	SCZO = cond(ds->w13E8 - 0x00);
	if (Test(EQ,Z))
	{
		es_bx = ss->*((word16) bp - 0x0A);
		SCZO = cond(es->*((word16) bx + 0x00B0) - 0x00);
		if (Test(EQ,Z))
		{
l2644_2DC2:
			SCZO = cond(ss->*((word16) bp - 6) - 0x00);
			if (Test(NE,Z))
			{
				ax.u0 = 0x04;
				sp -= 2;
				ss->*sp = ax;
				v26 = ss->*((word16) bp - 8);
				sp -= 2;
				ss->*sp = v26;
				v27 = ss->*((word16) bp - 0x0A);
				sp -= 2;
				ss->*sp = v27;
				fn2644_1F12();
				sp = (word16) sp + 6;
				SCZO = cond(sp);
			}
			goto l2644_2DD9;
		}
	}
	ax.u0 = ~0x00;
	dx_ax = (int32) ax;
	sp -= 2;
	ss->*sp = dx;
	sp -= 2;
	ss->*sp = ax;
	v24 = ss->*((word16) bp - 8);
	sp -= 2;
	ss->*sp = v24;
	v25 = ss->*((word16) bp - 0x0A);
	sp -= 2;
	ss->*sp = v25;
	fn2644_2384();
	sp = (word16) sp + 8;
	SCZO = cond(sp);
	goto l2644_2DC2;
}

// 2644:44C4: define fn2644_44C4
// Called from:
//      fn2644_45CA
define fn2644_44C4
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	ax = ss->*((word16) bp + 6);
	ax |= ss->*((word16) bp + 8);
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(NE,Z))
	{
		es_bx = ss->*((word16) bp + 6);
		SCZO = cond(es->*((word16) bx + 58) - 0x00);
		if (Test(NE,Z))
		{
			ax = es->*((word16) bx + 80);
			ax |= es->*((word16) bx + 82);
			SZ = cond(ax);
			O = false;
			C = false;
			if (Test(NE,Z))
			{
				ax.u0 = 0x01;
				sp -= 2;
				ss->*sp = ax;
				sp -= 2;
				ss->*sp = es;
				sp -= 2;
				ss->*sp = bx;
				fn2644_1F12();
				sp = (word16) sp + 6;
				SCZO = cond(sp);
				es_bx = ss->*((word16) bp + 6);
				v15 = es->*((word16) bx + 82);
				sp -= 2;
				ss->*sp = v15;
				v16 = es->*((word16) bx + 80);
				sp -= 2;
				ss->*sp = v16;
				v17 = es->*((word16) bx + 52);
				sp -= 2;
				ss->*sp = v17;
				fn207F_00D2();
				sp = (word16) sp + 6;
				es_bx = ss->*((word16) bp + 6);
				ax -= ax;
				SCZO = cond(ax);
				es->*((word16) bx + 82) = ax;
				es->*((word16) bx + 80) = ax;
				bp = ss->*sp;
				sp = (word16) sp + 2;
				return;
			}
			SCZO = cond(es->*((word16) bx + 78) - 0x00);
			if (Test(NE,Z))
			{
				ax.u0 = 0x01;
				sp -= 2;
				ss->*sp = ax;
				sp -= 2;
				ss->*sp = es;
				sp -= 2;
				ss->*sp = bx;
				fn2644_1F12();
				sp = (word16) sp + 6;
				SCZO = cond(sp);
				es_bx = ss->*((word16) bp + 6);
				v18 = es->*((word16) bx + 52);
				sp -= 2;
				ss->*sp = v18;
				fn207F_0088();
				sp = (word16) sp + 2;
				SCZO = cond(sp);
				es_bx = ss->*((word16) bp + 6);
				es->*((word16) bx + 78) = 0x00;
			}
		}
	}
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2644:45CA: define fn2644_45CA
// Called from:
//      fn2644_49B4
//      fn2644_4B2E
define fn2644_45CA
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x08;
	ax = ss->*((word16) bp + 6);
	ax |= ss->*((word16) bp + 8);
	SZ = cond(ax);
	O = false;
	C.u0 = false;
	if (Test(NE,Z))
	{
		ax.u0 = 0x01;
		sp -= 2;
		ss->*sp = ax;
		v12 = ss->*((word16) bp + 8);
		sp -= 2;
		ss->*sp = v12;
		v13 = ss->*((word16) bp + 6);
		sp -= 2;
		ss->*sp = v13;
		fn2644_1F12();
		sp = (word16) sp + 6;
		es_bx = ss->*((word16) bp + 6);
		SCZO = cond(es->*((word16) bx + 48) - 0x00);
		if (Test(NE,Z))
		{
			v17 = es->*((word16) bx + 48);
			sp -= 2;
			ss->*sp = v17;
			fn2D1A_0B04();
			sp = (word16) sp + 2;
			SCZO = cond(sp);
		}
		v18 = ss->*((word16) bp + 8);
		sp -= 2;
		ss->*sp = v18;
		v19 = ss->*((word16) bp + 6);
		sp -= 2;
		ss->*sp = v19;
		fn2644_44C4();
		sp = (word16) sp + 4;
		es_bx = ss->*((word16) bp + 6);
		SCZO = cond(es->*((word16) bx + 84) - 0x00);
		if (Test(NE,Z))
		{
			(ss->*((word16) bp - 4)).u0 = 0x00;
			SCZO = cond(es->*((word16) bx + 50) - 0x00);
			if (Test(EQ,Z))
			{
				SCZO = cond(es->*((word16) bx + 58) - 0x00);
				if (Test(NE,Z))
				{
					v20 = es->*((word16) bx + 52);
					sp -= 2;
					ss->*sp = v20;
					fn207F_0006();
					sp = (word16) sp + 2;
					SCZO = cond(sp);
					ss->*((word16) bp - 4) = ax;
					v21 = ss->*((word16) bp + 8);
					sp -= 2;
					ss->*sp = v21;
					v22 = ss->*((word16) bp + 6);
					sp -= 2;
					ss->*sp = v22;
					fn2644_2068();
					sp = (word16) sp + 4;
					SCZO = cond(sp);
					es_bx = ss->*((word16) bp + 6);
					es->*((word16) bx + 44) = ax;
					es->*((word16) bx + 46) = dx;
				}
				sp -= 2;
				ss->*sp = es;
				sp -= 2;
				ss->*sp = bx;
				fn2644_0D70();
				sp = (word16) sp + 4;
				ax -= ax;
				SCZO = cond(ax);
				sp -= 2;
				ss->*sp = ax;
				es_bx = ss->*((word16) bp + 6);
				v25 = es->*((word16) bx + 46);
				sp -= 2;
				ss->*sp = v25;
				v26 = es->*((word16) bx + 44);
				sp -= 2;
				ss->*sp = v26;
				v27 = es->*((word16) bx + 0x0022);
				sp -= 2;
				ss->*sp = v27;
				v28 = es->*((word16) bx + 32);
				sp -= 2;
				ss->*sp = v28;
				fn3CEE_05A6();
				sp = (word16) sp + 8;
				es_bx = ss->*((word16) bp + 6);
				ax += Mem0[es:bx + 36:word16];
				SCZO = cond(ax);
				dx = dx + Mem0[es:bx + 38:word16] + C;
				SCZO = cond(dx);
				sp -= 2;
				ss->*sp = dx;
				sp -= 2;
				ss->*sp = ax;
				v29 = es->*((word16) bx + 52);
				sp -= 2;
				ss->*sp = v29;
				fn208F_0115();
				sp = (word16) sp + 8;
				SCZO = cond(sp);
			}
			ax.u0 = 0x01;
			sp -= 2;
			ss->*sp = ax;
			ax.u0 = 24204;
			sp -= 2;
			ss->*sp = ds;
			sp -= 2;
			ss->*sp = ax;
			es_bx = ss->*((word16) bp + 6);
			v30 = es->*((word16) bx + 52);
			sp -= 2;
			ss->*sp = v30;
			fn208F_00EF();
			sp = (word16) sp + 8;
			ax -= ax;
			SCZO = cond(ax);
			sp -= 2;
			ss->*sp = ax;
			ax.u0 = 0x5E8E;
			sp -= 2;
			ss->*sp = ds;
			sp -= 2;
			ss->*sp = ax;
			es_bx = ss->*((word16) bp + 6);
			v31 = es->*((word16) bx + 52);
			sp -= 2;
			ss->*sp = v31;
			fn208F_00EF();
			sp = (word16) sp + 8;
			SCZO = cond(ss->*((word16) bp - 4) - 0x00);
			if (Test(NE,Z))
			{
				es_bx = ss->*((word16) bp + 6);
				v32 = es->*((word16) bx + 52);
				sp -= 2;
				ss->*sp = v32;
				fn207F_0048();
				sp = (word16) sp + 2;
				SCZO = cond(sp);
			}
		}
		es_bx = ss->*((word16) bp + 6);
		ax = es->*((word16) bx + 62);
		ax |= es->*((word16) bx + 64);
		SZ = cond(ax);
		O = false;
		C.u0 = false;
		if (Test(NE,Z))
		{
			es_bx = es->*((word16) bx + 62);
			ax = Mem0[ds:0x12FC:word16];
			SCZO = cond(es->*((word16) bx + 8) - ax);
			if (Test(EQ,Z))
			{
				es_bx = ss->*((word16) bp + 6);
				es_bx = es->*((word16) bx + 62);
				es->*((word16) bx + 8) = 0x00;
			}
		}
		(ss->*((word16) bp - 2)).u0 = 0x00;
		while (true)
		{
			es_bx = ss->*((word16) bp + 6);
			ax = ss->*((word16) bp - 2);
			SCZO = cond(es->*((word16) bx + 0x00BA) - ax);
			if (Test(ULE,CZ))
				break;
			ax = ss->*((word16) bp - 2);
			cx = ax;
			ax <<= 0x01;
			ax <<= 0x01;
			ax += cx;
			ax <<= 0x01;
			ax += Mem0[ss:bp + 6:word16];
			SCZO = cond(ax);
			dx = ss->*((word16) bp + 8);
			ss->*((word16) bp - 8) = ax;
			ss->*((word16) bp - 6) = dx;
			es_bx = ss->*((word16) bp - 8);
			v39 = es->*((word16) bx + 188);
			sp -= 2;
			ss->*sp = v39;
			fn31FF_1C0A();
			sp = (word16) sp + 2;
			SCZO = cond(sp);
			es_bx = ss->*((word16) bp - 8);
			v40 = es->*((word16) bx + 0x00C4);
			sp -= 2;
			ss->*sp = v40;
			v41 = es->*((word16) bx + 0x00C2);
			sp -= 2;
			ss->*sp = v41;
			v42 = es->*((word16) bx + 0x00C0);
			sp -= 2;
			ss->*sp = v42;
			fn21DC_0702();
			sp = (word16) sp + 6;
			SCZO = cond(sp);
			v43 = (word32) (ss->*((word16) bp - 2)) + 1;
			ss->*((word16) bp - 2) = v43;
			SZO = cond(v43);
		}
		SCZO = cond(es->*((word16) bx + 0x00B0) - 0x00);
		if (Test(NE,Z))
		{
			v34 = es->*((word16) bx + 0x00B0);
			sp -= 2;
			ss->*sp = v34;
			fn31FF_1C0A();
			sp = (word16) sp + 2;
			SCZO = cond(sp);
			es_bx = ss->*((word16) bp + 6);
			v35 = es->*((word16) bx + 0x00B6);
			sp -= 2;
			ss->*sp = v35;
			v36 = es->*((word16) bx + 0x00B4);
			sp -= 2;
			ss->*sp = v36;
			v37 = es->*((word16) bx + 0x00B2);
			sp -= 2;
			ss->*sp = v37;
			fn21DC_0702();
			sp = (word16) sp + 6;
			SCZO = cond(sp);
		}
		es_bx = ss->*((word16) bp + 6);
		SCZO = cond(es->*((word16) bx + 0x00AE) - 0x00);
		if (Test(NE,Z))
		{
			v45 = es->*((word16) bx + 0x00AE);
			sp -= 2;
			ss->*sp = v45;
			fn31FF_1C0A();
			sp = (word16) sp + 2;
			SCZO = cond(sp);
		}
		fn2EB3_0064();
		v46 = ss->*((word16) bp + 8);
		sp -= 2;
		ss->*sp = v46;
		v47 = ss->*((word16) bp + 6);
		sp -= 2;
		ss->*sp = v47;
		fn2644_0F82();
		sp = (word16) sp + 4;
		SCZO = cond(sp);
	}
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2644:49B4: define fn2644_49B4
// Called from:
//      fn2644_4A66
define fn2644_49B4
{
	sp = fp;
	Top = 0;
	sp -= 2;
	(ss->*sp).u0 = (int16) si;
	es_bx = ds->t130A;
	ax = es->*bx;
	ax |= es->*((word16) bx + 2);
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(NE,Z))
	{
		v15 = es->*((word16) bx + 2);
		sp -= 2;
		(ss->*sp).u0 = (int16) v15;
		v16 = es->*bx;
		sp -= 2;
		(ss->*sp).u0 = (int16) v16;
		fn2644_45CA();
		sp = (union Eq_70753 Eq_70754::*) ((char *) sp + 4);
		es_bx = ds->t130A;
		ax -= ax;
		es->*((word16) bx + 2) = ax;
		es->*bx = ax;
		bx = ds->t12FC;
		bx <<= 0x01;
		bx <<= 0x01;
		SCZO = cond(bx);
		si = ds->t130A;
		es->*((word16) si.u0 + ((word16) bx + 2)) = ax;
		Mem0[es:bx + si:word16] = ax;
	}
	si.u0 = (ss->*sp).u0;
	sp = (union Eq_70753 Eq_70754::*) ((char *) sp + 2);
}

// 2644:4A66: define fn2644_4A66
// Called from:
//      fn20B2_1192
define fn2644_4A66
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x02;
	sp -= 2;
	ss->*sp = si;
	ax = ds->t12FC;
	ss->*((word16) bp - 2) = ax;
	ax = ds->t1306;
	SCZO = cond(ss->*((word16) bp + 6) - ax);
	if (Test(NE,Z))
	{
		SCZO = cond(ds->t12FE - 0xFB);
		if (Test(UGE,C))
		{
			ax = ds->t12FE;
			ds->t12FC = ax;
			bx = ax;
			bx <<= 0x01;
			bx <<= 0x01;
			SCZO = cond(bx);
			es_si = ds->t130A;
			ax = Mem0[es:bx + si:word16];
			dx = es->*((word16) si + ((word16) bx + 2));
			bx = si;
			es->*bx = ax;
			es->*((word16) bx + 2) = dx;
			fn2644_49B4();
		}
		SCZO = cond(ds->t1300 - 0xFB);
		if (Test(UGE,C))
		{
			ax = ds->t1300;
			ds->t12FC = ax;
			bx = ax;
			bx <<= 0x01;
			bx <<= 0x01;
			SCZO = cond(bx);
			es_si = ds->t130A;
			ax = Mem0[es:bx + si:word16];
			dx = es->*((word16) si + ((word16) bx + 2));
			bx = si;
			es->*bx = ax;
			es->*((word16) bx + 2) = dx;
			fn2644_49B4();
		}
		SCZO = cond(ds->t1302 - 0xFB);
		if (Test(UGE,C))
		{
			ax = ds->t1302;
			ds->t12FC = ax;
			bx = ax;
			bx <<= 0x01;
			bx <<= 0x01;
			SCZO = cond(bx);
			es_si = ds->t130A;
			ax = Mem0[es:bx + si:word16];
			dx = es->*((word16) si + ((word16) bx + 2));
			bx = si;
			es->*bx = ax;
			es->*((word16) bx + 2) = dx;
			fn2644_49B4();
		}
	}
	ax = ss->*((word16) bp - 2);
	ds->t12FC = ax;
	bx = ax;
	bx <<= 0x01;
	bx <<= 0x01;
	SCZO = cond(bx);
	es_si = ds->t130A;
	ax = Mem0[es:bx + si:word16];
	dx = es->*((word16) si + ((word16) bx + 2));
	bx = si;
	es->*bx = ax;
	es->*((word16) bx + 2) = dx;
	ax = ss->*((word16) bp + 6);
	ds->t1306 = ax;
	si = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 2644:4B2E: define fn2644_4B2E
// Called from:
//      fn21DC_04BA
define fn2644_4B2E
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x06;
	sp -= 2;
	ss->*sp = si;
	SCZO = cond(ds->t1278 - 0x01);
	if (Test(NE,Z))
	{
		ax = ds->t1278;
		SCZO = cond(ax - 0x02);
		if (Test(EQ,Z))
		{
			(ss->*((word16) bp - 2)).u0 = 0x01;
			do
			{
				es_bx = ds->t130A;
				es_bx = ds->*bx;
				si = es->*((word16) bx + 48);
				si |= si;
				SZ = cond(si);
				O = false;
				C = false;
				if (Test(NE,Z))
				{
					sp -= 2;
					ss->*sp = si;
					fn2D1A_0B04();
					sp = (word16) sp + 2;
					SCZO = cond(sp);
				}
				v23 = (word32) (ss->*((word16) bp - 2)) + 1;
				ss->*((word16) bp - 2) = v23;
				SCZO = cond(ss->*((word16) bp - 2) - 0x0100);
			} while (Test(ULT,C));
		}
		while (true)
		{
			v20 = (word32) ds->t138C + 1;
			ds->t138C = v20;
			SCZO = cond(ds->t138C - 0x0100);
			if (Test(UGE,C))
				break;
			ax = ds->t138C;
			ds->t12FC = ax;
			bx = ax;
			bx <<= 0x01;
			bx <<= 0x01;
			es_si = ds->t130A;
			ax = Mem0[es:bx + si:word16];
			dx = es->*((word16) si + ((word16) bx + 2));
			bx = si;
			es->*bx = ax;
			es->*((word16) bx + 2) = dx;
			ax |= dx;
			SZ = cond(ax);
			O = false;
			C = false;
			if (Test(NE,Z))
			{
				sp -= 2;
				ss->*sp = dx;
				v22 = es->*bx;
				sp -= 2;
				ss->*sp = v22;
				fn2644_45CA();
				sp = (word16) sp + 4;
				es_bx = ds->t130A;
				ax -= ax;
				es->*((word16) bx + 2) = ax;
				es->*bx = ax;
				bx = ds->t12FC;
				bx <<= 0x01;
				bx <<= 0x01;
				SCZO = cond(bx);
				si = ds->t130A;
				es->*((word16) si + ((word16) bx + 2)) = ax;
				Mem0[es:bx + si:word16] = ax;
			}
		}
		si = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
	}
	else
	{
		(ss->*((word16) bp - 2)).u0 = 0x01;
		do
		{
			bx = ss->*((word16) bp - 2);
			bx <<= 0x01;
			bx <<= 0x01;
			es_si = ds->t130A;
			ax = Mem0[es:bx + si:word16];
			dx = es->*((word16) si + ((word16) bx + 2));
			ss->*((word16) bp - 6) = ax;
			ss->*((word16) bp - 4) = dx;
			ax |= dx;
			SZ = cond(ax);
			O = false;
			C = false;
			if (Test(NE,Z))
			{
				bx = si;
				ax = ss->*((word16) bp - 6);
				es->*bx = ax;
				es->*((word16) bx + 2) = dx;
				ax = ss->*((word16) bp - 2);
				ds->t12FC = ax;
				sp -= 2;
				ss->*sp = dx;
				v18 = ss->*((word16) bp - 6);
				sp -= 2;
				ss->*sp = v18;
				fn2644_45CA();
				sp = (word16) sp + 4;
				es_bx = ds->t130A;
				ax -= ax;
				es->*((word16) bx + 2) = ax;
				es->*bx = ax;
				bx = ds->t12FC;
				bx <<= 0x01;
				bx <<= 0x01;
				SCZO = cond(bx);
				si = ds->t130A;
				es->*((word16) si + ((word16) bx + 2)) = ax;
				Mem0[es:bx + si:word16] = ax;
			}
			v24 = (word32) (ss->*((word16) bp - 2)) + 1;
			ss->*((word16) bp - 2) = v24;
			SCZO = cond(ss->*((word16) bp - 2) - 0x0100);
		} while (Test(ULT,C));
		ds->t12FC.u0 = 0x01;
		si = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
	}
}

