// 1999_SOFT_LOAN__21DC.c
// Generated by decompiling 1999_SOFT_LOAN_.exe
// using Reko decompiler version 0.11.4.0.

#include "1999_SOFT_LOAN_.h"

// 21DC:0006: define fn21DC_0006
// Called from:
//      fn21DC_0006
//      fn21DC_0D60
//      fn3431_06CC
define fn21DC_0006
{
	sp = fp;
	Top = 0;
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_56287 Eq_56294::*) bp;
	bp = sp;
	sp -= 0x06;
	ax = ds->ptr0F1B;
	(ss->*bp).ptrFFFFFFFE = (struct Eq_56287 Eq_56294::*) ax;
	ax = ds->ptr127A;
	(ss->*bp).ptrFFFFFFFC = (struct Eq_56287 Eq_56294::*) ax;
	ax = (struct Eq_56287 Eq_56294::*) (ss->*bp).ptr0006;
	ax -= 0x80;
	v12 = ax;
	SCZO = cond(ax - 0x07);
	if (Test(ULE,CZ))
	{
		ax += ax;
		SCZO = cond(ax);
		v10 = bx;
		bx = ax;
		ax = v10;
		switch (v12)
		{
		case 0x00:
			SCZO = cond(ds->w1268 - 0x00);
			if (Test(NE,Z))
				fn20B2_107C();
			break;
		case 0x01:
			fn1F38_0CC5();
			ax -= ax;
			SCZO = cond(ax);
			sp -= 2;
			(ss->*sp).ptr0000 = (struct Eq_56287 Eq_56294::*) ax;
			sp -= 2;
			(ss->*sp).ptr0000 = (struct Eq_56287 Eq_56294::*) ax;
			fn3431_07B6();
			sp = (struct Eq_56287 Eq_56294::*) &sp->ptr0000;
			(ss->*bp).ptrFFFFFFFA = (struct Eq_56287 Eq_56294::*) ax;
			SCZO = cond(ax - 0x80);
			if (Test(NE,Z))
			{
				SCZO = cond(ax - 131);
				if (Test(EQ,Z))
					goto l21DC_0058;
			}
			else
			{
l21DC_0058:
				v14 = (struct Eq_56287 Eq_56294::*) (ss->*bp).ptrFFFFFFFA;
				sp -= 2;
				(ss->*sp).ptr0000 = (struct Eq_56287 Eq_56294::*) v14;
				fn21DC_0006();
				sp = (struct Eq_56287 Eq_56294::*) &sp->ptr0000;
				SCZO = cond(sp);
			}
			break;
		case 0x02:
		case 0x04:
		case 0x05:
		case 0x06:
		case 0x07:
			break;
		case 0x03:
			SCZO = cond(ds->w0EE2 - 0x00);
			if (Test(NE,Z))
			{
				ds->w0EE4 = 0x01;
				ax = ds->ptr0F1B;
				SCZO = cond(ax - 0x01);
				if (Test(UGE,C))
				{
					SCZO = cond(ax - 0x06);
					if (Test(ULE,CZ))
						fn1825_000A();
				}
			}
			break;
		}
	}
	ax = (struct Eq_56287 Eq_56294::*) (ss->*bp).ptrFFFFFFFE;
	ds->ptr0F1B = ax;
	ax = (struct Eq_56287 Eq_56294::*) (ss->*bp).ptrFFFFFFFC;
	ds->ptr127A = ax;
	sp = bp;
	bp = (struct Eq_56287 Eq_56294::*) (ss->*sp).ptr0000;
	sp = (struct Eq_56287 Eq_56294::*) &sp->ptr0000;
}

// 21DC:00A6: define fn21DC_00A6
// Called from:
//      fn20B2_0474
//      fn20B2_0612
//      fn20B2_0776
//      fn20B2_0898
//      fn20B2_099A
//      fn20B2_0AC6
//      fn20B2_0EF6
//      fn21DC_0856
//      main
//      fn3CEE_4EAC
//      fn3CEE_858E
define fn21DC_00A6
{
	selector ds;
	word16 wArg04;
	Top_3 = 0;
	ax_10 = ds->w127E;
	ds->w1280 = ax_10;
	ax_12 = wArg04;
	ds->w127E = wArg04;
}

// 21DC:01C4: define fn21DC_01C4
// Called from:
//      fn21DC_0322
//      fn21DC_0368
define fn21DC_01C4
{
	sp = fp;
	Top = 0;
	sp -= 2;
	(ss->*sp.u0).t0000 = (<anonymous>) bp;
	bp = sp;
	sp -= 0x12;
	sp -= 2;
	(ss->*sp.u0).t0000 = (<anonymous>) si;
	ax = ds->t127A;
	ss->*((word16) bp - 0x0C) = ax;
	ax = ds->t1280;
	ss->*((word16) bp - 0x0A) = ax;
	ax = ds->t127C;
	ss->*((word16) bp - 0x0E) = ax;
	ax = ds->t127E;
	ds->t127C = ax;
	ax = ds->t1296;
	dx = ds->t1298;
	bx = ds->t127C;
	cl = 0x04;
	bx <<= cl;
	ax -= bx;
	ss->*((word16) bp - 4) = ax;
	ss->*((word16) bp - 2) = dx;
	&ax.u0->t0000 = 22;
	dx_ax = ds->t128A *32 ax;
	si = ax;
	es_bx = ds->t1282;
	ax = ds->t127A;
	si.u0[(word16) bx + 2] = (struct Eq_236234) ax;
	&ds->t127A.u0->t0000 = 0x00;
	&v16.u0->t0000 = (word32) ds->t1288 + 1;
	ds->t1288 = v16;
	&ax.u0->t0000 = 22;
	dx_ax = ds->t1288 *32 ax;
	ax += bx;
	SCZO = cond(ax);
	dx = es;
	ss->*((word16) bp - 18) = ax;
	ss->*((word16) bp - 16) = dx;
	es_bx = ss->*((word16) bp - 18);
	ax = ds->t128A;
	(es->*bx.u0).t0000 = (<anonymous>) ax;
	ax = ss->*((word16) bp + 6);
	dx = ss->*((word16) bp + 8);
	es->*((word16) bx + 18) = ax;
	es->*((word16) bx + 20) = dx;
	&(es->*((word16) bx + 2)).u0->t0000 = 0x00;
	ax = ds->t1288;
	ds->t128A = ax;
	es_bx = ss->*((word16) bp + 6);
	(es->*((word16) bx + 0x0E))();
	SCZO = cond(ds->w10D2 - 101);
	if (Test(EQ,Z))
	{
		while (true)
		{
			ax = ss->*((word16) bp - 4);
			dx = ss->*((word16) bp - 2);
			bx = ds->t127C;
			cl = 0x04;
			bx <<= cl;
			ax += bx;
			SCZO = cond(ax - ds->t1296);
			if (Test(UGE,C))
				break;
			fn2368_033C();
		}
	}
	while (true)
	{
		SCZO = cond(ds->t127C - 0x00);
		if (Test(EQ,Z))
			break;
		fn2368_033C();
		v23 = ds->t127C - 0x01;
		ds->t127C = v23;
		SZO = cond(v23);
	}
	while (true)
	{
		ax = ds->t128A;
		SCZO = cond(ds->t1288 - ax);
		if (Test(ULE,CZ))
			break;
		&ax.u0->t0000 = 22;
		dx_ax = ds->t1288 *32 ax;
		ax += Mem0[ds:0x1282:word16];
		SCZO = cond(ax);
		dx = ds->t1284;
		ss->*((word16) bp - 8) = ax;
		ss->*((word16) bp - 6) = dx;
		sp -= 2;
		(ss->*sp.u0).t0000 = (<anonymous>) dx;
		sp -= 2;
		(ss->*sp.u0).t0000 = (<anonymous>) ax;
		fn2368_042A();
		&sp.u0->t0000 = (word16) sp + 4;
		SCZO = cond(sp);
		es_bx = ss->*((word16) bp - 8);
		ax = es->*((word16) bx + 0x0E);
		dx = es->*((word16) bx + 16);
		es_bx = es->*((word16) bx + 18);
		es->*((word16) bx + 4) = ax;
		es->*((word16) bx + 6) = dx;
		v24 = ds->t1288 - 0x01;
		ds->t1288 = v24;
		SZO = cond(v24);
	}
	&ax.u0->t0000 = 22;
	dx_ax = ds->t1288 *32 ax;
	bx = ax;
	es_si = ds->t1282;
	ax = Mem0[es:bx + si:word16];
	ds->t128A = ax;
	v22 = ds->t1288 - 0x01;
	ds->t1288 = v22;
	ax = ss->*((word16) bp - 0x0C);
	ds->t127A = ax;
	ax = ss->*((word16) bp - 0x0A);
	ds->t127E = ax;
	ax = ss->*((word16) bp - 0x0E);
	ds->t127C = ax;
	ax = ds->t1292;
	dx = ds->t1294;
	SCZO = cond(ds->t1296 - ax);
	if (Test(ULT,C))
	{
		&ax.u0->t0000 = 0x01;
		sp -= 2;
		(ss->*sp.u0).t0000 = (<anonymous>) ax;
		fn20B2_0176();
		&sp.u0->t0000 = (word16) sp + 2;
		SCZO = cond(sp);
		ax = ds->t1292;
		dx = ds->t1294;
		ds->t1296 = ax;
		ds->t1298 = dx;
	}
	si = (ss->*sp.u0).t0000;
	sp = bp;
	bp = (ss->*sp.u0).t0000;
	&sp.u0->t0000 = (word16) sp + 2;
}

// 21DC:0322: define fn21DC_0322
// Called from:
//      fn21DC_0856
//      main
define fn21DC_0322
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x04;
	es_bx = ds->t1296;
	ax = es->*((word16) bx + 8);
	dx = es->*((word16) bx + 0x0A);
	ss->*((word16) bp - 4) = ax;
	ss->*((word16) bp - 2) = dx;
	ax |= dx;
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(NE,Z))
	{
		es_bx = ss->*((word16) bp - 4);
		ax = es->*((word16) bx + 0x0E);
		ax |= es->*((word16) bx + 16);
		SZ = cond(ax);
		O = false;
		C = false;
		if (Test(NE,Z))
		{
			v17 = ds->t1296 - 0x10;
			ds->t1296 = v17;
			SCZO = cond(v17);
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = bx;
			fn21DC_01C4();
			sp = (word16) sp + 4;
			SCZO = cond(sp);
			sp = bp;
			bp = ss->*sp;
			sp = (word16) sp + 2;
			return;
		}
	}
	ds->w10D2 = 0x03;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 21DC:0368: define fn21DC_0368
// Called from:
//      fn20B2_0474
//      fn20B2_0612
//      fn20B2_0776
//      fn20B2_0898
//      fn20B2_099A
//      fn20B2_0AC6
//      fn20B2_0EF6
//      fn3CEE_4EAC
//      fn3CEE_858E
define fn21DC_0368
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x04;
	es_bx = ds->t1296;
	ax = es->*((word16) bx + 8);
	dx = es->*((word16) bx + 0x0A);
	ss->*((word16) bp - 4) = ax;
	ss->*((word16) bp - 2) = dx;
	ax |= dx;
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(NE,Z))
	{
		es_bx = ss->*((word16) bp - 4);
		ax = es->*((word16) bx + 0x0E);
		ax |= es->*((word16) bx + 16);
		SZ = cond(ax);
		O = false;
		C = false;
		if (Test(NE,Z))
		{
			v17 = ds->t1296 - 0x10;
			ds->t1296 = v17;
			SCZO = cond(v17);
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = bx;
			fn21DC_01C4();
			sp = (word16) sp + 4;
			v18 = (word32) ds->t1296 + 16;
			ds->t1296 = v18;
			SCZO = cond(v18);
			ax.u0 = 0x10;
			sp -= 2;
			ss->*sp = ax;
			v19 = ds->t1294;
			sp -= 2;
			ss->*sp = v19;
			v20 = ds->t1292;
			sp -= 2;
			ss->*sp = v20;
			v21 = ds->t1298;
			sp -= 2;
			ss->*sp = v21;
			v22 = ds->t1296;
			sp -= 2;
			ss->*sp = v22;
			fn2017_02EC();
			sp = (word16) sp + 0x0A;
			es_bx = ds->t1296;
			SCZO = cond(es->*bx - 0x00);
			if (Test(EQ,Z))
			{
				es->*bx = 0x80;
				(es->*((word16) bx + 8)).u0 = 0x00;
			}
			es_bx = ds->t1292;
			es->*bx = 0x00;
			sp = bp;
			bp = ss->*sp;
			sp = (word16) sp + 2;
			return;
		}
	}
	ds->w10D2 = 0x03;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 21DC:03EE: define fn21DC_03EE
// Called from:
//      fn3B5D_04C8
//      fn3B5D_057A
//      fn3B5D_0592
//      fn3B5D_05D0
//      fn3CEE_4EAC
define fn21DC_03EE
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x06;
	sp -= 2;
	ss->*sp = di;
	sp -= 2;
	ss->*sp = si;
	es_bx = Mem0[ds:0x1292:segptr32];
	SZP = cond(es->*bx & 0x0100);
	O = false;
	C = false;
	if (Test(NE,Z))
	{
		sp -= 2;
		ss->*sp = es;
		sp -= 2;
		ss->*sp = bx;
		fn21DC_066C();
		sp = (word16) sp + 4;
		SCZO = cond(sp);
	}
	es_bx = Mem0[ds:0x1292:segptr32];
	ax = Mem0[ds:0x1296:word16];
	dx = Mem0[ds:0x1298:word16];
	sp -= 2;
	ss->*sp = si;
	di = bx;
	si = ax;
	sp -= 2;
	ss->*sp = ds;
	ds = dx;
	cx = 0x08;
	size = cx *32 0x02;
	memcpy(di, si, size);
	cx = 0x00;
	di = (<unknown>*) ((char *) di + (word16) size);
	ds = ss->*sp;
	sp = (word16) sp + 2;
	si = (<unknown>*) (ss->*sp);
	sp = (word16) sp + 2;
	SZP = cond(es->*bx & 0x0100);
	O = false;
	C = false;
	if (Test(NE,Z))
	{
		SCZO = cond(es->*((word16) bx + 0x0C) - 0x00);
		if (Test(EQ,Z))
		{
			ax = es->*((word16) bx + 2);
			ss->*((word16) bp - 6) = ax;
			si = (<unknown>*) ax;
			si = (<unknown>*) ((char *) si + 1);
			SZO = cond(si);
			sp -= 2;
			ss->*sp = si;
			ax = bp - 4;
			sp -= 2;
			ss->*sp = ss;
			sp -= 2;
			ss->*sp = ax;
			fn21DC_0696();
			sp = (word16) sp + 6;
			ax |= ax;
			SZ = cond(ax);
			O = false;
			C = false;
			if (Test(NE,Z))
			{
				v23 = ss->*((word16) bp - 6);
				sp -= 2;
				ss->*sp = v23;
				es_bx = Mem0[ds:0x1296:segptr32];
				v24 = es->*((word16) bx + 0x0A);
				sp -= 2;
				ss->*sp = v24;
				v25 = es->*((word16) bx + 8);
				sp -= 2;
				ss->*sp = v25;
				v26 = ss->*((word16) bp - 2);
				sp -= 2;
				ss->*sp = v26;
				v27 = ss->*((word16) bp - 4);
				sp -= 2;
				ss->*sp = v27;
				fn2017_02EC();
				sp = (word16) sp + 0x0A;
				SCZO = cond(sp);
				bx = ss->*((word16) bp - 6);
				es_di = ss->*((word16) bp - 4);
				Mem0[es:bx + di:byte] = 0x00;
				es_bx = Mem0[ds:0x1292:segptr32];
				es->*((word16) bx + 0x0C) = si;
				ax = di;
				dx = ss->*((word16) bp - 2);
				es->*((word16) bx + 8) = ax;
				es->*((word16) bx + 0x0A) = dx;
			}
			else
			{
				es_bx = Mem0[ds:0x1292:segptr32];
				(es->*((word16) bx + 2)).u0 = 0x00;
				ax.u0 = 24002;
				es->*((word16) bx + 8) = ax;
				es->*((word16) bx + 0x0A) = ds;
				(es->*((word16) bx + 0x0C)).u0 = 0x00;
				Mem0[ds:0x10D2:word16] = 0x04;
			}
		}
	}
	v29 = Mem0[ds:0x1296:word16] - 0x10;
	Mem0[ds:0x1296:word16] = v29;
	SCZO = cond(v29);
	si = (<unknown>*) (ss->*sp);
	sp = (word16) sp + 2;
	di = (<unknown>*) (ss->*sp);
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 21DC:04BA: define fn21DC_04BA
// Called from:
//      fn1825_0D5E
//      fn20B2_0140
//      fn20B2_099A
//      fn20B2_0BDC
//      fn20B2_0E9E
//      fn20B2_0EF6
//      fn20B2_107C
//      fn20B2_10AC
//      fn20B2_1192
//      main
define fn21DC_04BA
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x02;
	v8 = Mem0[ds:0x1278:word16] + 0x01;
	Mem0[ds:0x1278:word16] = v8;
	SCZO = cond(Mem0[ds:0x1278:word16] - 0x14);
	if (Test(UGT,CZ))
	{
		ax.u0 = 0x01;
		sp -= 2;
		ss->*sp = ax;
		fn3CEE_01B7();
		sp = (word16) sp + 2;
		SCZO = cond(sp);
	}
	SCZO = cond(Mem0[ds:0x1278:word16] - 0x05);
	if (Test(ULT,C))
		fn2644_4B2E();
	Mem0[ds:0x1278:word16] = 0x14;
	SCZO = cond(Mem0[ds:0x20B8:word16] - 0x00);
	if (Test(NE,Z))
	{
		ax.u0 = 0x01;
		sp -= 2;
		ss->*sp = ax;
		ax.u0 = 24004;
		sp -= 2;
		ss->*sp = ds;
		sp -= 2;
		ss->*sp = ax;
		v14 = Mem0[ds:8378:word16];
		sp -= 2;
		ss->*sp = v14;
		fn208F_00EF();
		sp = (word16) sp + 8;
		SCZO = cond(sp);
		v15 = Mem0[ds:8378:word16];
		sp -= 2;
		ss->*sp = v15;
		fn208F_00AE();
		sp = (word16) sp + 2;
		SCZO = cond(sp);
		Mem0[ds:0x20B8:word16] = 0x00;
	}
	SCZO = cond(Mem0[ds:0x20B2:word16] - 0x00);
	if (Test(NE,Z))
	{
		v16 = Mem0[ds:0x20B2:word16];
		sp -= 2;
		ss->*sp = v16;
		fn208F_00AE();
		sp = (word16) sp + 2;
		SCZO = cond(sp);
		Mem0[ds:0x20B2:word16] = 0x00;
		ax.u0 = 0x04;
		sp -= 2;
		ss->*sp = ax;
		fn1F38_0D8D();
		sp = (word16) sp + 2;
		SCZO = cond(sp);
	}
	fn3431_013E();
	fn2E37_0446();
	fn2C27_01AC();
	fn1F38_0D84();
	fn1F38_0BF1();
	fn1F38_036F();
	v17 = Mem0[ds:0x1290:word16];
	sp -= 2;
	ss->*sp = v17;
	fn3CEE_01B7();
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 21DC:0588: define fn21DC_0588
// Called from:
//      fn2368_0A7A
//      fn2368_0C7E
define fn21DC_0588
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x04;
	ax = ss->*((word16) bp + 6);
	ax += Mem0[ds:4744:word16];
	SCZO = cond(ax - Mem0[ds:4748:word16]);
	if (Test(UGE,C))
	{
		ax.u0 = 24006;
		sp -= 2;
		ss->*sp = ds;
		sp -= 2;
		ss->*sp = ax;
		ax.u0 = 22;
		sp -= 2;
		ss->*sp = ax;
		fn20B2_0E9E();
		sp = (word16) sp + 6;
		SCZO = cond(sp);
		es_bx = Mem0[ds:0x1282:segptr32];
		es->*bx = 0x00;
		ax = bx;
		dx = es;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
	}
	else
	{
		ax.u0 = 22;
		dx_ax = Mem0[ds:4744:word16] *u32 ax;
		ax += Mem0[ds:0x1282:word16];
		dx = Mem0[ds:4740:word16];
		ax = (word32) ax.u0 + 22;
		ss->*((word16) bp - 4) = ax;
		ss->*((word16) bp - 2) = dx;
		es_bx = ss->*((word16) bp - 4);
		es->*bx = 0x00;
		ax = ss->*((word16) bp + 6);
		v15 = Mem0[ds:4744:word16] + ax;
		Mem0[ds:4744:word16] = v15;
		SCZO = cond(v15);
		ax = bx;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
	}
}

// 21DC:05EA: define fn21DC_05EA
// Called from:
//      fn2368_0D20
define fn21DC_05EA
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	ax = Mem0[ds:4748:word16];
	--ax;
	SCZO = cond(ax - Mem0[ds:4744:word16]);
	if (Test(UGT,CZ))
	{
		v11 = Mem0[ds:4748:word16] - 0x01;
		Mem0[ds:4748:word16] = v11;
		ax.u0 = 22;
		dx_ax = Mem0[ds:4748:word16] *u32 ax;
		ax += Mem0[ds:0x1282:word16];
		SCZO = cond(ax);
	}
	else
	{
		ax.u0 = 0x5DCC;
		sp -= 2;
		ss->*sp = ds;
		sp -= 2;
		ss->*sp = ax;
		ax.u0 = 22;
		sp -= 2;
		ss->*sp = ax;
		fn20B2_0E9E();
		sp = (word16) sp + 6;
		SCZO = cond(sp);
		ax = Mem0[ds:0x1282:word16];
	}
	dx = Mem0[ds:4740:word16];
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 21DC:066C: define fn21DC_066C
// Called from:
//      fn21DC_03EE
define fn21DC_066C
{
	sp = fp;
	Top = 0;
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_57849 Eq_57856::*) bp;
	bp = sp;
	es_bx.u1 = (ss->*bp).t0006.u1;
	SZP = cond((es->*bx).w0000 & 0x0100);
	O = false;
	C = false;
	if (Test(NE,Z))
	{
		SCZO = cond((es->*bx).ptr000C - 0x00);
		if (Test(NE,Z))
		{
			v14 = (es->*bx).ptr000C;
			sp -= 2;
			(ss->*sp).ptr0000 = (struct Eq_57849 Eq_57856::*) v14;
			v15 = (es->*bx).ptr000A;
			sp -= 2;
			(ss->*sp).ptr0000 = (struct Eq_57849 Eq_57856::*) v15;
			v16 = (es->*bx).ptr0008;
			sp -= 2;
			(ss->*sp).ptr0000 = (struct Eq_57849 Eq_57856::*) v16;
			fn21DC_074E();
			sp = (struct Eq_57849 Eq_57856::*) &sp->t0006.u0;
			SCZO = cond(sp);
		}
	}
	bp = (struct Eq_57849 Eq_57856::*) (ss->*sp).ptr0000;
	sp = (struct Eq_57849 Eq_57856::*) &sp->ptr0000;
}

// 21DC:0696: define fn21DC_0696
// Called from:
//      fn21DC_03EE
//      fn2644_17C8
//      fn2EB3_060C
//      fn31FF_19EA
//      fn3CEE_4EAC
//      fn3CEE_6980
define fn21DC_0696
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	v6 = ss->*((word16) bp + 0x0A);
	sp -= 2;
	ss->*sp = v6;
	fn3CEE_0747();
	sp = (word16) sp + 2;
	es_bx = ss->*((word16) bp + 6);
	es->*bx = ax;
	es->*((word16) bx + 2) = dx;
	ax |= dx;
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(EQ,Z))
	{
		v17 = ss->*((word16) bp + 0x0A);
		sp -= 2;
		ss->*sp = v17;
		sp -= 2;
		ss->*sp = es;
		sp -= 2;
		ss->*sp = bx;
		fn2068_0154();
		sp = (word16) sp + 6;
		es_bx = ss->*((word16) bp + 6);
		ax = (cui16) (es->*bx);
		ax |= es->*((word16) bx + 2);
		SZ = cond(ax);
		O = false;
		C = false;
		if (Test(EQ,Z))
		{
			ds->w10D2 = 0x04;
			ax -= ax;
			SCZO = cond(ax);
			bp = ss->*sp;
			sp = (word16) sp + 2;
			return;
		}
	}
	ax = 0x01;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 21DC:06DC: define fn21DC_06DC
// Called from:
//      fn21DC_0EC2
//      fn2368_0002
//      fn2644_000E
//      fn2BC7_0236
//      fn2C27_0032
//      fn2D1A_0008
//      fn31FF_0008
define fn21DC_06DC
{
	sp = fp;
	Top = 0;
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_58052 Eq_58059::*) bp;
	bp = sp;
	v6 = (struct Eq_58052 Eq_58059::*) (ss->*bp).ptr000A;
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_58052 Eq_58059::*) v6;
	fn3CEE_0747();
	sp = (struct Eq_58052 Eq_58059::*) &sp->ptr0000;
	es_bx.u1 = (ss->*bp).t0006.u1;
	(es->*bx).w0000 = ax;
	(es->*bx).w0002 = dx;
	ax |= dx;
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(EQ,Z))
	{
		ax -= ax;
		SCZO = cond(ax);
		bp = (struct Eq_58052 Eq_58059::*) (ss->*sp).ptr0000;
		sp = (struct Eq_58052 Eq_58059::*) &sp->ptr0000;
	}
	else
	{
		ax = 0x01;
		bp = (struct Eq_58052 Eq_58059::*) (ss->*sp).ptr0000;
		sp = (struct Eq_58052 Eq_58059::*) &sp->ptr0000;
	}
}

// 21DC:0702: define fn21DC_0702
// Called from:
//      fn2368_042A
//      fn2644_0F82
//      fn2644_45CA
//      fn2EB3_0002
//      fn2EB3_07B2
//      fn31FF_19EA
//      fn31FF_1C0A
//      fn3431_013E
define fn21DC_0702
{
	word32 dwArg04;
	mp16 fp;
	Top_3 = 0;
	ptrLoc06_32 = dwArg04;
	fn3CEE_0732();
	SCZO_23 = cond(fp - 0x02);
	C_33 = SLICE(SCZO_23, bool, 1);
	O_34 = SLICE(SCZO_23, bool, 4);
	S_35 = (bool) SCZO_23;
	Z_36 = SLICE(SCZO_23, bool, 2);
	ax_24 = 0x01;
}

// 21DC:0718: define fn21DC_0718
// Called from:
//      fn2368_00D4
//      fn2368_059E
//      fn31FF_17DA
//      fn3B5D_04C8
define fn21DC_0718
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x04;
	SCZO = cond(sp);
	v7 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v7;
	fn3CEE_0747();
	sp = (word16) sp + 2;
	ss->*((word16) bp - 4) = ax;
	ss->*((word16) bp - 2) = dx;
	ax |= dx;
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(EQ,Z))
	{
		v14 = ss->*((word16) bp + 6);
		sp -= 2;
		ss->*sp = v14;
		ax = bp - 4;
		sp -= 2;
		ss->*sp = ss;
		sp -= 2;
		ss->*sp = ax;
		fn2068_0154();
		sp = (word16) sp + 6;
		SCZO = cond(sp);
	}
	ax = ss->*((word16) bp - 4);
	dx = (cui16) (ss->*((word16) bp - 2));
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 21DC:074E: define fn21DC_074E
// Called from:
//      fn21DC_066C
//      fn2368_033C
//      fn2368_042A
//      fn2EB3_0002
//      fn31FF_17DA
//      fn3431_013E
//      fn3CEE_4EAC
//      fn3CEE_6980
define fn21DC_074E
{
	word32 dwArg04;
	mp16 fp;
	Top_3 = 0;
	ptrLoc06_31 = dwArg04;
	fn3CEE_0732();
	SCZO_23 = cond(fp - 0x02);
	C_32 = SLICE(SCZO_23, bool, 1);
	O_33 = SLICE(SCZO_23, bool, 4);
	S_34 = (bool) SCZO_23;
	Z_35 = SLICE(SCZO_23, bool, 2);
}

// 21DC:081A: define fn21DC_081A
// Called from:
//      fn3431_06CC
define fn21DC_081A
{
	selector ds;
	word16 wArg04;
	Top_3 = 0;
	wLoc04_44 = 0x00;
	do
	{
		wLoc04_45 = ϕ(wLoc04_44, wLoc04_47);
		Mem14 = ϕ(Mem11, Mem25);
		bx_19 = wLoc04_45 * 0x06;
		if (ds->a20C0[0].w0000[wLoc04_45].w0000 == wArg04)
			break;
		v11_24 = wLoc04_45 + 0x01;
		wLoc04_47 = v11_24;
	} while (v11_24 < 33);
	wLoc04_48 = ϕ(wLoc04_45, wLoc04_47);
	SCZO_31 = cond(wLoc04_48 - 33);
	C_32 = SLICE(SCZO_31, bool, 1);
	O_59 = SLICE(SCZO_31, bool, 4);
	S_62 = (bool) SCZO_31;
	Z_69 = SLICE(SCZO_31, bool, 2);
	if (wLoc04_48 >= 33)
	{
		ax_33 = 0x00;
		SCZO_34 = cond(0x00);
		C_57 = SLICE(SCZO_34, bool, 1);
		O_60 = SLICE(SCZO_34, bool, 4);
		S_63 = (bool) SCZO_34;
		Z_70 = SLICE(SCZO_34, bool, 2);
	}
	else
		ax_38 = 0x01;
}

// 21DC:0856: define fn21DC_0856
// Called from:
//      fn3431_06CC
define fn21DC_0856
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x0A;
	SCZO = cond(sp);
	sp -= 2;
	ss->*sp = si;
	ax = ds->t0F1B;
	ss->*((word16) bp - 6) = ax;
	ax = ds->t127A;
	ss->*((word16) bp - 8) = ax;
	(ss->*((word16) bp - 0x0A)).u0 = 0x00;
	do
	{
		bx = ss->*((word16) bp - 0x0A);
		ax = bx;
		bx <<= 0x01;
		bx += ax;
		bx <<= 0x01;
		ax = ss->*((word16) bp + 6);
		SCZO = cond(ds->*((word16) bx + 8384) - ax);
		if (Test(EQ,Z))
			break;
		v12 = (word16) (ss->*((word16) bp - 0x0A)) + 1;
		ss->*((word16) bp - 0x0A) = v12;
		SCZO = cond(ss->*((word16) bp - 0x0A) - 33);
	} while (Test(ULT,C));
	SCZO = cond(ss->*((word16) bp - 0x0A) - 33);
	if (Test(ULT,C))
	{
		bx = ss->*((word16) bp - 0x0A);
		ax = bx;
		bx <<= 0x01;
		bx += ax;
		bx <<= 0x01;
		ax = ds->*((word16) bx + 8386);
		dx = ds->*((word16) bx + 8388);
		ss->*((word16) bp - 4) = ax;
		ss->*((word16) bp - 2) = dx;
		dx |= ax;
		SZ = cond(dx);
		O = false;
		C = false;
		if (Test(NE,Z))
		{
			ds->t0F1B.u0 = 0x00;
			ax -= ax;
			sp -= 2;
			ss->*sp = ax;
			ax.u0 = 22;
			dx_ax = ds->w128A *32 ax;
			SCZO = cond(dx_ax);
			si = ax;
			es_bx = ds->t1282;
			v21 = es->*((word16) si + ((word16) bx + 20));
			sp -= 2;
			ss->*sp = v21;
			v22 = es->*((word16) si + ((word16) bx + 18));
			sp -= 2;
			ss->*sp = v22;
			fn2BC7_050A();
			sp = (word16) sp + 4;
			SCZO = cond(sp);
			sp -= 2;
			ss->*sp = dx;
			sp -= 2;
			ss->*sp = ax;
			fn2368_022E();
			sp = (word16) sp + 6;
			SCZO = cond(sp);
			v23 = ds->t127A;
			sp -= 2;
			ss->*sp = v23;
			fn2368_01E0();
			sp = (word16) sp + 2;
			ax -= ax;
			SCZO = cond(ax);
			sp -= 2;
			ss->*sp = ax;
			v24 = ds->t20AC;
			sp -= 2;
			ss->*sp = v24;
			v25 = ds->t20AA;
			sp -= 2;
			ss->*sp = v25;
			fn2368_022E();
			sp = (word16) sp + 6;
			SCZO = cond(sp);
			ax.u0 = 0x03;
			sp -= 2;
			ss->*sp = ax;
			fn21DC_00A6();
			sp = (word16) sp + 2;
			SCZO = cond(sp);
			v26 = ss->*((word16) bp - 2);
			sp -= 2;
			ss->*sp = v26;
			v27 = ss->*((word16) bp - 4);
			sp -= 2;
			ss->*sp = v27;
			fn2368_030E();
			sp = (word16) sp + 4;
			SCZO = cond(sp);
			fn21DC_0322();
		}
	}
	ax = ss->*((word16) bp - 6);
	ds->t0F1B = ax;
	ax = ss->*((word16) bp - 8);
	ds->t127A = ax;
	si = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 21DC:096A: define fn21DC_096A
// Called from:
//      fn2644_0F82
define fn21DC_096A
{
	sp = fp;
	Top = 0;
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_58623 Eq_58630::*) bp;
	bp = sp;
	v6 = (struct Eq_58623 Eq_58630::*) (ss->*bp).ptr0008;
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_58623 Eq_58630::*) v6;
	v7 = (struct Eq_58623 Eq_58630::*) (ss->*bp).ptr0006;
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_58623 Eq_58630::*) v7;
	fn3CEE_0732();
	sp = (struct Eq_58623 Eq_58630::*) &sp->ptr0000;
	SCZO = cond(sp);
	bp = (struct Eq_58623 Eq_58630::*) (ss->*sp).ptr0000;
	sp = (struct Eq_58623 Eq_58630::*) &sp->ptr0000;
}

// 21DC:097E: define fn21DC_097E
// Called from:
//      fn1825_000A
//      fn1825_4CFE
//      fn2BC7_0000
//      fn2BC7_0034
//      fn2BC7_011C
//      fn2D1A_0A76
//      fn2D1A_0BD2
//      fn2E37_02A4
//      fn3431_000A
//      fn3CEE_4EAC
//      fn3CEE_6121
define fn21DC_097E
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x04;
	SCZO = cond(sp);
	v7 = ss->*((word16) bp + 6);
	sp -= 2;
	ss->*sp = v7;
	fn3CEE_0747();
	sp = (word16) sp + 2;
	ss->*((word16) bp - 4) = ax;
	ss->*((word16) bp - 2) = dx;
	ax |= dx;
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(EQ,Z))
	{
		v14 = ss->*((word16) bp + 6);
		sp -= 2;
		ss->*sp = v14;
		ax = bp - 4;
		sp -= 2;
		ss->*sp = ss;
		sp -= 2;
		ss->*sp = ax;
		fn2068_0154();
		sp = (word16) sp + 6;
		SCZO = cond(sp);
	}
	ax = ss->*((word16) bp - 4);
	dx = (cui16) (ss->*((word16) bp - 2));
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 21DC:09B4: define fn21DC_09B4
// Called from:
//      fn1825_000A
//      fn1825_0D5E
//      fn1825_0E72
//      fn1825_18A6
//      fn1825_23A8
//      fn1825_3436
//      fn1825_704E
//      fn2BC7_011C
//      fn2C27_01AC
//      fn2D1A_0B04
//      fn2E37_0446
//      fn3431_013E
//      fn3CEE_4EAC
//      fn3CEE_661D
//      fn3CEE_67B9
define fn21DC_09B4
{
	word32 dwArg04;
	mp16 fp;
	Top_3 = 0;
	ptrLoc06_31 = dwArg04;
	fn3CEE_0732();
	SCZO_23 = cond(fp - 0x02);
	C_32 = SLICE(SCZO_23, bool, 1);
	O_33 = SLICE(SCZO_23, bool, 4);
	S_34 = (bool) SCZO_23;
	Z_35 = SLICE(SCZO_23, bool, 2);
}

// 21DC:0D60: define fn21DC_0D60
// Called from:
//      fn1825_000A
//      fn207F_0006
define fn21DC_0D60
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x02;
	SCZO = cond(sp);
	fn1F38_0D37();
	ss->*((word16) bp - 2) = ax;
	ax |= ax;
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(NE,Z))
	{
		SCZO = cond(ax - 0x80);
		if (Test(UGE,C))
		{
			SCZO = cond(ax - 0x87);
			if (Test(ULE,CZ))
			{
				fn1F38_0D06();
				ss->*((word16) bp - 2) = ax;
				sp -= 2;
				ss->*sp = ax;
				fn21DC_0006();
				sp = (word16) sp + 2;
				SCZO = cond(sp);
			}
		}
	}
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 21DC:0D96: define fn21DC_0D96
// Called from:
//      fn21DC_0DE4
define fn21DC_0D96
{
	sp = fp;
	Top = 0;
	sp -= 2;
	(ss->*sp).ptr0000 = (struct Eq_58844 Eq_58851::*) bp;
	bp = sp;
	sp -= 0x04;
	SCZO = cond(sp);
	(ss->*bp).wFFFFFFFE = 0x00;
	while (true)
	{
		es_bx.u2 = (ss->*bp).t0006.u2;
		al = es->*bx;
		(ss->*bp).bFFFFFFFC = al;
		al |= al;
		SZ = cond(al);
		O = false;
		C = false;
		if (Test(EQ,Z))
			break;
		SCZO = cond((ss->*bp).bFFFFFFFC - 0x30);
		if (Test(ULT,C))
			break;
		SCZO = cond((ss->*bp).bFFFFFFFC - 0x39);
		if (Test(UGT,CZ))
			break;
		ax = (ss->*bp).wFFFFFFFE;
		cx = ax;
		ax <<= 0x01;
		ax <<= 0x01;
		ax += cx;
		ax <<= 0x01;
		es_bx.u2 = (ss->*bp).t0006.u2;
		v18 = (ss->*bp).t0006.u1 + 0x01;
		(ss->*bp).t0006.u1 = (word16) v18;
		cl = es->*bx;
		ch -= ch;
		ax += cx;
		ax -= 0x30;
		SCZO = cond(ax);
		(ss->*bp).wFFFFFFFE = ax;
	}
	ax = (ss->*bp).wFFFFFFFE;
	sp = bp;
	bp = (struct Eq_58844 Eq_58851::*) (ss->*sp).ptr0000;
	sp = (struct Eq_58844 Eq_58851::*) &sp->ptr0000;
}

// 21DC:0DE4: define fn21DC_0DE4
// Called from:
//      fn21DC_0EC2
define fn21DC_0DE4
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x04;
	SCZO = cond(sp);
	ax.u0 = 0x5DDA;
	sp -= 2;
	ss->*sp = ds;
	sp -= 2;
	ss->*sp = ax;
	fn38D6_0146();
	sp = (word16) sp + 4;
	SCZO = cond(sp);
	ss->*((word16) bp - 4) = ax;
	ss->*((word16) bp - 2) = dx;
	while (true)
	{
		es_bx = ss->*((word16) bp - 4);
		SCZO = cond(es->*bx - 0x00);
		if (Test(EQ,Z))
			break;
		v14 = (word32) (ss->*((word16) bp - 4)) + 1;
		ss->*((word16) bp - 4) = v14;
		al = es->*bx;
		ah -= ah;
		SCZO = cond(ah);
		sp -= 2;
		ss->*sp = ax;
		fn38AD_001E();
		sp = (word16) sp + 2;
		ah -= ah;
		SCZO = cond(ax - 0x45);
		if (Test(NE,Z))
		{
			SCZO = cond(ax - 0x46);
			if (Test(NE,Z))
			{
				SCZO = cond(ax - 0x52);
				if (Test(NE,Z))
				{
					SCZO = cond(ax - 0x53);
					if (Test(NE,Z))
					{
						SCZO = cond(ax - 0x56);
						if (Test(NE,Z))
						{
							SCZO = cond(ax - 88);
							if (Test(EQ,Z))
							{
								v23 = ss->*((word16) bp - 2);
								sp -= 2;
								ss->*sp = v23;
								v24 = ss->*((word16) bp - 4);
								sp -= 2;
								ss->*sp = v24;
								fn21DC_0D96();
								sp = (word16) sp + 4;
								SCZO = cond(sp);
								Mem0[ds:0x1272:word16] = ax;
							}
						}
						else
						{
							v25 = ss->*((word16) bp - 2);
							sp -= 2;
							ss->*sp = v25;
							v26 = ss->*((word16) bp - 4);
							sp -= 2;
							ss->*sp = v26;
							fn21DC_0D96();
							sp = (word16) sp + 4;
							SCZO = cond(sp);
							Mem0[ds:0x126C:word16] = ax;
						}
					}
					else
					{
						v27 = ss->*((word16) bp - 2);
						sp -= 2;
						ss->*sp = v27;
						v28 = ss->*((word16) bp - 4);
						sp -= 2;
						ss->*sp = v28;
						fn21DC_0D96();
						sp = (word16) sp + 4;
						SCZO = cond(sp);
						Mem0[ds:0x1276:word16] = ax;
					}
				}
				else
				{
					v29 = ss->*((word16) bp - 2);
					sp -= 2;
					ss->*sp = v29;
					v30 = ss->*((word16) bp - 4);
					sp -= 2;
					ss->*sp = v30;
					fn21DC_0D96();
					sp = (word16) sp + 4;
					Mem0[ds:0x126E:word16] = ax;
					ax |= ax;
					SZ = cond(ax);
					O = false;
					C = false;
					if (Test(EQ,Z))
						Mem0[ds:0x126E:word16] = ~0x00;
				}
			}
			else
			{
				v31 = ss->*((word16) bp - 2);
				sp -= 2;
				ss->*sp = v31;
				v32 = ss->*((word16) bp - 4);
				sp -= 2;
				ss->*sp = v32;
				fn21DC_0D96();
				sp = (word16) sp + 4;
				SCZO = cond(sp);
				Mem0[ds:4724:word16] = ax;
			}
		}
		else
		{
			v18 = ss->*((word16) bp - 2);
			sp -= 2;
			ss->*sp = v18;
			v19 = ss->*((word16) bp - 4);
			sp -= 2;
			ss->*sp = v19;
			fn21DC_0D96();
			sp = (word16) sp + 4;
			Mem0[ds:0x1270:word16] = ax;
			ax |= ax;
			SZ = cond(ax);
			O = false;
			C = false;
			if (Test(EQ,Z))
				Mem0[ds:0x1270:word16] = ~0x00;
		}
	}
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

// 21DC:0EC2: define fn21DC_0EC2
// Called from:
//      main
define fn21DC_0EC2
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x0E;
	SCZO = cond(sp);
	fn1F38_032B();
	fn1F38_0BD9();
	fn1F38_0D68();
	fn3CEE_0AEA();
	fn208F_000C();
	fn21DC_0DE4();
	SCZO = cond(Mem0[ds:0x1276:word16] - 0x00);
	if (Test(NE,Z))
		Mem0[ds:0x0EE8:word16] = 0x01;
	SCZO = cond(Mem0[ds:4724:word16] - 0x00);
	if (Test(NE,Z))
	{
		v9 = Mem0[ds:4724:word16];
		sp -= 2;
		ss->*sp = v9;
		fn208F_01E6();
		sp = (word16) sp + 2;
		ax |= ax;
		SZ = cond(ax);
		O = false;
		C.u0 = false;
		if (Test(EQ,Z))
		{
			ax.u0 = 0x02;
			sp = bp;
			bp = ss->*sp;
			sp = (word16) sp + 2;
			return;
		}
	}
	fn2017_01A8();
	cl = 0x06;
	ax >>= cl;
	ss->*((word16) bp - 2) = ax;
	SCZO = cond(Mem0[ds:0x1272:word16] - 0x00);
	if (Test(NE,Z))
	{
		ax = Mem0[ds:0x1272:word16];
		SCZO = cond(ss->*((word16) bp - 2) - ax);
		if (Test(ULT,C))
			goto l21DC_0F2B;
		ax = Mem0[ds:0x1272:word16];
		v15 = ss->*((word16) bp - 2) - ax;
		ss->*((word16) bp - 2) = v15;
		SCZO = cond(v15);
	}
	SCZO = cond(ss->*((word16) bp - 2) - 0x18);
	if (Test(ULT,C))
		goto l21DC_0F2B;
	v16 = ss->*((word16) bp - 2) - 0x18;
	ss->*((word16) bp - 2) = v16;
	SCZO = cond(Mem0[ds:0x126C:word16] - 0x00);
	if (Test(NE,Z))
		ax = Mem0[ds:0x126C:word16];
	else
	{
		ax = ss->*((word16) bp - 2);
		dx -= dx;
		cx = 0x05;
		v20 = dx_ax;
		dx = (uint16) (v20 % cx);
		ax = (uint16) (v20 /u cx);
		SCZO = cond(ax);
	}
	ss->*((word16) bp - 0x0E) = ax;
	ax -= 0x30;
	SCZO = cond(ax);
	cx = cx - cx - C;
	ax &= cx;
	ax = (word16) ax + 48;
	ss->*((word16) bp - 0x0E) = ax;
	SCZO = cond(ss->*((word16) bp - 2) - ax);
	if (Test(ULT,C))
	{
l21DC_0F2B:
		ax.u0 = 0x01;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
		return;
	}
	v21 = ss->*((word16) bp - 2) - ax;
	ss->*((word16) bp - 2) = v21;
	SCZO = cond(Mem0[ds:0x1270:word16] - ~0x00);
	if (Test(NE,Z))
	{
		fn2017_004C();
		ss->*((word16) bp - 0x0C) = ax;
		SCZO = cond(ax - 0x10);
		if (Test(UGE,C))
			ax.u0 = 0x01;
		else
		{
			ax -= ax;
			SCZO = cond(ax);
		}
		ss->*((word16) bp - 8) = ax;
	}
	else
		(ss->*((word16) bp - 8)).u0 = 0x00;
	SCZO = cond(ss->*((word16) bp - 8) - 0x00);
	if (Test(NE,Z))
	{
		SCZO = cond(Mem0[ds:0x1270:word16] - 0x10);
		if (Test(UGE,C))
			ax = Mem0[ds:0x1270:word16];
		else
			ax = ss->*((word16) bp - 0x0C);
		ss->*((word16) bp - 0x0A) = ax;
		ax -= 0x0400;
		SCZO = cond(ax);
		cx = cx - cx - C;
		ax &= cx;
		ah += 0x04;
		ss->*((word16) bp - 0x0A) = ax;
		SCZO = cond(Mem0[ds:0x126E:word16] - ~0x00);
		if (Test(EQ,Z))
		{
			(ss->*((word16) bp - 4)).u0 = 0x00;
			goto l21DC_1014;
		}
		SCZO = cond(Mem0[ds:0x126E:word16] - 0x00);
		if (Test(NE,Z))
			ax = Mem0[ds:0x126E:word16];
		else
		{
			ax = ss->*((word16) bp - 2);
			dx -= dx;
			cx = 0x03;
			v24 = dx_ax;
			dx = (uint16) (v24 % cx);
			ax = (uint16) (v24 /u cx);
			SCZO = cond(ax);
		}
l21DC_1011:
		ss->*((word16) bp - 4) = ax;
l21DC_1014:
		ax = ss->*((word16) bp - 4);
		ax = (word16) ax + 8;
		SCZO = cond(ax - ss->*((word16) bp - 2));
		if (Test(ULE,CZ))
		{
			ax = ss->*((word16) bp - 2);
			ax -= ss->*((word16) bp - 4);
			SCZO = cond(ax);
			ss->*((word16) bp - 6) = ax;
			v25 = Mem0[ds:0x1272:word16];
			sp -= 2;
			ss->*sp = v25;
			fn2068_0008();
			sp = (word16) sp + 2;
			ax |= ax;
			SZ = cond(ax);
			O = false;
			C.u0 = false;
			if (Test(EQ,Z))
			{
				v27 = ss->*((word16) bp - 8);
				sp -= 2;
				ss->*sp = v27;
				SCZO = cond(ss->*((word16) bp - 8) - 0x00);
				if (Test(NE,Z))
					ax = ss->*((word16) bp - 0x0A);
				else
					ax = ss->*((word16) bp - 4);
				sp -= 2;
				ss->*sp = ax;
				fn2C27_0032();
				sp = (word16) sp + 4;
				ax |= ax;
				SZ = cond(ax);
				O = false;
				C.u0 = false;
				if (Test(NE,Z))
				{
					fn2BC7_0236();
					ax |= ax;
					SZ = cond(ax);
					O = false;
					C.u0 = false;
					if (Test(NE,Z))
					{
						ax.u0 = 0x2E;
						dx_ax = ss->*((word16) bp - 0x0E) *32 ax;
						Mem0[ds:4742:word16] = ax;
						Mem0[ds:4744:word16] = 0x00;
						Mem0[ds:4746:word16] = 0x00;
						Mem0[ds:4748:word16] = ax;
						ax.u0 = 22;
						dx_ax = Mem0[ds:4742:word16] *u32 ax;
						SCZO = cond(dx_ax);
						sp -= 2;
						ss->*sp = ax;
						ax.u0 = 0x1282;
						sp -= 2;
						ss->*sp = ds;
						sp -= 2;
						ss->*sp = ax;
						fn21DC_06DC();
						sp = (word16) sp + 6;
						ax |= ax;
						SZ = cond(ax);
						O = false;
						C.u0 = false;
						if (Test(NE,Z))
						{
							fn31FF_0008();
							ax |= ax;
							SZ = cond(ax);
							O = false;
							C.u0 = false;
							if (Test(NE,Z))
							{
								fn2E37_0432();
								fn3431_000A();
								fn2368_0002();
								ax |= ax;
								SZ = cond(ax);
								O = false;
								C.u0 = false;
								if (Test(NE,Z))
								{
									fn2644_000E();
									ax |= ax;
									SZ = cond(ax);
									O = false;
									C.u0 = false;
									if (Test(NE,Z))
									{
										fn2D1A_0008();
										ax |= ax;
										SZ = cond(ax);
										O = false;
										C.u0 = false;
										if (Test(NE,Z))
										{
											ax -= ax;
											SCZO = cond(ax);
											sp = bp;
											bp = ss->*sp;
											sp = (word16) sp + 2;
											return;
										}
									}
								}
							}
						}
					}
				}
			}
		}
		goto l21DC_0F2B;
	}
	SCZO = cond(Mem0[ds:0x126E:word16] - ~0x00);
	if (Test(NE,Z))
	{
		SCZO = cond(Mem0[ds:0x126E:word16] - 0x00);
		if (Test(NE,Z))
		{
			ax = Mem0[ds:0x126E:word16];
l21DC_1002:
			ss->*((word16) bp - 4) = ax;
			ax -= 0x10;
			SCZO = cond(ax);
			cx = cx - cx - C;
			cx = ~cx;
			ax &= cx;
			ax = (word16) ax + 16;
			SCZO = cond(ax);
			goto l21DC_1011;
		}
	}
	ax = ss->*((word16) bp - 2);
	dx -= dx;
	cx = 0x03;
	v26 = dx_ax;
	dx = (uint16) (v26 % cx);
	ax = (uint16) (v26 /u cx);
	SCZO = cond(ax);
	goto l21DC_1002;
}

// 21DC:10DE: define main
// Called from:
//      fn3CEE_FD1B
define main
{
	sp = fp;
	Top = 0;
	sp -= 2;
	ss->*sp = bp;
	bp = sp;
	sp -= 0x08;
	SCZO = cond(sp);
	sp -= 2;
	ss->*sp = si;
	fn21DC_0EC2();
	ss->*((word16) bp - 8) = ax;
	ax |= ax;
	SZ = cond(ax);
	O = false;
	C = false;
	if (Test(EQ,Z))
	{
		ax.u0 = 24034;
		sp -= 2;
		ss->*sp = ds;
		sp -= 2;
		ss->*sp = ax;
		fn2BC7_03C2();
		sp = (word16) sp + 4;
		SCZO = cond(sp);
		sp -= 2;
		ss->*sp = dx;
		sp -= 2;
		ss->*sp = ax;
		fn2368_030E();
		sp = (word16) sp + 4;
		SCZO = cond(sp);
		fn21DC_0322();
		(ss->*((word16) bp - 6)).u0 = 0x01;
		while (true)
		{
			ax = ss->*((word16) bp - 6);
			SCZO = cond(ss->*((word16) bp + 6) - ax);
			if (Test(ULE,CZ))
				break;
			ax -= ax;
			sp -= 2;
			ss->*sp = ax;
			bx = ss->*((word16) bp - 6);
			bx <<= 0x01;
			bx <<= 0x01;
			SCZO = cond(bx);
			es_si = ss->*((word16) bp + 8);
			v24 = es->*((word16) si + ((word16) bx + 2));
			sp -= 2;
			ss->*sp = v24;
			v25 = Mem0[es:bx + si:word16];
			sp -= 2;
			ss->*sp = v25;
			fn2368_022E();
			sp = (word16) sp + 6;
			SCZO = cond(sp);
			v26 = (word16) (ss->*((word16) bp - 6)) + 1;
			ss->*((word16) bp - 6) = v26;
			SZO = cond(v26);
		}
		SCZO = cond(ss->*((word16) bp + 6) - 0x01);
		if (Test(GT,SZO))
		{
			ax = ss->*((word16) bp + 6);
			--ax;
			SZO = cond(ax);
		}
		else
		{
			ax -= ax;
			SCZO = cond(ax);
		}
		sp -= 2;
		ss->*sp = ax;
		fn21DC_00A6();
		sp = (word16) sp + 2;
		SCZO = cond(sp);
		ax = bp - 4;
		sp -= 2;
		ss->*sp = ss;
		sp -= 2;
		ss->*sp = ax;
		fn3CB4_0008();
		sp = (word16) sp + 4;
		SCZO = cond(sp);
		es_bx = ss->*((word16) bp - 4);
		v21 = es->*((word16) bx + 30);
		sp -= 2;
		ss->*sp = v21;
		v22 = es->*((word16) bx + 28);
		sp -= 2;
		ss->*sp = v22;
		fn2368_030E();
		sp = (word16) sp + 4;
		SCZO = cond(sp);
		fn21DC_0322();
		fn21DC_04BA();
		ax -= ax;
		SCZO = cond(ax);
		sp -= 2;
		ss->*sp = ax;
		fn3CEE_01B7();
		sp = (word16) sp + 2;
		SCZO = cond(sp);
		fn3CB7_0000();
		si = ss->*sp;
		sp = bp;
		bp = ss->*sp;
		sp = (word16) sp + 2;
		return;
	}
	ax = ss->*((word16) bp - 8);
	SCZO = cond(ax - 0x01);
	if (Test(NE,Z))
	{
		SCZO = cond(ax - 0x02);
		if (Test(NE,Z))
			goto l21DC_11C0;
		ax.u0 = 0x1D;
		sp -= 2;
		ss->*sp = ax;
		ax.u0 = 0x5E00;
	}
	else
	{
		ax.u0 = 0x13;
		sp -= 2;
		ss->*sp = ax;
		ax.u0 = 24044;
	}
	sp -= 2;
	ss->*sp = ds;
	sp -= 2;
	ss->*sp = ax;
	fn1F38_042D();
	sp = (word16) sp + 6;
	SCZO = cond(sp);
l21DC_11C0:
	SCZO = cond(Mem0[ds:5044:word16] - 0x00);
	if (Test(NE,Z))
	{
		v17 = Mem0[ds:0x13B2:word16];
		sp -= 2;
		ss->*sp = v17;
		fn2017_00CB();
		sp = (word16) sp + 2;
		SCZO = cond(sp);
	}
	fn1F38_0D84();
	fn1F38_0BF1();
	fn1F38_036F();
	ax.u0 = 0x01;
	sp -= 2;
	ss->*sp = ax;
	fn3CEE_01B7();
	sp = (word16) sp + 2;
	SCZO = cond(sp);
	si = ss->*sp;
	sp = bp;
	bp = ss->*sp;
	sp = (word16) sp + 2;
}

